!function(V,O,H){"use strict";var $="ht";if(!V[$]){!function(){for(var Y=0,x=["ms","moz","webkit","o"],_=0;_<x.length&&!V.requestAnimationFrame;++_)V.requestAnimationFrame=V[x[_]+"RequestAnimationFrame"],V.cancelAnimationFrame=V[x[_]+"CancelAnimationFrame"]||V[x[_]+"CancelRequestAnimationFrame"];V.requestAnimationFrame||(V.requestAnimationFrame=function(l){var k=(new Date).getTime(),h=Math.max(0,16-(k-Y)),A=V.setTimeout(function(){l(k+h)},h);return Y=k+h,A}),V.cancelAnimationFrame||(V.cancelAnimationFrame=function(Z){y(Z)})}();var P,z,w,x,I=V.document,U=null,e=V[$]={},c=V[$+"config"],C=e.Default=c&&c.Default||{},d=e.Style=c&&c.Style||{},j=e.Color=c&&c.Color||{},k=e.IsGetter=c&&c.IsGetter||{},J=Math,M=J.round,Z=J.floor,S=J.ceil,o=J.sqrt,W=J.max,Y=J.min,g=J.abs,r=J.cos,p=J.acos,h=J.sin,A=J.pow,N=J.asin,G=J.PI,_=2*G,Q=G/2,F=J.tan,v=J.atan2,l=J.random,R=!1,n=!1,D=V.parseInt||global.parseInt,u="2016-12-15",a=function(Z){return Z*Z},T=V.setTimeout,y=V.clearTimeout,E=V.location,b=V.navigator?V.navigator.userAgent.toLowerCase():"",L=function(P){return P.test(b)},X=L(/msie/)||L(/trident/),i=L(/msie 10/),f=L(/firefox/),t=L(/mac/),K=C.isTouchable===H?I?"ontouchend"in I:!1:C.isTouchable,s="default",m="single",B="multiple",q="front",Eg="back",nd="left",ib="right",ei="top",pd="bottom",cr="center",Gm="eye",uj="middle",Uf="east",vc="west",rd="north",Zi="none",kp="px",Pi="absolute",Cr="border",jb="triangle",Zo="rect",yp="circle",fb="cylinder",rb="shape",kc="items",yi="normal",fo="remove",eh="clear",zl="width",Cn="height",Ff="ingroup",wr="check",Ph="uncheck",nq="radio",yn="radioOn",mc="radioOff",Sq="points",Md="values",Yq="series",Dh="body",Cl="label",Zp="label2",yc="note",Lr="note2",ai="icons",wm="labelFont",Kj="labelColor",qb="labelSelectColor",pf="note.expanded",Gd="note2.expanded",Mg="edge.expanded",lp="edge.points",Dp="edge.type",Qr="rotation",Cd="getRotation",uo="setRotation",Vd="hidden",rq="visible",$d="tuv",Fk="no",Vc="select",lf="currentSubGraph",Bk="selectBackground",Kp="autoMakeVisible",Nf="autoHideScrollBar",Nl="scrollBarColor",Sn="scrollBarSize",xn="indent",Zk="rowHeight",Jo="columnLineColor",gc="rowLineColor",lj="columnLineVisible",hi="rowLineVisible",mg="visibleFunc",Qg="expandIcon",bm="collapseIcon",vn="checkMode",us="sortFunc",Fo="editable",Wl="batchEditable",Yo="tristate",ln="asc",lg="desc",vh="position",kg="elevation",Vp="children",bl="translateX",Yc="translateY",Pn="dataModel",tc="shape3d",Xl="shape3d.resolution",oh="shape3d.visible",om="shape3d.from.visible",be="shape3d.to.visible",qp="shape3d.top.visible",th="shape3d.bottom.visible",jj="repeat.uv.length",gk="serializeValue",$l="deserializeValue",ir="centerUniform",Bq="rgba(255,255,255,0)",Ki="style",$c="attr",yj="field",Ae="string",gr="boolean",Og="color",km="int",kj="number",Er="ew-resize",Yg="ns-resize",Ie="pointer",Wp="auto",vf="mousedown",jm="mousemove",Ag="mouseup",tk="mouseout",vo="touchstart",Dq="touchmove",Cc="touchend",Mi="keydown",sr="keyup",rl=f?"DOMMouseScroll":"mousewheel",kh=K?[vo,Dq,Cc]:[Mi,sr,vf,jm,Ag,tk,rl,"contextmenu"],hs=U,Zj=U,Jf=U,Fl=Ag.length,gg=function(){Jf&&(y(Jf.timeout),Jf=U)},lb=function(){Jf&&nm(Jf.e,Jf.info)};V.addEventListener&&(K||(V.addEventListener(tk,function(){gg()},!1),V.addEventListener(rl,function(){jp()},!1)),V.addEventListener(sr,function(n){91===n.keyCode?Mq={}:delete Mq[n.keyCode]},!0),V.addEventListener(Mi,function(n){Mq[n.keyCode]=!0},!0));var Rr,Hl,hh,Id=!1,dh=U,Xh=U,Ob={},js={},Ch={},Fd={},is={},Mq={},Cb={},ug={},Hk={},Df=[],Wo={},Hn=U,Af=U,Qj=function(){},Kg=function(){throw"Oops!"},Qm=[0,0,0],Di=[0,0,0,0],fl={x:0,y:0,width:0,height:0},so=U,Cs=U,rh=U,Gg=function(B){Cs&&!B._72O&&(rh||(rh={}),rh[B._72O=Gn()]=B),Rr!=U?wb()<.05&&x&&!Hl&&(gp=gg):gp=Mp},Qi=function(m,W,c,E){Cs||(Cs={});var P=Cs[m];if(P){if(P.url===W)return;P.image.onload=Qj,P.image.onerror=Qj}var D=new Image;Cs[m]={image:D,url:W},D.onload=function(){c&&(D.width=c),E&&(D.height=E),C.handleImageLoaded(m,D),ao(m,D)},D.onerror=function(){ao(m,C.handleUnfoundImage(m,W)||U)},D.src=W},ao=function(o,N){if(js[o]=N,delete Cs[o],Jl(Cs)&&(Cs=U,rh)){for(var f in rh){var S=rh[f];S.invalidateAll&&S.invalidateAll(),S.redraw&&S.redraw(),S.iv(),delete S._72O}rh=U}if(N&&rh)for(var f in rh){var S=rh[f];S.invalidateAll&&S.invalidateAll(),S.redraw&&S.redraw(),S.iv()}},vk=function(){return V.performance&&V.performance.now?V.performance.now():Date.now()},bk=function(L,N){N?y(L):V.cancelAnimationFrame(L)},yk=function(S,v,K){return{width:S,height:v,comps:bf(K)?K:[K]}},_k=function(Q,e){return{type:yp,rect:[Q,e,1.6,1.6],borderWidth:1,borderColor:Ec,gradient:Jk,gradientColor:$g,background:Ec}},ps=function(e,q){return yk(16,16,{type:jb,rect:[4,4,10,8],background:e,rotation:q?1.57:3.14})},ik=function(b,W){return yk(16,16,{type:jb,rect:[4,4,8,7],background:b,rotation:W?3.14:0})},fp=function(e){var L=e._orientation;return"horizontal"===L||"h"===L},sn=function(P){e.z=z=P},zd=function(n){var a=2,B=0;for(var O in n)O.length===a&&D(O,32)===kq&&(Hn=Af=n[O]),B++;return B},Vj=function(V,t,P){return P?{x:V-P,y:t-P,width:2*P+1,height:2*P+1}:K?{x:V-5,y:t-5,width:11,height:11}:{x:V-1,y:t-1,width:3,height:3}},gf=function(y){return(/ble$/.test(y)||/ed$/.test(y)||k[y]?"is":"get")+y.charAt(0).toUpperCase()+y.slice(1)},So=function(h){return"set"+h.charAt(0).toUpperCase()+h.slice(1)},re=function(H){return typeof H===Ae||H instanceof String},jr=function(C){return typeof C===kj},Mp=function(t){return typeof t===gr},ks=function($){return $&&"object"==typeof $},Jm=function(Q){return"function"==typeof Q},bf=function(M){return M instanceof Array},Ni=function(P){return P instanceof rn},Ul=function(E){return bf(E)?new rn(E):E},Fm=function(d){return d instanceof yh},ns=function($){return $ instanceof Ao},$e=function(B){return B instanceof gq},an=function(O){return O&&"IFRAME"===O.tagName},Hr=function(R){return R==U?R:parseFloat(R.toFixed(2))},_j=function(y,F,p){var G,X=F.length;if(p)for(var R=0;p>R;R++)if(3===X)y.push(F[0]),y.push(F[1]),y.push(F[2]);else for(G=0;X>G;G++)y.push(F[G]);else if(3===X)y.push(F[0]),y.push(F[1]),y.push(F[2]);else for(G=0;X>G;G++)y.push(F[G])},Pg=function(I){return I?ks(I)?I:{}:!1},pr=function(I,n,S){var M,Y=ks(I)?I:I.prototype;for(M in n)S&&Y[M]!==H||(Y[M]=n[M]);return I},Fb=function(m){return String.fromCharCode(m)},tp=function(Y){for(var H,G=0,M="";G<Y.length;G++)H=Y[Y.length-1-G],"%"===H?H="'":"a"===H?H='"':"]"===H&&(H="\\"),M+=Fb(H.charCodeAt(0)-1);return M},si=function(B,O,b){B.superClass.constructor.apply(O,b)},Jl=function(m){for(var a in m)return!1;return!0},ci=function(P){return P?0===P.length:!0},ve=function(t,Q){return t.x===Q.x&&t.y===Q.y&&t.width===Q.width&&t.height===Q.height},ls=function(F,h,f){return h>F?h:F>f?f:F},wb=function(){var o=1e4*h(Fl++);return o-Z(o)},Mk=function(x,d,p){return $k(x.x,x.y,d.x,d.y,p.x,p.y,p.x+p.width,p.y,!0)||$k(x.x,x.y,d.x,d.y,p.x+p.width,p.y,p.x+p.width,p.y+p.height,!0)||$k(x.x,x.y,d.x,d.y,p.x+p.width,p.y+p.height,p.x,p.y+p.height,!0)||$k(x.x,x.y,d.x,d.y,p.x,p.y+p.height,p.x,p.y,!0)},$k=function(t,w,K,i,O,Q,h,T,V){var o=(h-O)*(w-Q)-(T-Q)*(t-O),P=(T-Q)*(K-t)-(h-O)*(i-w);if(0!==P){var z=o/P,b=t+z*(K-t),d=w+z*(i-w);return V&&(b+rg<Y(t,K)||b-rg>W(t,K)||b+rg<Y(O,h)||b-rg>W(O,h)||d+rg<Y(w,i)||d-rg>W(w,i)||d+rg<Y(Q,T)||d-rg>W(Q,T))?U:[b,d]}return U},Dk=function(E,J,y){if(E&&y)if(J){if(J===Ki)return E.getStyle(y);if(J===$c)return E.getAttr(y);if(J===yj)return E[y]}else if(y=gf(y),E[y])return E[y]();return H},en=function(r,$,A,L){if(r&&A)if($){if($===Ki)r.s(A,L);else if($===$c)r.a(A,L);else if($===yj){var q=r[A];r[A]=L,r.fp("f:"+A,q,L)}}else A=So(A),r[A]&&r[A](L)},Nh=function(m,R,r,Z,B){R&&rf(m,r,Z,1,B,R)},og=function(N,Q,Y,d){var P=1-N;return P*P*Q+2*N*P*Y+N*N*d},Uj=function(w,H,c,f,g){var Y=1-w;return Y*Y*Y*H+3*Y*Y*w*c+3*Y*w*w*f+w*w*w*g},Gq=function(N){var s,q,D,i,R=0;return N.forEach(function(c){if(s=c.length,s>0)for(q=c[0],i=1;s>i;i++)D=c[i],R+=Qh(q,D),q=D}),R},mo=function(l,R,Z){var I="__"+l,N=function(Y){Z["handle_"+l](Y)};Z[I]||(Z[I]=N,R.addEventListener(l,N,!1))},um=function(K,x,E){var u="__"+K,Y=E[u];Y&&(x.removeEventListener(K,Y,!1),delete E[u])},mh=function(t,h){var q="_"+h;t[gf(h)]=function(){return this[q]},t[So(h)]=function(a){var l=this[q];this[q]=a,this.fp(h,l,a)}},bp=function(i){return O.create(i)},Zg=function(I){if(!I.element){var q,y;(q=I.textField)?y=He(Oq.TextField,q):(q=I.textArea)?y=He(Oq.TextArea,q):(q=I.button)?y=He(Oq.Button,q):(q=I.comboBox)?y=He(Oq.ComboBox,q):(q=I.checkBox)?y=He(Oq.CheckBox,q):(q=I.radioButton)?y=He(Oq.RadioButton,q):(q=I.slider)?y=He(Oq.Slider,q):(q=I.colorPicker)?y=He(Oq.ColorPicker,q):(q=I.image)&&(y=He(Oq.Image,q)),y&&(I.element=y)}},Jp=function(Y,u){var S=xk(Y);return S._ht=u,S},xk=function(P){var z=I.createElement("div"),X=z.style;return z.tabIndex=-1,z.onkeydown=cj,X.msTouchAction=Zi,X.cursor=s,qj(z,U,0),K&&X.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",U),P&&(X.overflow=Vd),z},Kh=function(y){var t=I.createElement("canvas"),C=t.style;return C.msTouchAction=Zi,C.pointerEvents=Zi,qj(t,U,0),y&&sk(y,t),t},qj=function(z,f,s){var c=z.style;c.border=f?f+" solid 1px":0,c.outline=0,c.padding=s?"0 "+s+kp:0,En(z)},En=function(M){var A=M.style;A.position=Pi,A.margin=0,A.setProperty("box-sizing","border-box",U),A.setProperty("-moz-box-sizing","border-box",U)},kr=function(l,y,h,f){f||(f=Yr),y!=U&&(l.width=y*f,l.style.width=y+kp),h!=U&&(l.height=h*f,l.style.height=h+kp)},sk=function(Q,K,v){Q.appendChild(K),v&&(K.style.position=Pi)},Fg=function(u,j){j.split||(j+="");for(var T,F=j.split("\n"),r=0,W=F.length,d=0;W>d;d++){var Z=sm(u.font,F[d]);Z.width>r&&(r=Z.width),T||(T=Z.height)}return u.ss=F,{width:r,height:T*W}},Ve=function(C,y,V,o,F,i){var Y=y.length;if(1===Y)No(C,y[0],V,o,F);else for(var m=V.height/Y,Z={x:V.x,y:V.y,width:V.width,height:m},L=0;L<y.length;L++)i?vs(C,y[L],o,F,Z.x,Z.y,Z.width,Z.height,i):No(C,y[L],Z,o,F),Z.y+=m},No=function(B,z,i,U,v){B.font=U?U:fc,B.fillStyle=v?v:fj,B.textAlign=cr,B.textBaseline=uj;var g,w;i?i.width===H?(g=i.x,w=i.y):(g=i.x+i.width/2,w=i.y+i.height/2):(g=0,w=0),B.fillText(z,M(g),M(w))},$n=function(d){d.getView&&(d=d.getView());var g=d.offsetWidth||d.scrollWidth;return!g&&d.style.width&&(g=D(d.style.width)),g},md=function(F){F.getView&&(F=F.getView());var o=F.offsetHeight||F.scrollHeight;return!o&&F.style.height&&(o=D(F.style.height)),o},hc=function(){var c=function(R){cj(R),R.stopPropagation()},u=K?[vo]:[Mi,vf,rl];return function(o){var Z=xk(),A=Z.style;return A.backgroundColor=C.disabledBackground,o&&(A.backgroundImage="url("+o+")",A.backgroundPosition="50% 50%",A.backgroundRepeat="no-repeat no-repeat"),u.forEach(function(p){Z.addEventListener(p,c)}),Z}}(),os=function(G){var M=G.getContext("2d");return M.save(),M.lineCap=Eo,M.lineJoin=rj,M},gp=function(B,b,z,S){kk(B,b*Yr,z*Yr),S*=Yr,1!==S&&B.scale(S,S)},kk=function(Q,T,H){Q.translate(T,H)},_f=function(h,k){h.rotate(k)},nk=function($){if(I.activeElement!==$)if(K)$.focus();else{var Q=cp(),N=Q.target;$.focus(),N.scrollLeft=Q.left,N.scrollTop=Q.top}},ge=function(N){return N&&N.getView?N.getView():N},bb=function(D,s,O,k,f){2===arguments.length&&(O=s.y,k=s.width,f=s.height,s=s.x);var C=ge(D),L=C.style;(I.fullscreenElement||I.mozFullScreenElement||I.webkitFullscreenElement||I.msFullscreenElement)!==C&&(s!==H&&(L.left=s+kp),O!==H&&(L.top=O+kp),k!==H&&(L.width=k+kp),f!==H&&(L.height=f+kp)),D.endEditing&&!K&&D.endEditing(),D.redraw&&D.redraw(),D.invalidate&&D.invalidate(),D.onLayouted&&D.onLayouted(s,O,k,f),D._41O&&D._41O("layout")},zk=function(P){var g=P.touches[0];return g?g:P.changedTouches[0]},De=function(p){C.popup&&C.popup.close(),C.popup=p},bs=U,ch=function(M){bs.handleWindowTouchMove(M)},If=function(h){bs.handleWindowTouchEnd(h),V.removeEventListener(Dq,ch,!1),V.removeEventListener(Cc,If,!1),bs=U},es=function(H){bs.handleWindowMouseMove(H)},dg=function(W){bs.handleWindowMouseUp(W),V.removeEventListener(jm,es,!1),V.removeEventListener(Ag,dg,!1),bs=U},Jj=function(v){return 1===Nn(v)},Ur=function(u,t){return t?t.keyCode===u:Mq[u]},Wi=function(Z){return Op(Z)&&Ur(65,Z)},Xr=function(K){return Ur(46,K)||Ur(8,K)},Sm=function(N){return function(x){return x?x.keyCode===N:Mq[N]}},kq=573,Bf=[65,83,68,87,37,38,39,40,32,13,27],ul=Sm(Bf[0]),of=Sm(Bf[1]),bo=Sm(Bf[2]),ck=Sm(Bf[3]),kn=Sm(Bf[4]),pb=Sm(Bf[5]),Hf=Sm(Bf[6]),Sf=Sm(Bf[7]),Jq=Sm(Bf[8]),Bn=Sm(Bf[9]),Sg=Sm(Bf[10]),Le={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},nh=[2,2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,5,5,7,7,7],zr=U,Yh=U,Bj=function(s,e){zr||(zr=Kh()),kr(zr,s,e,1);var V=os(zr);return V.clearRect(0,0,s,e),V},lm=function(){var k,Q={};return function(h){var Y,T=Q[h];return T||(k||(k=Kh(),kr(k,1,1,1)),Y=k.getContext("2d"),Y.clearRect(0,0,1,1),rf(Y,0,0,1,1,h),T=Y.getImageData(0,0,1,1).data,T=Q[h]=[T[0],T[1],T[2],T[3]]),T}}(),$m=function(R){if(!re(R))return R;var H=lm(R);return H.CA||(H.CA=[H[0]/255,H[1]/255,H[2]/255,H[3]/255]),H.CA},Nr=function(n,g,U,Q){var a=Kh();a.width=U,a.height=Q;var H=a.getContext("2d");H.drawImage(n,0,0,U,Q);try{for(var c=H.getImageData(0,0,U,Q),f=c.data,E=0,V=f.length;V>E;E+=4){var Z=f[E+0],k=f[E+1],D=f[E+2];f[E+0]=g[0]*Z,f[E+1]=g[1]*k,f[E+2]=g[2]*D}H.putImageData(c,0,0)}catch(Y){return n}return a},yo=function(B,c,t){return c&&(c="miter"===t?8*c+20:c+1,B&&xg(B,c)),c},Hp=function(T,p){if(p){var c=new Pq(p),W=T.width/2,Z=T.height/2,R=xd([c.tf(-W,-Z),c.tf(W,-Z),c.tf(W,Z),c.tf(-W,Z)]);return R.x+=T.x+W,R.y+=T.y+Z,R}return T},Re=function(q,H,p,h,c,m,v,W){h*=Math.PI/180;var s={x:Math.cos(h)*(q.x-v.x)/2+Math.sin(h)*(q.y-v.y)/2,y:-Math.sin(h)*(q.x-v.x)/2+Math.cos(h)*(q.y-v.y)/2},J=Math.pow(s.x,2)/Math.pow(H,2)+Math.pow(s.y,2)/Math.pow(p,2);J>1&&(H*=Math.sqrt(J),p*=Math.sqrt(J));var u=(c==m?-1:1)*Math.sqrt((Math.pow(H,2)*Math.pow(p,2)-Math.pow(H,2)*Math.pow(s.y,2)-Math.pow(p,2)*Math.pow(s.x,2))/(Math.pow(H,2)*Math.pow(s.y,2)+Math.pow(p,2)*Math.pow(s.x,2)));isNaN(u)&&(u=0);var K={x:u*H*s.y/p,y:u*-p*s.x/H},L={x:(q.x+v.x)/2+Math.cos(h)*K.x-Math.sin(h)*K.y,y:(q.y+v.y)/2+Math.sin(h)*K.x+Math.cos(h)*K.y},g=function(p){return Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2))},O=function(i,t){return(i[0]*t[0]+i[1]*t[1])/(g(i)*g(t))},R=function(U,q){return(U[0]*q[1]<U[1]*q[0]?-1:1)*Math.acos(O(U,q))},j=R([1,0],[(s.x-K.x)/H,(s.y-K.y)/p]),d=[(s.x-K.x)/H,(s.y-K.y)/p],i=[(-s.x-K.x)/H,(-s.y-K.y)/p],e=R(d,i);O(d,i)<=-1&&(e=Math.PI),O(d,i)>=1&&(e=0);var O=H>p?H:p,$=H>p?1:H/p,l=H>p?p/H:1;if(null==W){var x={x:0,y:0,width:0,height:0};xg(x,O),x.x*=$,x.width*=$,x.y*=l,x.height*=l;var w=new Pq(h);return x=xd([w.tf(x.x,x.y),w.tf(x.x+x.width,x.y),w.tf(x.x+x.width,x.y+x.height),w.tf(x.x,x.y+x.height)]),x.x+=L.x,x.y+=L.y,[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}]}W.translate(L.x,L.y),W.rotate(h),W.scale($,l),W.arc(0,0,O,j,j+e,1-m),W.scale(1/$,1/l),W.rotate(-h),W.translate(-L.x,-L.y)},Tl=function(C,H){C&&C.beginPath();for(var X,E,D,R=[],e=function(h){for(var m,U=/(\-{0,1}[\d\.]+)/gi,d=[];m=U.exec(h);)d.push(parseFloat(m[0]));return d},G=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,g={x:0,y:0};X=G.exec(H);){var o=X[0],M=o.substr(0,1);if("M"===M||"m"===M){for(var U=e(o),t=0;t<U.length;t+=2){var k=U[t],l=U[t+1];"m"===M&&(k+=g.x,l+=g.y),C&&C.moveTo(k,l),R.push({x:k,y:l}),g.x=k,g.y=l}E=D=null}else if("H"===M||"h"===M){for(var U=e(o),t=0;t<U.length;t+=1){var k=U[t];"h"===M&&(k+=g.x),C&&C.lineTo(k,g.y),R.push({x:k,y:g.y}),g.x=k}E=D=null}else if("C"===M||"c"===M){for(var U=e(o),t=0;t<U.length;t+=6){var L=U[t],P=U[t+1],S=U[t+2],n=U[t+3],k=U[t+4],l=U[t+5];"c"===M&&(L+=g.x,P+=g.y,S+=g.x,n+=g.y,k+=g.x,l+=g.y),C&&C.bezierCurveTo(L,P,S,n,k,l),R.push({x:L,y:P}),R.push({x:S,y:n}),R.push({x:k,y:l}),g.x=k,g.y=l}E=[L,P,S,n,k,l],D=null}else if("S"===M||"s"===M){for(var U=e(o),t=0;t<U.length;t+=4){var L,P;E?(L=2*E[4]-E[2],P=2*E[5]-E[3]):(L=g.x,P=g.y);var S=U[t],n=U[t+1],k=U[t+2],l=U[t+3];"s"===M&&(S+=g.x,n+=g.y,k+=g.x,l+=g.y),C&&C.bezierCurveTo(L,P,S,n,k,l),R.push({x:L,y:P}),R.push({x:S,y:n}),R.push({x:k,y:l}),g.x=k,g.y=l}E=[L,P,S,n,k,l],D=null}else if("Q"===M||"q"===M){for(var U=e(o),t=0;t<U.length;t+=4){var L=U[t],P=U[t+1],k=U[t+2],l=U[t+3];"q"===M&&(L+=g.x,P+=g.y,k+=g.x,l+=g.y),C&&C.quadraticCurveTo(L,P,k,l),R.push({x:L,y:P}),R.push({x:k,y:l}),g.x=k,g.y=l}E=null,D=[L,P,k,l]}else if("T"===M||"t"===M){for(var U=e(o),t=0;t<U.length;t+=2){var L,P;D?(L=2*D[2]-D[0],P=2*D[3]-D[1]):(L=g.x,P=g.y);var k=U[t],l=U[t+1];"t"===M&&(k+=g.x,l+=g.y),C&&C.quadraticCurveTo(L,P,k,l),R.push({x:L,y:P}),R.push({x:k,y:l}),g.x=k,g.y=l}E=null,D=[L,P,k,l]}else if("V"===M||"v"===M){for(var U=e(o),t=0;t<U.length;t+=1){var l=U[t];"v"===M&&(l+=g.y),C&&C.lineTo(g.x,l),R.push({x:g.x,y:l}),g.y=l}E=D=null}else if("L"===M||"l"===M){for(var U=e(o),t=0;t<U.length;t+=2){var k=U[t],l=U[t+1];"l"===M&&(k+=g.x,l+=g.y),C&&C.lineTo(k,l),R.push({x:k,y:l}),g.x=k,g.y=l}E=D=null}else if("A"===M||"a"===M){for(var U=e(o),t=0;t<U.length;t+=7){var s=U[t],K=U[t+1],f=U[t+2],J=U[t+3],B=U[t+4],k=U[t+5],l=U[t+6];"a"===M&&(k+=g.x,l+=g.y);var p=Re(g,s,K,f,J,B,{x:k,y:l},C);p&&(R=R.concat(p)),g.x=k,g.y=l}E=D=null}var O=o.substr(o.length-1);("z"===O||"Z"===O)&&C&&C.closePath()}return R},ko=function(Q,x,g,C){var p=!1;if(Q.beginPath?Q.beginPath():p=!0,Ni(x)&&(x=x._as),Ni(g)&&(g=g._as),g&&g.length){for(var d,s,u,n,v=0,S=0,t=g.length;t>S;S++)d=g[S],1===d?(s=x[v++],Q.moveTo(s.x,p?-s.y:s.y)):2===d?(s=x[v++],Q.lineTo(s.x,p?-s.y:s.y)):3===d?(s=x[v++],u=x[v++],Q.quadraticCurveTo(s.x,p?-s.y:s.y,u.x,p?-u.y:u.y)):4===d?(s=x[v++],u=x[v++],n=x[v++],Q.bezierCurveTo(s.x,p?-s.y:s.y,u.x,p?-u.y:u.y,n.x,p?-n.y:n.y)):5===d&&Q.closePath();C&&5!==d&&Q.closePath()}else{var M,I,Y,W=x.length;if(W>0){for(M=x[0],Q.moveTo(M.x,p?-M.y:M.y),I=1;W>I;I++)Y=x[I],Q.lineTo(Y.x,p?-Y.y:Y.y);C&&Q.closePath()}}},qq=function(S,q,a,i){if(Ni(S)&&(S=S._as),Ni(q)&&(q=q._as),q&&q.length){a=a||te;for(var t,H,N,Y,D,O,P=[],g=U,G=0,k=0,p=q.length;p>k;k++)if(t=q[k],1===t)P.push(g=[]),g.push(S[G++]);else if(2===t)g.push(S[G++]);else if(3===t)for(H=g[g.length-1],N=S[G++],Y=S[G++],O=1;a>=O;O++)g.push({x:og(O/a,H.x,N.x,Y.x),y:og(O/a,H.y,N.y,Y.y)});else if(4===t)for(H=g[g.length-1],N=S[G++],Y=S[G++],D=S[G++],O=1;a>=O;O++)g.push({x:Uj(O/a,H.x,N.x,Y.x,D.x),y:Uj(O/a,H.y,N.y,Y.y,D.y)});else 5===t&&g.push(g[0]);return i&&5!==t&&g&&g.length>2&&g.push(g[0]),P}return i&&S.length>2&&(S=S.slice(),S.push(S[0])),S?[S]:[]},zb=function(l,e,m,X,s,B){var Q,V,a,M=lm(e),u=X,g=M[0],$=M[1],K=M[2];if(m){var L=lm(m);Q=L[0]-g,V=L[1]-$,a=L[2]-K}else Q=255-g,V=255-$,a=255-K;for(B||(B=X>10?1:.5,B=1>s?Y(B/s,2):B);(X-=B)>0;){var T=1-X/u,n=g+Q*T,w=$+V*T,x=K+a*T;n=Y(S(n),255),w=Y(S(w),255),x=Y(S(x),255),l.strokeStyle="rgb("+n+","+w+","+x+")",l.lineWidth=X,l.stroke()}},pk=function(){var D={};return function(z,P){var r=z+"-"+P,H=D[r];if(H)return H;var k,y,m,O=lm(z);return 0>P?(P=(100+P)/100,k=S(O[0]*P),y=S(O[1]*P),m=S(O[2]*P)):(P/=100,k=O[0],y=O[1],m=O[2],k+=(255-k)*P,y+=(255-y)*P,m+=(255-m)*P,k=Y(S(k),255),y=Y(S(y),255),m=Y(S(m),255)),D[r]="rgb("+k+","+y+","+m+")"}}(),rf=function(q,t,K,j,e,x){x&&(q.fillStyle=x),q.beginPath(),q.rect(t,K,j,e),q.fill()},Db=function(G,K,d,f,_,u,S){G.beginPath(),Pe[K](G,d.x,d.y,d.width,d.height,f,_,u,S)},mq=function(H,e,n,Q,p){var J=Pe[n];H.fillStyle=J?J(H,e,Q?Q:$g,p.x,p.y,p.width,p.height):e},fm=function(t,r){t.fillStyle=t.createPattern(r,"repeat")},aq=function(m,y,n,p,s,V,F,T){var l,H,X,$,R,x,f,D,L,Y,z;if(g(s)>2*G&&(s=2*G),R=S(g(s)/(G/4)),l=s/R,H=-l,X=-p,R>0){x=y+r(p)*V,f=n+h(-p)*F,T?m.lineTo(x,f):m.moveTo(x,f);for(var O=0;R>O;O++)X+=H,$=X-H/2,D=y+r(X)*V,L=n+h(X)*F,Y=y+r($)*(V/r(H/2)),z=n+h($)*(F/r(H/2)),m.quadraticCurveTo(Y,z,D,L)}},jc=function(X,a,A,e,l,E,J,s,g){6===arguments.length&&(J=E,s=E,g=E);var m=a+e,z=A+l,U=l>e?2*e:2*l;E=U>E?E:U,J=U>J?J:U,s=U>s?s:U,g=U>g?g:U;var R=.29*g,f=.58*g;X.moveTo(m,z-g),X.quadraticCurveTo(m,z-f,m-R,z-R),X.quadraticCurveTo(m-f,z,m-g,z),R=.29*s,f=.58*s,X.lineTo(a+s,z),X.quadraticCurveTo(a+f,z,a+R,z-R),X.quadraticCurveTo(a,z-f,a,z-s),R=.29*E,f=.58*E,X.lineTo(a,A+E),X.quadraticCurveTo(a,A+f,a+R,A+R),X.quadraticCurveTo(a+f,A,a+E,A),R=.29*J,f=.58*J,X.lineTo(m-J,A),X.quadraticCurveTo(m-f,A,m-R,A+R),X.quadraticCurveTo(m,A+f,m,A+J),X.lineTo(m,z-g)},zn=function(m,Q,G,z,a,I,J){Q&&(G=M(G),z=M(z),J||(J=1),m.fillStyle=Q,m.beginPath(),m.rect(G,z,J,I),m.rect(G,z,a,J),m.rect(G,z+I-J,a,J),m.rect(G+a-J,z,J,I),m.fill())},Ab=function(E,X,I,L){var W=L.x,v=L.y,$=L.width,B=L.height;if(!(!X||!I||0>=$||0>=B)){var c,U=_l(X),H=Yl(X),K=I>0;1===I||-1===I?(E.fillStyle=K?U:H,E.beginPath(),E.rect(W,v,1,B),E.rect(W,v,$,1),E.fill(),E.fillStyle=K?H:U,E.beginPath(),E.rect(W,v+B-1,$,1),E.rect(W+$-1,v,1,B),E.fill()):(I=Y(g(I),Y($/2,B/2)),c=E.createLinearGradient(W,v,W+I,v),c.addColorStop(0,K?U:H),c.addColorStop(1,X),E.fillStyle=c,E.beginPath(),E.moveTo(W,v),E.lineTo(W+I,v+I),E.lineTo(W+I,v+B-I),E.lineTo(W,v+B),E.lineTo(W,v),E.fill(),c=E.createLinearGradient(W,v,W,v+I),c.addColorStop(0,K?U:H),c.addColorStop(1,X),E.fillStyle=c,E.beginPath(),E.moveTo(W,v),E.lineTo(W+I,v+I),E.lineTo(W+$-I,v+I),E.lineTo(W+$,v),E.lineTo(W,v),E.fill(),c=E.createLinearGradient(W,v+B,W,v+B-I),c.addColorStop(0,K?H:U),c.addColorStop(1,X),E.fillStyle=c,E.beginPath(),E.moveTo(W,v+B),E.lineTo(W+I,v+B-I),E.lineTo(W+$-I,v+B-I),E.lineTo(W+$,v+B),E.lineTo(W,v+B),E.fill(),c=E.createLinearGradient(W+$,v,W+$-I,v),c.addColorStop(0,K?H:U),c.addColorStop(1,X),E.fillStyle=c,E.beginPath(),E.moveTo(W+$,v),E.lineTo(W+$-I,v+I),E.lineTo(W+$-I,v+B-I),E.lineTo(W+$,v+B),E.lineTo(W+$,v),E.fill())}},hg=function(v,J,z,D,Z,q,s){var L=v.createLinearGradient(D,Z,q,s);return L.addColorStop(0,z),L.addColorStop(1,J),L},bh=function(l,N,y,n,t,E,J){var u=l.createLinearGradient(n,t,E,J);return u.addColorStop(0,N),u.addColorStop(.5,y),u.addColorStop(1,N),u},cd=function(e,R,H,p,q,c,y){var l=e.createLinearGradient(p,q,c,y);return l.addColorStop(0,R),l.addColorStop(1/3,H),l.addColorStop(2/3,R),l.addColorStop(1,H),l},Vg=function(g,R,Z,x,f,C,E,S,o){var p=g.createRadialGradient(x+C*S,f+E*o,Y(C,E)/24,x+C/2,f+E/2,W(C,E)/2);return p.addColorStop(0,Z),p.addColorStop(1,R),p},Pe={polygon:function(l,u,z,d,F,D){(D==U||3>D)&&(D=6);for(var L,N,Z=Y(d,F)/2,i=u+d/2,v=z+F/2,q=0,J=2*G/D,j=0;D>j;j++)L=i+r(q)*Z,N=v+h(q)*Z,0===j?l.moveTo(L,N):l.lineTo(L,N),q+=J;l.closePath()},arc:function(b,q,P,T,W,x,R,B,p){x==U&&(x=G),R==U&&(R=_),B==U&&(B=!0);var H=q+T/2,N=P+W/2;B&&b.moveTo(H,N),p?(x=-x,R=-R,aq(b,H,N,x,R-x,T/2,W/2,!0)):b.arc(H,N,Y(T,W)/2,x,R),B&&b.closePath()},rect:function(I,Y,S,s,L){I.rect(Y,S,s,L)},circle:function(U,O,Z,w,m){U.arc(O+w/2,Z+m/2,Y(w,m)/2,0,_,!0)},oval:function(l,S,E,x,y){aq(l,S+x/2,E+y/2,0,_,x/2,y/2,!1)},roundRect:function(E,X,p,V,c,r){r==U&&(r=Y(Y(V,c)/4,8)),jc(E,X,p,V,c,r)},star:function(g,a,i,N,s){var Y=2*N,X=2*s,w=a+N/2,T=i+s/2;g.moveTo(w-Y/4,T-X/12),g.lineTo(a+.306*N,i+.579*s),g.lineTo(w-Y/6,T+X/4),g.lineTo(a+N/2,i+.733*s),g.lineTo(w+Y/6,T+X/4),g.lineTo(a+.693*N,i+.579*s),g.lineTo(w+Y/4,T-X/12),g.lineTo(a+.611*N,i+.332*s),g.lineTo(w+0,T-X/4),g.lineTo(a+.388*N,i+.332*s),g.closePath()},triangle:function(Z,O,E,z,v){Z.moveTo(O+z/2,E),Z.lineTo(O+z,E+v),Z.lineTo(O,E+v),Z.closePath()},hexagon:function(u,S,g,R,t){u.moveTo(S,g+t/2),u.lineTo(S+R/4,g+t),u.lineTo(S+3*R/4,+g+t),u.lineTo(S+R,g+t/2),u.lineTo(S+3*R/4,g),u.lineTo(S+R/4,g),u.closePath()},pentagon:function(a,t,g,O,E){var m=2*O,G=2*E,D=t+O/2,A=g+E/2;a.moveTo(D-m/4,A-G/12),a.lineTo(D-m/6,A+G/4),a.lineTo(D+m/6,A+G/4),a.lineTo(D+m/4,A-G/12),a.lineTo(D+0,A-G/4),a.closePath()},diamond:function(q,Z,r,M,O){q.moveTo(Z+M/2,r),q.lineTo(Z,r+O/2),q.lineTo(Z+M/2,r+O),q.lineTo(Z+M,r+O/2),q.closePath()},rightTriangle:function(N,f,$,c,h){N.moveTo(f,$),N.lineTo(f+c,$+h),N.lineTo(f,$+h),N.closePath()},parallelogram:function(X,A,L,h,G){var t=h/4;X.moveTo(A+t,L),X.lineTo(A+h,L),X.lineTo(A+h-t,L+G),X.lineTo(A,L+G),X.closePath()},trapezoid:function(T,w,K,k,F){var t=k/4;T.moveTo(w+t,K),T.lineTo(w+k-t,K),T.lineTo(w+k,K+F),T.lineTo(w,K+F),T.closePath()},"linear.southwest":function(U,t,i,X,A,F,z){return hg(U,t,i,X,A+z,X+F,A)},"linear.southeast":function(h,P,u,D,I,S,e){return hg(h,P,u,D+S,I+e,D,I)},"linear.northwest":function(Y,P,W,R,a,F,b){return hg(Y,P,W,R,a,R+F,a+b)},"linear.northeast":function(e,Z,S,X,j,k,O){return hg(e,Z,S,X+k,j,X,j+O)},"linear.north":function(t,X,h,S,y,N,U){return hg(t,X,h,S,y,S,y+U)},"linear.south":function(J,R,h,j,B,D,A){return hg(J,R,h,j,B+A,j,B)},"linear.west":function(N,B,w,I,p,k){return hg(N,B,w,I,p,I+k,p)},"linear.east":function(O,s,g,K,o,V){return hg(O,s,g,K+V,o,K,o)},"radial.center":function(V,W,r,B,g,Y,D){return Vg(V,W,r,B,g,Y,D,.5,.5)},"radial.southwest":function(r,g,H,o,m,X,V){return Vg(r,g,H,o,m,X,V,.25,.75)},"radial.southeast":function(_,X,b,Q,v,o,u){return Vg(_,X,b,Q,v,o,u,.75,.75)},"radial.northwest":function(t,m,j,T,R,F,C){return Vg(t,m,j,T,R,F,C,.25,.25)},"radial.northeast":function(k,Q,M,z,U,$,r){return Vg(k,Q,M,z,U,$,r,.75,.25)},"radial.north":function(j,h,N,w,Z,T,q){return Vg(j,h,N,w,Z,T,q,.5,.25)},"radial.south":function(C,M,$,h,J,m,Q){return Vg(C,M,$,h,J,m,Q,.5,.75)},"radial.west":function(k,R,z,l,X,y,F){return Vg(k,R,z,l,X,y,F,.25,.5)},"radial.east":function(r,l,k,N,Z,C,J){return Vg(r,l,k,N,Z,C,J,.75,.5)},"spread.horizontal":function(_,a,I,Y,y,h){return bh(_,a,I,Y,y,Y+h,y)},"spread.vertical":function(o,b,B,p,i,D,j){return bh(o,b,B,p,i,p,i+j)},"spread.diagonal":function(u,U,J,q,s,D,p){return bh(u,U,J,q+D,s,q,s+p)},"spread.antidiagonal":function(r,t,M,W,g,b,q){return bh(r,t,M,W,g,W+b,g+q)},"spread.north":function(q,O,B,L,V,y,h){return cd(q,O,B,L,V-h/4,L,V+h+h/4)},"spread.south":function(f,g,A,J,D,T,_){return cd(f,A,g,J,D-_/4,J,D+_+_/4)},"spread.west":function(r,K,y,e,x,P){return cd(r,K,y,e-P/4,x,e+P+P/4,x)},"spread.east":function(v,m,w,z,G,S){return cd(v,w,m,z-S/4,G,z+S+S/4,G)}},Pq=function(X,R,U){var n=this;n.s=h(X),n.c=r(X),n.cx=R||0,n.cy=U||0};Pq.prototype.tf=function(S,F){1===arguments.length&&(F=S.y,S=S.x);var p=this;return{x:p.c*S-p.s*F+p.cx,y:p.s*S+p.c*F+p.cy}};var rp=function(w,C,T){return new Pq(w).tf(C,T)},Rn=function(u){var $=u.touches[0],K=u.touches[1],T=$.clientX,M=$.clientY,f=K.clientX,N=K.clientY;return o((T-f)*(T-f)+(M-N)*(M-N))},Co=(function(){for(var P=0,B=lg.split(""),z=0;z<B.length;z++)P=10*D(B[z])+P;return sn(V[kq.toString(8*z)+Cl.substr(z)]),P}(),function(E,U,J){for(var f=0;f<J.size();f++){var x=J.get(f);E.co(x)&&U.add(x)}for(f=0;f<J.size();f++)x=J.get(f),Co(E,U,x._children)}),jl=function(G,q,E){for(var d=0;d<E.size();d++){var F=E.get(E.size()-1-d);G.co(F)&&q.add(F)}for(d=0;d<E.size();d++)F=E.get(d),jl(G,q,F._children)},Ii=function(R,h,j){for(var U=!1,T=0;T<j.size();T++){var v=j.get(T);R.co(v)?U&&h.add(v):U=1}for(T=0;T<j.size();T++)v=j.get(T),Ii(R,h,v._children)},We=function(y,i,Y){for(var X=!1,b=0;b<Y.size();b++){var F=Y.get(Y.size()-1-b);y.co(F)?X&&i.add(F):X=!0}for(b=0;b<Y.size();b++)F=Y.get(b),We(y,i,F._children)},fs=function(F,b,H,_){var E=_==U;if(0!==b||0!==H||!E&&0!==_){var O,Z,i,j,g=new rn;F.each(function(f){if(Fm(f)){var y=!0;if(i)for(O=0;O<i.size();O++)Z=i.get(O),Z.isHostOn(f)?(i.removeAt(O),O--,g.remove(Z)):y&&(f.isHostOn(Z)||f.isLoopedHostOn(Z))&&(y=!1);if(j)for(O=0;O<j.size();O++)Z=j.get(O),Pc(Z,f)?(j.removeAt(O),O--,g.remove(Z)):y&&Pc(f,Z)&&(y=!1);y&&(g.add(f),(f._host||f._69O)&&(i||(i=new rn),i.add(f)),($e(f)||$e(f._parent))&&(j||(j=new rn),j.add(f)))}else if(ns(f)&&f.s(Dp)===Sq){var m=f.s(lp);m&&!m.isEmpty()&&(m.each(function(s){E?(s.x+=b,s.y+=H):(s.x+=b,s.y+=_,s.e==U?s.e=H:s.e+=H)}),f.fp(lp,!1,!0))}}),g.each(function(d){E?d.translate(b,H):d.translate3d(b,H,_)})}},Fq={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},eg=function(){var R={1:function(e,N){return{x:e.x-N.width/2,y:e.y-N.height/2}},2:function(Z,M){return{x:Z.x+M.width/2,y:Z.y-M.height/2}},3:function(e,Y){return{x:e.x+e.width/2,y:e.y-Y.height/2}},4:function(Q,z){return{x:Q.x+Q.width-z.width/2,y:Q.y-z.height/2}},5:function(K,O){return{x:K.x+K.width+O.width/2,y:K.y-O.height/2}},6:function(y){return{x:y.x,y:y.y}},7:function(L){return{x:L.x+L.width/2,y:L.y}},8:function(f){return{x:f.x+f.width,y:f.y}},9:function(d,s){return{x:d.x-s.width/2,y:d.y+s.height/2}},10:function(Z,o){return{x:Z.x+o.width/2,y:Z.y+o.height/2}},11:function(G,B){return{x:G.x+G.width/2,y:G.y+B.height/2}},12:function(q,s){return{x:q.x-s.width/2+q.width,y:q.y+s.height/2}},13:function(r,E){return{x:r.x+r.width+E.width/2,y:r.y+E.height/2}},14:function(b,N){return{x:b.x-N.width/2,y:b.y+b.height/2}},15:function(F){return{x:F.x,y:F.y+F.height/2}},16:function(O,X){return{x:O.x+X.width/2,y:O.y+O.height/2}},17:function(A){return{x:A.x+A.width/2,y:A.y+A.height/2}},18:function(b,g){return{x:b.x+b.width-g.width/2,y:b.y+b.height/2}},19:function(A){return{x:A.x+A.width,y:A.y+A.height/2}},20:function(b,c){return{x:b.x+b.width+c.width/2,y:b.y+b.height/2}},21:function(N,A){return{x:N.x-A.width/2,y:N.y+N.height-A.height/2}},22:function(A,T){return{x:A.x+T.width/2,y:A.y+A.height-T.height/2}},23:function(R,Z){return{x:R.x+R.width/2,y:R.y+R.height-Z.height/2}},24:function(A,L){return{x:A.x+A.width-L.width/2,y:A.y+A.height-L.height/2}},25:function(V,n){return{x:V.x+V.width+n.width/2,y:V.y+V.height-n.height/2}},26:function(h){return{x:h.x,y:h.y+h.height}},27:function(S){return{x:S.x+S.width/2,y:S.y+S.height}},28:function(l){return{x:l.x+l.width,y:l.y+l.height}},29:function(s,Y){return{x:s.x-Y.width/2,y:s.y+s.height+Y.height/2}},30:function(V,O){return{x:V.x+O.width/2,y:V.y+V.height+O.height/2}},31:function(C,r){return{x:C.x+C.width/2,y:C.y+C.height+r.height/2}},32:function(H,I){return{x:H.x+H.width-I.width/2,y:H.y+H.height+I.height/2}},33:function(f,h){return{x:f.x+f.width+h.width/2,y:f.y+f.height+h.height/2}},34:function(k,$){return{x:k.x,y:k.y-$.height/2}},35:function(Z,Q){return{x:Z.x+Z.width,y:Z.y-Q.height/2}},36:function(u,O){return{x:u.x,y:u.y+u.height+O.height/2}},37:function(Z,h){return{x:Z.x+Z.width,y:Z.y+Z.height+h.height/2}},38:function(b,l){return{x:b.x+b.width/4,y:b.y-l.height/2}},39:function(Z,P){return{x:Z.x+3*Z.width/4,y:Z.y-P.height/2}},40:function(e){return{x:e.x+e.width/4,y:e.y}},41:function(x){return{x:x.x+3*x.width/4,y:x.y}},42:function(S,j){return{x:S.x+S.width/4,y:S.y+j.height/2}},43:function(C,P){return{x:C.x+3*C.width/4,y:C.y+P.height/2}},44:function(g,N){return{x:g.x+g.width/2,y:g.y+g.height/2-N.height/2}},45:function(y){return{x:y.x+y.width/4,y:y.y+y.height/2}},46:function(M,X){return{x:M.x+M.width/2-X.width/2,y:M.y+M.height/2}},47:function(B,H){return{x:B.x+B.width/2+H.width/2,y:B.y+B.height/2}},48:function(Q){return{x:Q.x+3*Q.width/4,y:Q.y+Q.height/2}},49:function(a,t){return{x:a.x+a.width/2,y:a.y+a.height/2+t.height/2}},50:function(L,y){return{x:L.x+L.width/4,y:L.y+L.height-y.height/2}},51:function(d,R){return{x:d.x+3*d.width/4,y:d.y+d.height-R.height/2}},52:function(N){return{x:N.x+N.width/4,y:N.y+N.height}},53:function(w){return{x:w.x+3*w.width/4,y:w.y+w.height}},54:function(s,Z){return{x:s.x+s.width/4,y:s.y+s.height+Z.height/2}},55:function(c,z){return{x:c.x+3*c.width/4,y:c.y+c.height+z.height/2}}};return zd(V)?function(P,O,k){return R[P](O,k?k:fl)}:void 0}();pr(j,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);
var hn=j.reverse,Wr=j.transparent,hf=j.rectSelectBackground,Ik=j.dash,ip=j.titleBackground,Rh=j.titleIconBackground,gb=j.headerBackground,me=j.headerIconBackground,Oh=j.headerSeparator,qs=j.headerLine,Ac=j.contentIconBackground,gl=j.contentLine,se=(j.widgetIconHighlight,j.widgetIconBorder),Ec=(j.widgetIconGradient,j.imageBackground),$g=j.imageGradient,_d=j.highlight,Hm=j.label,Ld=j.labelSelect;if(u&&!V.noAlert){var vm=new Date,bj=u.split("-"),Gk=new Date(vm.getFullYear(),vm.getMonth(),vm.getDate()),u=new Date(D(bj[0],10),D(bj[1],10)-1,D(bj[2],10)),Em=Gk.getTime(),Yj=u.getTime(),wj=$+"_try",Qk=V.localStorage,Qp=V.alert;if(Qk&&Qp)if(Yj>Em&&6048e5>Yj-Em){var ff=(Yj-Em)/864e5;Qk&&Qk[wj]!=ff&&(Qk[wj]=ff,Qp("HT for Web free trail license will expire in "+ff+" days, please apply for a new license!"))}else Em>=Yj&&Qp("HT for Web free trail license expired!"),Qk&&delete Qk[wj]}var Cj={ms_ac:function(C,d){for(var M=d.ms_ac,S=0;S<M.length;S++)mh(C,M[S])},ms_listener:function(M){M.addListeners=function(){for(var X=this,e=0;e<kh.length;e++)X["handle_"+kh[e]]&&mo(kh[e],X.getView(),X)},M.removeListeners=function(){for(var r=this,x=0;x<kh.length;x++)r["handle_"+kh[x]]&&um(kh[x],r.getView(),r)}},ms_fire:function(s){s.mp=function(k,G,o){this.addPropertyChangeListener(k,G,o)},s.ump=function(d,b){this.removePropertyChangeListener(d,b)},s.fp=function(O,r,S){return this.firePropertyChange(O,r,S)},s.addPropertyChangeListener=function(t,A,D){var m=this;m._62I||(m._62I=new _p),m._62I.add(t,A,D)},s.removePropertyChangeListener=function(Q,i){this._62I.remove(Q,i)},s.firePropertyChange=function(o,R,Q){if(R===Q)return!1;var F=this,N={property:o,oldValue:R,newValue:Q,data:F};return F._62I&&F._62I.fire(N),F.onPropertyChanged&&F.onPropertyChanged(N),!0}},ms_attr:function(u){u.a=function(i,x){var H=this;if(2===arguments.length)H.setAttr(i,x);else{if(!ks(i))return H.getAttr(i);for(var n in i)H.setAttr(n,i[n])}return H},u.getAttr=function(_){return this._attrObject?this._attrObject[_]:H},u.setAttr=function(a,z){var G=this;G._attrObject||(G._attrObject={});var l=G._attrObject[a];z===H?delete G._attrObject[a]:G._attrObject[a]=z,G.fp&&G.fp("a:"+a,l,z)&&G.onAttrChanged&&G.onAttrChanged(a,l,z)},u.getSerializableAttrs=function(){var U,e={};for(U in this._attrObject)e[U]=1;return e}},ms_bnb:function(K){K.getBodyColor=function(C){return C.s("body.color")},K.getBorderColor=function(M){return M.s("border.color")}},_51o:function(C){C.mi=function(p,S,N){this.addInteractorListener(p,S,N)},C.umi=function(A,e){this.removeInteractorListener(A,e)},C.fi=function(H){this.fireInteractorEvent(H)},C.addInteractorListener=function(c,G,S){var u=this;u._63I||(u._63I=new _p),u._63I.add(c,G,S)},C.removeInteractorListener=function(O,Z){this._63I.remove(O,Z)},C.fireInteractorEvent=function(A){this._63I&&this._63I.fire(A)},C.setInteractors=function(T){var p=this,b=p._interactors;b&&b.each(function(z){z.tearDown()}),bf(T)&&(T=new rn(T)),p._interactors=T,T&&T.each(function(X){X.setUp()}),p.fp("interactors",b,T),p.invalidateSelection()},C.getInteractors=function(){return this._interactors}},_49o:function(N){N._44O=U,N._45O=U,N.addTopPainter=function(L){var n=this;n._44O||(n._44O=new rn),n._44O.contains(L)||(n._44O.add(L),n.redraw&&n.redraw())},N.removeTopPainter=function(e){var z=this;z._44O&&(z._44O.remove(e),z.redraw&&z.redraw())},N.addBottomPainter=function(N){var m=this;m._45O||(m._45O=new rn),m._45O.contains(N)||(m._45O.add(N),m.redraw&&m.redraw())},N.removeBottomPainter=function(s){var _=this;_._45O&&(_._45O.remove(s),_.redraw&&_.redraw())},N._93db=function(M,s){var l=this;l._45O&&l._45O.each(function(G){G.draw?G.draw(M,s):G.call(l,M,s)})},N._92db=function(R,r){var W=this;W._44O&&W._44O.each(function(c){c.draw?c.draw(R,r):c.call(W,R,r)})}},ms_sm:function(x){x.sm=function(){return this.getSelectionModel()},x.setSelectableFunc=function(x){this.sm().setFilterFunc(x)},x.getSelectableFunc=function(){return this.sm().getFilterFunc()},x.getSelectionModel=function(){var I=this;return I._3o?I._3o:I.dm().sm()},x.isSelectionModelShared=function(){return!this._3o},x.setSelectionModelShared=function(o){var m=this,n=!m._3o,I=m._16o,s=m.dm();n!==o&&(m.invalidateSelection&&m.invalidateSelection(),o?(s.sm().ms(I,m),m._3o.ums(I,m),m._3o.dispose(),m._3o=U):(s.sm().ums(I,m),m._3o=new yg(s),m._3o.ms(I,m)),m.onSelectionModelSharedChanged(),m.fp("selectionModelShared",n,o))},x.onSelectionModelSharedChanged=function(){var _=this;_.redraw(),_.invalidateSelection&&_.invalidateSelection()},x.removeSelection=function(){var e=this.dm(),W=e.getHistoryManager();W&&W.beginInteraction(),this.sm().toSelection().each(e.remove,e),W&&W.endInteraction()},x.selectAll=function(){var O=this;O.sm().ss(O.dm().toDatas(O.isVisible,O))},x.isSelected=function(C){return this.sm().co(C)},x.isSelectedById=function(d){var f=this.dm().getDataById(d);return f?this.isSelected(f):!1},x.isSelectable=function(S){return this.sm().isSelectable(S)}},ms_tx:function(c){c._64I=0,c._65O=0,c.isScrollable=function(){return this.getWidth()<this._64I},c._40o=function(){return this.isScrollable()},c.getLogicalPoint=function(u){return Ah(u,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},c.tx=function(B){return B===H?this.getTranslateX():(this.setTranslateX(B),void 0)},c.getTranslateX=function(){return this._65O},c.setTranslateX=function(X){var p=this,h=p.getWidth()-p._64I;h>X&&(X=h),X>0&&(X=0),X=M(X);var R=p._65O;p._65O=X,p.fp(bl,R,X)}},ms_ty:function(s){s._23Q=0,s._66O=0,s._41o=function(){return this.getHeight()<this._23Q},s.getLogicalPoint=function(e){return Ah(e,this._canvas||this._view,this.tx?this.tx():0,this.ty())},s.ty=function(R){return R===H?this.getTranslateY():(this.setTranslateY(R),void 0)},s.getTranslateY=function(){return this._66O},s.setTranslateY=function(K){var j=this,Z=j.getHeight()-j._23Q;Z>K&&(K=Z),K>0&&(K=0),K=M(K);var m=j._66O;j._66O=K,j.fp(Yc,m,K)}},ms_txy:function(z){z._65O=0,z._66O=0,z.tx=function(J){return J===H?this.getTranslateX():(this.setTranslateX(J),void 0)},z.ty=function(u){return u===H?this.getTranslateY():(this.setTranslateY(u),void 0)},z.onTranslateEnded=function(){},z.setTranslate=function(s,F,A){var W=this;if(A=Pg(A)){W._65I&&W._65I.stop(!0);var a=W.tx(),h=W.ty();A.action=function(Z){W.setTranslate(a+(s-a)*Z,h+(F-h)*Z)},A._37o=function(){delete W._66I,delete W._65I,W.onTranslateEnded()},W._66I=1,W._65I=Lc(A)}else W.tx(s),W.ty(F)},z.getTranslateX=function(){return this._65O},z.setTranslateX=function(K){var z=this;K=z.adjustTranslateX(K);var F=z._65O;z._65O=K,z.fp(bl,F,K)},z.getTranslateY=function(){return this._66O},z.setTranslateY=function(J){var K=this;J=K.adjustTranslateY(J);var _=K._66O;K._66O=J,K.fp(Yc,_,J)},z.adjustTranslateX=function(f){return M(f)},z.adjustTranslateY=function(u){return M(u)},z.translate=function(N,p,v){this.setTranslate(this.tx()+N,this.ty()+p,v)},z.getLogicalPoint=function(D){var X=this;return Ah(D,this._canvas||X._view,X.tx(),X.ty())}},ms_dm:function(S){S.dm=function(K){return K?(this.setDataModel(K),void 0):this.getDataModel()},S.getDataModel=function(){return this._dataModel}},ms_lp:function(E){E.lp=function(b){return this.getLogicalPoint(b)}},ms_v:function(n){n._disabled=!1,n.setDisabled=function(e,S){var h=this,g=h._disabled;g!==e&&(g&&(xc(h._63O),delete h._63O),e&&(sk(h._view,h._63O=hc(S)),h.iv()),h._disabled=e,h.fp("disabled",g,e))},n.isDisabled=function(){return this._disabled},n.getView=function(){return this._view},n.addToDOM=function(){var m=this,u=m.getView(),i=u.style;I.body.appendChild(u),i.left="0",i.right="0",i.top="0",i.bottom="0",V.addEventListener("resize",function(){m.iv()},!1)},n.getWidth=function(){return this._view.clientWidth},n.getHeight=function(){return this._view.clientHeight},n.setWidth=function(f){var J=this;J._view.style.width=f+kp,J.iv(),J.fp&&J.fp(zl,U,f)},n.setHeight=function(v){var F=this;F._view.style.height=v+kp,F.iv(),F.fp&&F.fp(Cn,U,v)},n.setFocus=function(f){var w=this,u=w._currentEditor;return f&&u&&(u.getView&&(u=u.getView()),u.contains(f.target))?!1:(nk(w._view),w.endEditing&&w.endEditing(),w._41O("focus"),!0)},n.iv=function(O){this.invalidate(O)},n.invalidate=function(n){var W=this;W._68I||(W._68I=1,Fp(W.validate,W,U,n),W.onInvalidated&&W.onInvalidated(),W._41O("invalidate"))},n.validate=function(){var b=this,W=b._view;if(b._68I&&(delete b._68I,W.parentNode))if(0===W.offsetWidth&&0===W.offsetHeight&&b._67I!==U)b._67I===H&&(b._67I=C.reinvalidateCount),b._67I>0?b._67I--:b._67I=U,b.iv();else{b._41O("beginValidate"),b.validateImpl(),b.onValidated&&b.onValidated(),b._41O("validate");var p=b._63O;p&&(W.lastChild!==p&&(xc(p),sk(W,p)),bb(p,0,0,b.getWidth(),b.getHeight())),Gg(b)}},n.layout=function(q,h,I,E){1===arguments.length?bb(this,q):bb(this,q,h,I,E)},n.addViewListener=function(n,H,X){var u=this;u._67O||(u._67O=new _p),u._67O.add(n,H,X)},n.removeViewListener=function(u,t){this._67O.remove(u,t)},n._41O=function(Y){var i=this;i._67O&&(re(Y)&&(Y={kind:Y}),i._67O.fire(Y)),C.viewListener&&C.viewListener(i,Y)}},ms_tip:function(L){L.enableToolTip=function(){var l=this;K||l._13o||(l._13o=function(B){var O=l.getToolTip(B);O!=U?C.toolTipContinual&&C.isToolTipShowing()?nm(B,O):(jp(),Jf={timeout:T(lb,cg),e:B,info:O}):jp()},l.getView().addEventListener(jm,l._13o,!1))},L.disableToolTip=function(){var E=this;E._13o&&(E.getView().removeEventListener(jm,E._13o,!1),delete E._13o)},L.getToolTip=function(y){var m=this;if(m.getDataAt){var d=m.getDataAt(y);return d?d.getToolTip():U}return m.getValue?Hr(m.getValue()):void 0}},_52o:function(l){l._zoom=1,l._29I=fl,l.zoomIn=function(b,e){this.setZoom(this._zoom*Nm,b,e)},l.zoomOut=function(l,B){this.setZoom(this._zoom/Nm,l,B)},l.zoomReset=function(P,_){this.setZoom(1,P,_)},l.scrollZoomIn=function(p){this.setZoom(this._zoom*he,U,p)},l.scrollZoomOut=function(y){this.setZoom(this._zoom/he,U,y)},l.pinchZoomIn=function(m){this.setZoom(this._zoom*on,U,m)},l.pinchZoomOut=function(t){this.setZoom(this._zoom/on,U,t)},l.adjustZoom=function(j){return Cf>j?Cf:j>fq?fq:j},l.getZoom=function(){return this._zoom},l.setZoom=function(U,y,F){var b=this;if(y=Pg(y)){b._14o&&b._14o.stop(!0);var s=b._zoom;y.action=function(v){b._96O(s+(U-s)*v,F)},y._37o=function(){delete b._zooming,delete b._14o,b.onZoomEnded()},b._zooming=1,b._14o=Lc(y)}else b._96O(U,F)},l._96O=function(l,p){var A=this;if(l=A.adjustZoom(l),l!==A._zoom){A.validate();var B=A._29I,f=A._zoom;0!==B.width&&0!==B.height&&(p=p?p:{x:B.x+B.width/2,y:B.y+B.height/2},A.tx((p.x-B.x)*f-p.x*l),A.ty((p.y-B.y)*f-p.y*l)),A._zoom=l,A.fp("zoom",f,l)}}}};pr(C,{baseZIndex:H,isTouchable:K,devicePixelRatio:V.devicePixelRatio?V.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:j.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(c){return c*c},labelColor:Hm,labelSelectColor:Ld,labelFont:(K?"15":"12")+"px arial, sans-serif",widgetIndent:K?30:20,widgetRowHeight:K?30:20,widgetHeaderHeight:K?32:22,widgetTitleHeight:K?34:24,scrollBarColor:Wr,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:K?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"5.1"},setCompType:function(j,q){Cb[j]=q},getCompType:function(N){return Cb[N]},numberListener:function(){var m={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(J){var B=J.keyCode;m[B]||65===B&&C.isCtrlDown(J)||B>=35&&39>=B||(J.shiftKey||48>B||B>57)&&(96>B||B>105)&&J.preventDefault()}}(),preventDefault:function(N){var $=N.target.tagName;("DIV"===$||"CANVAS"===$)&&(N.preventDefault(),N.preventManipulation&&N.preventManipulation())},getWindowInfo:function(){var X=I.documentElement,J=X&&(X.scrollLeft||X.scrollTop)?X:I.body;return{target:J,left:J.scrollLeft,top:J.scrollTop,width:V.innerWidth||J.clientWidth,height:V.innerHeight||J.clientHeight}},isDragging:function(){return!!bs},isLeftButton:function(k){return K?!0:0===k.button},getTouchCount:function(g){return K?g.touches.length:1},isDoubleClick:function(){var l=new Date,g=U,y=new Date,R=U;return function(e){if(dh=new Date,Xh=dh.getTime(),K){var T=e.type,q=T+"_isDoubleClick";if(e[q]===H){var k=yf(e);"touchstart"===T?(e[q]=g&&Qh(g,k)<20&&Xh-l.getTime()<500,l=dh,g=k):(e[q]=R&&Qh(R,k)<20&&Xh-y.getTime()<500,y=dh,R=k)}return e[q]}return 2===e.detail}}(),isShiftDown:function(c){return c?c.shiftKey:Mq["16"]},isCtrlDown:function(E){return E?t?E.metaKey:E.ctrlKey:t?Mq["91"]:Mq["17"]},getClientPoint:function(X){return K&&(X=zk(X)),{x:X.clientX,y:X.clientY}},getPagePoint:function(S){return K&&(S=zk(S)),{x:S.pageX,y:S.pageY}},createObject:function(m,h){var k=new m;for(var W in h){var R=So(W),E=h[W];k[R]?(k[R](E),"setToolTip"===R&&k.enableToolTip&&k.enableToolTip()):k[W]=E}return k},setImage:function(R,z,d,t){var o=arguments.length;4===o?Qi(R,t,z,d):2===o?re(z)?Qi(R,z):js[R]=z:1===o&&Qi(R,R)},getImage:function(n,P){var W;if(n==U)return U;if(ks(n)?W=n:(W=js[n],n&&W===H&&(Cs&&Cs[n]||Qi(n,n))),P&&W&&W.tagName){W.colors||(W.colors={});var $=W.colors[P];return $||($=Nr(W,$m(P),W.width,W.height),W.colors[P]=$),$}return W},getId:function(){var h=1;return function(){return++h}}(),callLater:function(x,z,B,M){var c=function(){x.apply(z,B)};return M?T(c,M):V.requestAnimationFrame(c)},clone:function(o){if(!o)return U;if(bf(o))return o.slice(0);if(ks(o)){var r,e={};for(r in o)e[r]=o[r];return e}return o},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(Z,M){if(Z===M)return 0;if(Z==U&&M!=U)return 1;if(Z!=U&&M==U)return-1;if(Z==U&&M==U)return 0;var e,Y=typeof Z,s=typeof M;return Y===Ae&&s===Ae?e=Z.localeCompare(M):Y===kj&&s===kj&&(e=Z-M),e===H&&(e=(""+Z).localeCompare(""+M)),e>0?1:0>e?-1:0},getClassMap:function(){return Ob},getClass:function(a){if(re(a)){var w,n=Ob[a];if(!n){w=a.split("."),n=V;for(var v=0;v<w.length;v++)n=n[w[v]];Ob[a]=n}return n}return a},def:function(w,Y,x){var W,E,o,N=function(){};if(N.prototype=Y.prototype,W=new N,re(w)){if(Ob[w])throw"'"+w+"' alreay defined";o=xl(w),W.getClassName=function(){return w}}else o=w;if(W.constructor=o,W.getClass=function(){return o},W.getSuperClass=function(){return Y},x)for(E in x)Cj[E]&&Cj.hasOwnProperty(E)?Cj[E](W,x):W[E]=x[E];o.prototype=W,o.superClass=Y.prototype},startAnim:function(){var G=function($){$.duration&&($.startTime=vk()),$.timeId=Fp($.tick,U,U,$.interval)};return function(h){return h=Ji(h),h.easing=h.easing||C.animEasing,h.duration||h.frames||(h.duration=C.animDuration),h.t=0,h.duration?h.interval=0:(h.frame=0,h.interval=h.interval||10),h.tick=function(){if(h.duration){var r=(vk()-h.startTime)/h.duration;r>1&&(r=1),h.t=r,h.action(h.easing(r),r),1===r?h.stop():h._isPaused||(h.timeId=Fp(h.tick))}else h.frame++,r=h.t=h.frame/h.frames,h.action(h.easing(r),r),h.frame<h.frames?h._isPaused||(h.timeId=Fp(h.tick,U,U,h.interval)):h.stop()},h.resume=function(){h._isPaused&&(delete h._isPaused,h.duration?h.t<1&&(h.startTime=vk()-h.duration*h.t,h.timeId=Fp(h.tick)):h.frame<h.frames&&(h.timeId=Fp(h.tick,U,U,h.interval)))},h.pause=function(){h._isPaused=!0},h.stop=function(F){h.isRunning()&&(h.duration?h.t<1&&F&&(h.t=1,h.action(h.easing(1))):h.frame<h.frames&&F&&(h.frame=h.frames,h.action(h.easing(1))),h._37o&&h._37o(),h.finishFunc&&h.finishFunc(),bk(h.timeId,!h.duration),delete h.timeId)},h.isRunning=function(){return h.timeId!=U},h.delay?Fp(G,U,[h],h.delay):G(h),h}}(),getTextSize:function(){var s={},S=I?Kh().getContext("2d"):U;return function($,Z){S.font=$?$:fc;var N=s[S.font];return N||(N=2*S.measureText("e").width+4,s[S.font]=N),{width:S.measureText(Z).width+4,height:N}}}(),drawText:function(A,L,W,H,N,X,v,q,e,C){if(L!=U){var j=sm(W,L),B={};B.y=C&&C!==uj?C===ei?X+j.height/2:X+q-j.height/2:X+q/2,B.x=e&&e!==nd?e===ib?N+v-j.width/2:N+v/2:N+j.width/2,No(A,L,B,W,H)}},getDistance:function(v,h){var w=v.length;return h?3===w?o(a(v[0]-h[0])+a(v[1]-h[1])+a(v[2]-h[2])):2===w?o(a(v[0]-h[0])+a(v[1]-h[1])):v.z===H?o(a(h.x-v.x)+a(h.y-v.y)):o(a(h.x-v.x)+a(h.y-v.y)+a(h.z-v.z)):3===w?o(a(v[0])+a(v[1])+a(v[2])):2===w?o(a(v[0])+a(v[1])):void 0},brighter:function(s,H){return pk(s,H?H:40)},darker:function(M,v){return pk(M,v?v:-40)},unionPoint:function(k,e){if(!k)return U;if(2===arguments.length)return k&&e?{x:Y(k.x,e.x),y:Y(k.y,e.y),width:g(k.x-e.x),height:g(k.y-e.y)}:U;var L=k;if(L._as&&(L=L._as),L.length===H)return U;var n=L.length;if(0>=n)return U;for(var a=1,B=L[0],V={x:B.x,y:B.y,width:0,height:0};n>a;a++){B=L[a];var P=Y(V.x,B.x),v=W(V.x+V.width,B.x),b=Y(V.y,B.y),T=W(V.y+V.height,B.y);V.x=P,V.y=b,V.width=v-P,V.height=T-b}return V},unionRect:function(N,u){if(N&&!u)return Ji(N);if(!N&&u)return Ji(u);if(N&&u){var S={x:Y(N.x,u.x),y:Y(N.y,u.y)};return S.width=W(N.x+N.width,u.x+u.width)-S.x,S.height=W(N.y+N.height,u.y+u.height)-S.y,S}return U},containsPoint:function(d,o){return!(!d||o.x<d.x||o.y<d.y||o.x>d.x+d.width||o.y>d.y+d.height)},containsRect:function(w,j){if(!w||!j)return!1;var u=j.x,W=j.y,h=j.width,m=j.height,o=w.width,S=w.height;if(0>(o|S|h|m))return!1;var n=w.x,H=w.y;if(n>u||H>W)return!1;if(o+=n,h+=u,u>=h){if(o>=n||h>o)return!1}else if(o>=n&&h>o)return!1;if(S+=H,m+=W,W>=m){if(S>=H||m>S)return!1}else if(S>=H&&m>S)return!1;return!0},intersectsRect:function(R,h){if(!R||!h)return!1;var K=h.width,f=h.height,T=R.width,o=R.height;if(0>=T||0>=o||0>=K||0>=f)return!1;var u=h.x,W=h.y,j=R.x,$=R.y;return T+=j,o+=$,K+=u,f+=W,T>u&&o>W&&K>j&&f>$},intersection:function(D,o){if(!D||!o)return U;var G=o.x,I=o.y,$=D.x,j=D.y,z=G,F=I,l=$,O=j;return z+=o.width,F+=o.height,l+=D.width,O+=D.height,$>G&&(G=$),j>I&&(I=j),z>l&&(z=l),F>O&&(F=O),z-=G,F-=I,0>=z||0>=F?U:{x:G,y:I,width:z,height:F}},grow:function(A,i){A.x-=i,A.y-=i,A.width=A.width+2*i,A.height=A.height+2*i},getLogicalPoint:function(m,x,Y,V,k,g){var X=x.getBoundingClientRect();return m=K?zk(m):m,{x:(m.clientX-X.left+x.scrollLeft-(Y||0))/(k||1),y:(m.clientY-X.top+x.scrollTop-(V||0))/(g||1)}},removeHTML:function(){var S;return function(n){return n&&n.parentNode?S===n?!0:(S=n,n.parentNode.removeChild(n),S=U,!0):!1}}(),getToolTipDiv:function(){if(!hs){hs=xk(),Zj=xk();var b=hs.style;C.baseZIndex!=U&&(b.zIndex=D(C.baseZIndex)+3+""),b.whiteSpace="nowrap",b.color=C.toolTipLabelColor,b.background=C.toolTipBackground,b.font=C.toolTipLabelFont,b.padding="5px",b.boxShadow="0px 0px 3px "+C.toolTipShadowColor}return hs},isToolTipShowing:function(){return hs&&hs.parentNode?!0:Zj&&Zj.parentNode?!0:!1},hideToolTip:function(){xc(hs),xc(Zj),gg()},showToolTip:function(f,o){if(!f||o==U)return jp(),void 0;C.getToolTipDiv();var Y,w;if(o.html?(o=o.html,Y=Zj,xc(hs)):(Y=hs,xc(Zj)),w=Y.style,Y.innerHTML=o,Y.parentNode||sk(I.body,Y),f.target){f=Ck(f);var e=cp(),J=f.x,i=f.y,u=K?60:12;if(K){var E=Y.getBoundingClientRect();w.left=J-E.width/2+kp,w.top=i-E.height-u<e.top?i+u+kp:i-E.height-u+kp}else{w.left=J+u+kp,w.top=i+u+kp;var E=Y.getBoundingClientRect();E.left+E.width>e.width&&(w.left=J-u-E.width+kp),E.top+E.height>e.height&&(w.top=i-u-E.height+kp),E.left<0&&(w.left=J+u+kp),E.top<0&&(w.top=i+u+kp)}}else w.left=f.x+kp,w.top=f.y+kp;gg()},startDragging:function(n,j){n!==bs&&(bs?K?bs.handleWindowTouchEnd(j):bs.handleWindowMouseUp(j):K?(V.addEventListener(Dq,ch,!1),V.addEventListener(Cc,If,!1)):(V.addEventListener(jm,es,!1),V.addEventListener(Ag,dg,!1)),bs=n)},getImageMap:function(){return js},toBoundaries:function(K,G,w,e){var u=[];return qq(K,G,w,e).forEach(function(P){var p=[];P.forEach(function(_){p.push(_.x,_.y)}),u.push(p)}),u},getCurrentKeyCodeMap:function(){return Mq},drawCenterImage:function(h,E,H,J,Z,s,$){var w=Sb(E,Z),d=sd(E,Z);np(h,E,M(H-w/2),M(J-d/2),w,d,Z,s,$)},drawStretchImage:function(H,d,L,v,R,h,J,X,p,D){var t,a=Sb(d,X),V=sd(d,X);"uniform"===L?(t=Y(h/a,J/V),a*=t,V*=t,v+=M((h-a)/2),R+=M((J-V)/2),h=a,J=V):L===ir&&((a>h||V>J)&&(t=Y(h/a,J/V),a*=t,V*=t),v+=M((h-a)/2),R+=M((J-V)/2),h=a,J=V),np(H,d,v,R,h,J,X,p,D)},toCanvas:function(D,l,W,E,Q,b,s){D=Kf(D,s),l=l||Sb(D,Q),W=W||sd(D,Q);var c=Kh();kr(c,l,W,1);var K=os(c);return Wc(K,D,E,0,0,l,W,Q,b,s),K.restore(),c},createElement:function(c,m,e,O){var R=I.createElement(c);return qj(R,m||j.widgetBorder,2),R.style.font=e?e:fc,O!=U&&(R.value=O),R},containedInView:function(Q,_){var c=ge(_).getBoundingClientRect();return Xp({x:c.left,y:c.top,width:c.width,height:c.height},yf(Q))},isIsolating:function(){return Id},setIsolating:function(h){Id=h},toColorData:lm},!0),pr(k,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var Ke=C.disabledOpacity,cg=C.toolTipDelay,Yr=C.devicePixelRatio,sg=C.autoMakeVisible,ts=C.autoHideScrollBar,Jk=C.imageGradient,nm=C.showToolTip,jp=C.hideToolTip,fk=C.dashPattern,Eo=C.lineCap,rj=C.lineJoin,fj=C.labelColor,Hc=C.labelSelectColor,fc=C.labelFont,Go=C.widgetIndent,Lf=C.widgetRowHeight,Xi=C.widgetHeaderHeight,Jd=C.widgetTitleHeight,Ai=C.scrollBarColor,Tj=C.scrollBarSize,Oe=C.scrollBarTimeout,Wk=C.scrollBarMinLength,Ib=C.scrollBarInteractiveSize,Nm=C.zoomIncrement,he=C.scrollZoomIncrement,on=C.pinchZoomIncrement,fq=C.zoomMax,Cf=C.zoomMin,He=C.createObject,cj=C.preventDefault,Si=C.setImage,Kf=C.getImage,mm=C.drawCenterImage,Wc=C.drawStretchImage,Gn=C.getId,Fp=C.callLater,ki=C.sortFunc,Ji=C.clone,xl=C.getClass,Lc=C.startAnim,_l=C.brighter,Yl=C.darker,vs=C.drawText,sm=C.getTextSize,cf=C.isLeftButton,Nn=C.getTouchCount,Bm=C.isDoubleClick,ng=C.isShiftDown,Op=C.isCtrlDown,yf=C.getClientPoint,Ck=C.getPagePoint,Qh=C.getDistance,xd=C.unionPoint,Pl=C.unionRect,Xp=C.containsPoint,Nk=C.containsRect,Sj=C.intersectsRect,Ir=C.intersection,cp=C.getWindowInfo,xg=C.grow,Ah=C.getLogicalPoint,ds=C.startDragging,xc=C.removeHTML,qr=C.createElement,te=C.segmentResolution,jk=C.shapeResolution,yq=C.shapeSide,ld=C.def,Oo=function(X,q,U){ld($+"."+X,q,U)},Un=function(N,J){N.childNodes.forEach(function(v){J(v),Un(v,J)})};pr(C,{toolTipLabelColor:fj,toolTipLabelFont:fc,toolTipBackground:j.toolTipBackground,toolTipShadowColor:Wr,setDevicePixelRatio:function(G){Yr=C.devicePixelRatio=G||V.devicePixelRatio,Un(I.body,function(H){var k=H._ht;k&&k._canvas&&(kr(k._canvas,k.getWidth(),k.getHeight()),k.redraw?k.redraw():k.iv())})}},!0);var rg=1e-6,Fi="undefined"!=typeof Uint16Array?Uint16Array:Array,sp="undefined"!=typeof Float32Array?Float32Array:Array,kd=function(A,Z,L){var o=[A[0]-Z[0],A[1]-Z[1],A[2]-Z[2]];if(L){var B=Qh(o);B>0&&(o[0]/=B,o[1]/=B,o[2]/=B)}return o},Zm=function(t){return[-t[0],-t[1],-t[2]]},$p=function(G,l){return 3===G.length?G[0]*l[0]+G[1]*l[1]+G[2]*l[2]:G[0]*l[0]+G[1]*l[1]},pn=function(){var r=new sp(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},Rp=pn(),as=function(v){var m=new sp(16);return m[0]=v[0],m[1]=v[1],m[2]=v[2],m[3]=v[3],m[4]=v[4],m[5]=v[5],m[6]=v[6],m[7]=v[7],m[8]=v[8],m[9]=v[9],m[10]=v[10],m[11]=v[11],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15],m},Ei=function(M,K){return M[0]=K[0],M[1]=K[1],M[2]=K[2],M[3]=K[3],M[4]=K[4],M[5]=K[5],M[6]=K[6],M[7]=K[7],M[8]=K[8],M[9]=K[9],M[10]=K[10],M[11]=K[11],M[12]=K[12],M[13]=K[13],M[14]=K[14],M[15]=K[15],M},Il=function(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U},bi=function(X,a){var k=X[0],E=X[1],A=X[2];return X[0]=a[0]*k+a[4]*E+a[8]*A+a[12],X[1]=a[1]*k+a[5]*E+a[9]*A+a[13],X[2]=a[2]*k+a[6]*E+a[10]*A+a[14],X},qf=function(q,u){var r=q[0],T=q[1],p=q[2],i=q[3];return q[0]=u[0]*r+u[4]*T+u[8]*p+u[12]*i,q[1]=u[1]*r+u[5]*T+u[9]*p+u[13]*i,q[2]=u[2]*r+u[6]*T+u[10]*p+u[14]*i,q[3]=u[3]*r+u[7]*T+u[11]*p+u[15]*i,q},Sp=function(){var J,f,E,k,h=Fb(Bf[1]+Bf[7]),W=Fb(Bf[0]+Bf[3]-Bf[10]),q=Fb(Bf[8]+2),B=function(){return f=E.charAt(J),J+=1,f},p=function(){var c="";if(f===q)for(;B();){if(f===q)return B(),c;c+=f}else B()},a=function(){for(;f&&" ">=f;)B()},A=function(){var D,c={};if(f===h){if(B(),a(),f===W)return B(),c;for(;f;){if(D=p(),a(),B(),c[D]=k(),a(),f===W)return B(),c;B(),a()}}};return k=function(){switch(a(),f){case h:return A();default:return p()}},function(z){if(x={},z){var X;if(E=z,J=0,f=" ",X=k(),a(),!f)return X}}}(),zg=function(U,l){if(l){var t=h(l),g=r(l),e=U[4],j=U[5],f=U[6],k=U[7],V=U[8],d=U[9],E=U[10],G=U[11];U[4]=e*g+V*t,U[5]=j*g+d*t,U[6]=f*g+E*t,U[7]=k*g+G*t,U[8]=V*g-e*t,U[9]=d*g-j*t,U[10]=E*g-f*t,U[11]=G*g-k*t}},hb=function(g,N){if(N){var W=h(N),a=r(N),U=g[0],Q=g[1],O=g[2],$=g[3],R=g[8],C=g[9],V=g[10],Z=g[11];g[0]=U*a-R*W,g[1]=Q*a-C*W,g[2]=O*a-V*W,g[3]=$*a-Z*W,g[8]=U*W+R*a,g[9]=Q*W+C*a,g[10]=O*W+V*a,g[11]=$*W+Z*a}},Pd=function(d,v){if(v){var P=h(v),D=r(v),$=d[0],l=d[1],Y=d[2],o=d[3],b=d[4],C=d[5],g=d[6],a=d[7];d[0]=$*D+b*P,d[1]=l*D+C*P,d[2]=Y*D+g*P,d[3]=o*D+a*P,d[4]=b*D-$*P,d[5]=C*D-l*P,d[6]=g*D-Y*P,d[7]=a*D-o*P}},As=function(Z,K,u){return oj(U,u===!1?U:Z.s3(),Z.r3(),Z.getRotationMode(),Z.p3(),U,K)},oj=function($,C,h,v,Z,f,r){return f||(f=pn()),Z&&nr(f,Z),qd(f,h,v),r&&kl(f,f,r),C&&Kk(f,C),$&&kl(f,f,$),f},cq=function(w,f,c){f=D(f),c=D(c);var a=this;a.g=w,a._84O=f,a._85O=c,a._70I=!0,a.F=0,a._83O=f+c,a.pen={x:0,y:0}},od="lineDashOffset",lh="setLineDash",wl=function(G){for(var Z in G)1===Z.length&&(od=G[Z]);return Z?1:0},mb=function(N,S,i){return ci(S)?N:N[lh]?(N[lh](S),i&&(N.lineDashOffset=i),N):new cq(N,S[0],S.length>1?S[1]:S[0])},le=function(x,F){!ci(F)&&x[lh]&&(x[lh](Df),x.lineDashOffset=0)};if(ld(cq,O,{_69I:6,moveTo:function(n,P){var w=this,Z=w.pen;Z.x=n,Z.y=P,w.g.moveTo(n,P),w.start||(w.start={x:n,y:P})},lineTo:function(L,F){var C=this,o=C.pen,s=L-o.x,$=F-o.y,w=v($,s),q=r(w),P=h(w),B=C._23O(o.x,o.y,L,F),z=C._85O,Y=C._84O,k=C._83O;if(C.F){if(C.F>B)return C._70I?C._72I(L,F):C.moveTo(L,F),C.F-=B,void 0;if(C._70I?C._72I(o.x+q*C.F,o.y+P*C.F):C.moveTo(o.x+q*C.F,o.y+P*C.F),B-=C.F,C.F=0,C._70I=!C._70I,!B)return}var e=Z(B/k);if(e){for(var Q=q*Y,I=P*Y,J=q*z,K=P*z,p=0;e>p;p++)C._70I?(C._72I(o.x+Q,o.y+I),C.moveTo(o.x+J,o.y+K)):(C.moveTo(o.x+J,o.y+K),C._72I(o.x+Q,o.y+I));B-=k*e}C._70I?B>Y?(C._72I(o.x+q*Y,o.y+P*Y),C.moveTo(L,F),C.F=z-(B-Y),C._70I=!1):(C._72I(L,F),B===Y?(C.F=0,C._70I=!C._70I):(C.F=Y-B,C.moveTo(L,F))):B>z?(C.moveTo(o.x+q*z,o.y+P*z),C._72I(L,F),C.F=Y-(B-z),C._70I=!0):(C.moveTo(L,F),B===z?(C.F=0,C._70I=!C._70I):C.F=z-B)},quadraticCurveTo:function(E,u,G,s){var J,U=this,t=U.pen,b=t.x,l=t.y,p=U._22O(b,l,E,u,G,s),W=0,N=0,i=U._85O,m=U._84O;if(U.F){if(U.F>p)return U._70I?U._71I(E,u,G,s):U.moveTo(G,s),U.F-=p,void 0;if(W=U.F/p,J=U._20O(b,l,E,u,G,s,W),U._70I?U._71I(J[2],J[3],J[4],J[5]):U.moveTo(J[4],J[5]),U.F=0,U._70I=!U._70I,!p)return}var K=p-p*W,V=Z(K/U._83O),y=m/p,j=i/p;if(V)for(var f=0;V>f;f++)U._70I?(N=W+y,J=U._21O(b,l,E,u,G,s,W,N),U._71I(J[2],J[3],J[4],J[5]),W=N,N=W+j,J=U._21O(b,l,E,u,G,s,W,N),U.moveTo(J[4],J[5])):(N=W+j,J=U._21O(b,l,E,u,G,s,W,N),U.moveTo(J[4],J[5]),W=N,N=W+y,J=U._21O(b,l,E,u,G,s,W,N),U._71I(J[2],J[3],J[4],J[5])),W=N;K=p-p*W,U._70I?K>m?(N=W+y,J=U._21O(b,l,E,u,G,s,W,N),U._71I(J[2],J[3],J[4],J[5]),U.moveTo(G,s),U.F=i-(K-m),U._70I=!1):(J=U._19O(b,l,E,u,G,s,W),U._71I(J[2],J[3],J[4],J[5]),p===m?(U.F=0,U._70I=!U._70I):(U.F=m-K,U.moveTo(G,s))):K>i?(N=W+j,J=U._21O(b,l,E,u,G,s,W,N),U.moveTo(J[4],J[5]),J=U._19O(b,l,E,u,G,s,N),U._71I(J[2],J[3],J[4],J[5]),U.F=m-(K-i),U._70I=!0):(U.moveTo(G,s),K===i?(U.F=0,U._70I=!U._70I):U.F=i-K)},bezierCurveTo:function(){var l=arguments;this.pen={x:l[4],y:l[5]},this.g.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5])},arc:function($,j,R,T,A,X){X||(T=-T,A=-A),aq(this,$,j,T,A-T,R,R,!1)},rect:function(S,y,K,Z){var g=this;g.pen={x:S,y:y},g.moveTo(S,y),g.lineTo(S,y+Z),g.lineTo(S+K,y+Z),g.lineTo(S+K,y),g.lineTo(S,y)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(e,A,a,y){var b=a-e,V=y-A;return o(b*b+V*V)},_22O:function(Q,t,q,$,C,L,D){for(var E,Y,o,y,h,s,J,n=0,e=Q,l=t,c=D>0?D:this._69I,x=1;c>=x;x++)o=x/c,y=1-o,h=y*y,s=2*o*y,J=o*o,E=h*Q+s*q+J*C,Y=h*t+s*$+J*L,n+=this._23O(e,l,E,Y),e=E,l=Y;return n},_21O:function(N,P,K,e,x,G,l,r){var I=this;if(0===l)return I._20O(N,P,K,e,x,G,r);if(1===r)return I._19O(N,P,K,e,x,G,l);var U=I._20O(N,P,K,e,x,G,r);return U.push(l/r),I._19O.apply(I,U)},_20O:function(M,o,e,Y,i,n,K){if(1!==K){var D=e+(i-e)*K,h=Y+(n-Y)*K;e=M+(e-M)*K,Y=o+(Y-o)*K,i=e+(D-e)*K,n=Y+(h-Y)*K}return[M,o,e,Y,i,n]},_19O:function(p,M,J,E,P,V,e){if(1!==e){var j=p+(J-p)*e,d=M+(E-M)*e;J+=(P-J)*e,E+=(V-E)*e,p=j+(J-j)*e,M=d+(E-d)*e}return[p,M,J,E,P,V]},_72I:function(m,k){var r=this.pen;(m!==r.x||k!==r.y)&&(r.x=m,r.y=k,this.g.lineTo(m,k))},_71I:function(c,l,p,m){var C=this.pen;(c!==p||l!==m||p!==C.x||m!==C.y)&&(C.x=p,C.y=m,this.g.quadraticCurveTo(c,l,p,m))}}),R&&E){var vi=E.toString();n=vi.indexOf(Vd.substr(0,2))>0&&vi.indexOf(ei+ei.substr(1,1))>1?!0:!1}var xb=j.chart,ec=C.compStack=[],Eh=/^style@/,vg=/^attr@/,Rq=/^field@/,Sb=function(C,o){return C?un(C.width,o):0},sd=function(O,N){return O?un(O.height,N):0},un=function(N,X,C){if(!N||!N.func)return N;var R,V=N.func,Q=N.value;return R=Jm(V)?V(X,C):X?Eh.test(V)?X.s(V.slice(6)):vg.test(V)?X.a(V.slice(5)):Rq.test(V)?X[V.slice(6)]:X[V]?X[V](C):Q:Q,Q!==H&&R==U?Q:R},np=C.drawImage=function(){var O,H,b,e,G,k=function(u,g,v){var s=u[g];return s&&s.func?(s=un(s,H,b),v&&(s=v(s))):v&&(s=u[g]=v(s)),s},N=function(g,E){var H=k(g,E);if(G&&H){var I=$m(G);return H=lm(H),"rgba("+Z(H[0]*I[0])+","+Z(H[1]*I[1])+","+Z(H[2]*I[2])+","+H[3]+")"}return H},t=function(b){if(bf(b)){for(var V=new rn,o=b.length,f=0;o>f;f+=2)V.add({x:b[f],y:b[f+1]});b=V}return b},S=function(M,J){var L=k(M,Zo);if(bf(L)){var C=L.length,F=k(M,"relative"),v=J.width,N=J.height;if(4===C)L={x:L[0],y:L[1],width:L[2],height:L[3]},F&&(L.x*=v,L.y*=N,L.width*=v,L.height*=N);else if(3===C){var A=L[0];L={width:L[1],height:L[2]},F&&(L.width*=v,L.height*=N),A=eg(A,J,L),L.x=A.x-L.width/2,L.y=A.y-L.height/2}var $=k(M,"offsetX");$&&(L.x+=$),$=k(M,"offsetY"),$&&(L.y+=$)}return L},y=function(n){return bf(n)?new rn(n):n},R=function(p,U){if(p){var n=U.x+U.width/2,E=U.y+U.height/2;O.save(),kk(O,n,E),_f(O,p),kk(O,-n,-E)}},z=function(i){i&&O.restore()},B=function(P,G,B){var u=k(P,"path"),d=k(P,Qr),H=U,D=Tl(null,u);if(B||(B=P.unionRect,B||(B=xd(D),P.path.func||(P.unionRect=B)),H=B),B){H||(H=P.unionRect,H||(H=xd(D),P.path.func||(P.unionRect=H)));var M=ve(H,B);if(M)R(d,H);else{var o=H.width,t=H.height,v=B.width,T=B.height,C=v/o,i=T/t;O.save(),kk(O,B.x+v/2,B.y+T/2),O.scale(C,i),d&&_f(O,d),kk(O,-H.x-o/2,-H.y-t/2)}var L=k(P,"borderPattern"),b=mb(O,L),Z=N(P,"background"),q=N(P,"borderColor"),j=k(P,"borderWidth"),X=k(P,"gradient"),g=N(P,"gradientColor"),w=k(P,"border3d"),y=k(P,"border3dColor"),I=k(P,"border3dAccuracy"),Y=O.lineJoin,$=O.lineCap;if(O.lineJoin=k(P,"borderJoin")||rj,O.lineCap=k(P,"borderCap")||Eo,Z?(mq(O,Z,X,g,H),Tl(O,u),O.fill(),b!==O&&Tl(O,u)):Tl(O,u),j&&q&&(O.lineWidth=j,O.strokeStyle=q,O.stroke(),w&&zb(O,q,y,j,e,I)),le(O,L),k(P,"dash")){var x=k(P,"dashWidth")||j;if(x>0){L=k(P,"dashPattern")||fk;var b=mb(O,L,k(P,"dashOffset")),V=k(P,"dashColor")||Ik;b!==O&&Tl(O,u),O.strokeStyle=V,O.lineWidth=x,O.stroke(),k(P,"dash3d")&&zb(O,V,k(P,"dash3dColor"),x,e,k(P,"dash3dAccuracy")),le(O,L)}}G===Zo&&Ab(O,Z,k(P,"depth"),H),O.lineJoin=Y,O.lineCap=$,M?z(d):O.restore()}},m=function(s,o,v){var I=k(s,Sq,t),J=k(s,Qr),D=o===rb,P=U;if(!v&&D&&(v=s.unionRect,v||(v=xd(I),s.points.func||(s.unionRect=v)),P=v),v){D?P||(P=s.unionRect,P||(P=xd(I),s.points.func||(s.unionRect=P))):P=v;var $=ve(P,v);if($)R(J,P);else{var p=P.width,L=P.height,E=v.width,Y=v.height,C=E/p,_=Y/L;O.save(),kk(O,v.x+E/2,v.y+Y/2),O.scale(C,_),J&&_f(O,J),kk(O,-P.x-p/2,-P.y-L/2)}var r,V,b,K,x=k(s,"borderPattern"),A=mb(O,x),W=N(s,"background"),a=Kf(k(s,"repeatImage"),G),F=N(s,"borderColor"),h=k(s,"borderWidth"),i=k(s,"segments",y),n=k(s,"gradient"),j=N(s,"gradientColor"),u=k(s,"border3d"),M=k(s,"border3dColor"),X=k(s,"border3dAccuracy"),Q=k(s,"closePath"),T=O.lineJoin,B=O.lineCap;if(O.lineJoin=k(s,"borderJoin")||rj,O.lineCap=k(s,"borderCap")||Eo,D?W||a?(a?fm(O,a):mq(O,W,n,j,P),ko(O,I,i,Q),O.fill(),A!==O&&ko(A,I,i,Q)):ko(A,I,i,Q):("roundRect"===o?r=k(s,"cornerRadius"):"polygon"===o?r=k(s,"polygonSide"):"arc"===o&&(r=k(s,"arcFrom"),V=k(s,"arcTo"),b=k(s,"arcClose"),K=k(s,"arcOval")),W||a?(a?fm(O,a):mq(O,W,n,j,P),Db(O,o,P,r,V,b,K),O.fill(),O!==A&&Db(A,o,P,r,V,b,K)):Db(A,o,P,r,V,b,K)),h&&F&&(O.lineWidth=h,O.strokeStyle=F,O.stroke(),u&&zb(O,F,M,h,e,X)),le(O,x),k(s,"dash")){var q=k(s,"dashWidth")||h;
if(q>0){x=k(s,"dashPattern")||fk;var A=mb(O,x,k(s,"dashOffset")),l=k(s,"dashColor")||Ik;A!==O&&(D?ko(A,I,i,Q):Db(A,o,P,r,V,b,K)),O.strokeStyle=l,O.lineWidth=q,O.stroke(),k(s,"dash3d")&&zb(O,l,k(s,"dash3dColor"),q,e,k(s,"dash3dAccuracy")),le(O,x)}}o===Zo&&Ab(O,W,k(s,"depth"),P),O.lineJoin=T,O.lineCap=B,$?z(J):O.restore()}},F=function(B,Q){var c=G,A=G||k(B,Og),s=Kf(k(B,"name"),A);s&&(Wc(O,s,k(B,"stretch"),Q.x,Q.y,Q.width,Q.height,H,b,A),G=c)},J=function(D,A){var d=k(D,"text");d!=U&&vs(O,d,k(D,"font"),N(D,Og),A.x,A.y,A.width,A.height,k(D,"align"),k(D,"vAlign"))},l=function(P,e){zn(O,N(P,Og),e.x,e.y,e.width,e.height,k(P,"width"))},$=function(M,R){var L=k(M,Md),Z=0;if(L&&(L.forEach(function(l){Z+=l}),Z>0)){for(var Q=k(M,"colors")||xb,X=k(M,"startAngle")||0,e=k(M,"hollow"),o=k(M,Cl),z=k(M,wm),N=k(M,Kj),E=o?new rn:U,p=R.x,C=R.y,x=R.width,V=R.height,A=p+x/2,P=C+V/2,D=Y(x,V)/2,i=0,v=0;v<L.length;v++){var d=L[v],t=_*d/Z,I=X+t;if(O.fillStyle=Q[i++],i===Q.length&&(i=0),O.beginPath(),e){var $=A+r(X)*D/2,u=P+h(X)*D/2,y=A+r(I)*D,m=P+h(I)*D;O.moveTo($,u),O.arc(A,P,D/2,X,I,!1),O.lineTo(y,m),O.arc(A,P,D,I,X,!0)}else O.moveTo(A,P),O.arc(A,P,D,I,X,!0);E&&(t=(X+I)/2,E.add({text:Jm(o)?o(d,v,Z,H):d,x:A+.75*r(t)*D,y:P+.75*h(t)*D})),O.closePath(),O.fill(),X=I}E&&E.each(function(U){vs(O,U.text,z,N,U.x,U.y,0,0,cr)})}},u=function(g,I){var a=k(g,Yq);if(a&&a.length>0){var q=a.length,w=k(g,Cl),K=k(g,wm),R=k(g,Kj),p=w?new rn:U,v=k(g,"minValue")||0,h=k(g,"maxValue");if(h==U&&(h=0,a.forEach(function(f){f.values.forEach(function(j){h=W(h,j)})})),v===h)return;for(var Y=I.height/(h-v),c=I.y+h*Y,_=k(a[0],Md).length,N=I.width/(3*_+1),j=2*N/q,M=0,x=0;q>x;x++)for(var C=a[x],i=k(C,Og),S=k(C,"colors"),Q=k(C,Md),z=0;_>z;z++){S?O.fillStyle=S[z]:i?O.fillStyle=i:(O.fillStyle=xb[M++],M===xb.length&&(M=0));var y=Q[z],r=y*Y,t=I.x+(1+3*z)*N+x*j;if(rf(O,t,c-r,j,r),p){var s=Jm(w)?w(y,z,C,H):y,T=sm(K,s).height;p.add({x:t,y:c-r-T,width:j,height:T,text:s})}}p&&p.each(function(D){vs(O,D.text,K,R,D.x,D.y,D.width,D.height,cr)})}},i=function(J,A){var r=k(J,Yq);if(r&&r.length>0){var K=r.length,p=k(r[0],Md).length,q=A.width/(3*p+1),M=0,$=k(J,"maxValue"),x=k(J,Cl),j=k(J,wm),V=k(J,Kj),e=x?new rn:U;if($==U){$=0;for(var D=0;p>D;D++){for(var m=0,c=0;K>c;c++)m+=k(r[c],Md)[D];$=W($,m)}}if($>0){for(var D=0;p>D;D++)for(var u=A.y+A.height,c=0;K>c;c++){var P=r[c],B=k(P,Og),G=k(P,Md)[D],i=G/$*A.height;B?O.fillStyle=B:(O.fillStyle=xb[M++],M===xb.length&&(M=0)),u-=i;var Q={x:A.x+(1+3*D)*q,y:u,width:2*q,height:i};rf(O,Q.x,Q.y,Q.width,Q.height),e&&(Q.text=Jm(x)?x(G,D,P,H):G,e.add(Q))}e&&e.each(function(Z){vs(O,Z.text,j,V,Z.x,Z.y,Z.width,Z.height,cr)})}}},x=function(B,t){var V=k(B,Yq);if(V&&V.length>0){for(var D=V.length,M=k(V[0],Md).length,J=t.width/(3*M+1),s=0,Y=k(B,Cl),w=k(B,wm),d=k(B,Kj),$=Y?new rn:U,c=0;M>c;c++){for(var R=0,Q=0;D>Q;Q++)R+=k(V[Q],Md)[c];if(R>0){var m=t.y+t.height;for(Q=0;D>Q;Q++){var X=V[Q],q=k(X,Og),I=k(X,Md)[c],u=I/R*t.height;q?O.fillStyle=q:(O.fillStyle=xb[s++],s===xb.length&&(s=0)),m-=u;var W={x:t.x+(1+3*c)*J,y:m,width:2*J,height:u};rf(O,W.x,W.y,W.width,W.height),$&&(W.text=Jm(Y)?Y(I,c,X,H):I,$.add(W))}}}$&&$.each(function(W){vs(O,W.text,w,d,W.x,W.y,W.width,W.height,cr)})}},A=function(E,u){var Q=k(E,Yq);if(Q&&Q.length>0){var c=Q.length,q=k(E,"minValue")||0,J=k(E,"maxValue");if(J==U&&(J=0,Q.forEach(function(m){m.values.forEach(function(b){J=W(J,b)})})),q===J)return;for(var s=u.height/(J-q),n=u.y+J*s,Z=k(Q[0],Md).length,P=u.width/(3*Z+1),G=0,x=k(E,"lineWidth")||2,V=k(E,"line3d"),j=k(E,"linePoint"),p=k(E,Cl),h=k(E,wm),t=k(E,Kj),y=0;c>y;y++){var B=Q[y],l=k(B,Og),r=k(B,Md);l?O.strokeStyle=l:(l=O.strokeStyle=xb[G++],G===xb.length&&(G=0)),O.beginPath();for(var w=0;Z>w;w++){var D=u.x+(2+3*w)*P,i=n-r[w]*s;0===w?O.moveTo(D,i):O.lineTo(D,i)}if(O.lineWidth=x,O.stroke(),V&&zb(O,l,U,x,e),j||p){var a,F=x/2+2;for(w=0;Z>w;w++){var $=r[w];if(D=u.x+(2+3*w)*P,i=n-$*s,Jm(j)?j(O,D,i,l,w,B,H):j&&(O.fillStyle=l,O.beginPath(),O.arc(D,i,F,0,_,!0),O.fill()),Jm(p)?a=p($,w,B,H):p&&(a=$),a){var L=sm(h,a).height,o=O.shadowBlur;if(o){var m=O.shadowOffsetX,M=O.shadowOffsetY,K=O.shadowColor;O.shadowOffsetX=0,O.shadowOffsetY=0,O.shadowBlur=0,O.shadowColor=U}vs(O,a,h,t,D,i-L-F+2,0,L,cr),o&&(O.shadowOffsetX=m,O.shadowOffsetY=M,O.shadowColor=K,O.shadowBlur=o)}}}}}},f={border:l,image:F,text:J,pieChart:$,columnChart:u,stackedColumnChart:i,percentageColumnChart:x,lineChart:A};return function(w,X,j,g,s,o,F,A,t){if(X&&s&&o){if(O=w,H=F,b=A,e=b?b._zoom?b._zoom:1:1,G=t,X.tagName)return O.drawImage(X,j,g,s,o),void 0;if(k(X,"visible")!==!1){G||(G=un(X.color,H,b));var d=Sb(X,H),y=sd(X,H),D={x:0,y:0,width:d,height:y},r=k(X,"clip"),q=k(X,"opacity");O.save(),kk(O,j,g),(d!==s||y!==o)&&O.scale(s/d,o/y),r&&(Jm(r)?r(O,d,y,H,b,X):(O.beginPath(),O.rect(0,0,d,y),O.clip())),q!=U&&(O.globalAlpha*=q),k(X,"comps").forEach(function(e){if(k(e,rq)!==!1){ec.splice(0,0,e);var X=k(e,"opacity"),J=k(e,"shadow"),K=k(e,"type"),c=S(e,D);if(X!=U){var j=O.globalAlpha;O.globalAlpha*=X}if(J){var d=O.shadowOffsetX,t=O.shadowOffsetY,A=O.shadowBlur,g=O.shadowColor,n=k(e,"shadowOffsetX"),T=k(e,"shadowOffsetY"),u=k(e,"shadowBlur"),y=k(e,"shadowColor");O.shadowOffsetX=n==U?3:n,O.shadowOffsetY=T==U?3:T,O.shadowBlur=u==U?6:u,O.shadowColor=y||Wr}if(Jm(K))K(O,c,e,H,b);else if(C.getCompType(K))C.getCompType(K)(O,c,e,H,b);else if(Pe[K]||K===rb)m(e,K,c);else if("SVGPath"===K)B(e,K,c);else if(f[K]&&c){var I=k(e,Qr);R(I,c),f[K](e,c),z(I)}J&&(O.shadowOffsetX=d,O.shadowOffsetY=t,O.shadowBlur=A,O.shadowColor=g),X!=U&&(O.globalAlpha=j),ec.splice(0,1)}}),O.restore()}}}}();C.getCurrentComp=function(){return ec[0]},C.getParentComp=function(){return ec[1]},C.getInternal=function(){return{isEnter:Bn,isEsc:Sg,isSpace:Jq,isLeft:kn,isUp:pb,isRight:Hf,isDown:Sf,addMethod:pr,superCall:si,toPointsArray:qq,translateAndScale:gp,appendArray:_j,createWorldMatrix:oj,vec3TransformMat4:bi,setCanvas:kr,createDiv:xk,createCanvas:Kh,createImage:yk,initContext:os,layout:bb,fillRect:rf,Mat:Pq,drawBorder:zn,isString:re,setBorder:qj,getPropertyValue:Dk,setPropertyValue:en,drawVerticalLine:Nh,draw3DRect:Ab,getPinchDist:Rn,isSameRect:ve,getPosition:eg,intersectionLineRect:Mk,getNodeRect:wd,getImageWidth:Sb,getImageHeight:sd,formatNumber:Hr,initItemElement:Zg,drawPoints:ko,createG2:mb,closePopup:De,isH:fp,createAnim:Pg,createNormalMatrix:fr,createNormals:Al,toFloatArray:kf,glMV:xr,batchShape:Jr,createNodeMatrix:As,getFaceInfo:zm,transformAppend:Kc,drawFaceInfo:Mc,to3dPointsArray:Td,setGLDebugMode:function(w){Xj=w},cube:function(){return{vs:Bs,is:ce,uv:Hg}},ui:function(){return{DataUI:nj,NodeUI:cs,EdgeUI:Lj,GroupUI:wo,ShapeUI:al,GridUI:ys,Data3dUI:sj,Node3dUI:$f,Shape3dUI:ag}},getInternalVersion:function(){return"U2FsdGVkX19YLyX2iG0bAY+yViPahcyyhErHb3l5un8="},getDragger:function(){return bs},addMSMap:function(Y){pr(Cj,Y)},k:P}},function(M){function s(y,t){y!=U&&(t==U&&Ae!=typeof y?this._54O(y,256):this._54O(y,t))}function t(){return new s(U)}function z(i,l,f,Y,b,P){for(;--P>=0;){var O=l*this[i++]+f[Y]+b;b=Z(O/67108864),f[Y++]=67108863&O}return b}function f(J,W,m,L,Z,P){for(var H=32767&W,Q=W>>15;--P>=0;){var S=32767&this[J],e=this[J++]>>15,o=Q*S+e*H;S=H*S+((32767&o)<<15)+m[L]+(1073741823&Z),Z=(S>>>30)+(o>>>15)+Q*e+(Z>>>30),m[L++]=1073741823&S}return Z}function m(Q,E,S,t,H,o){for(var T=16383&E,W=E>>14;--o>=0;){var N=16383&this[Q],A=this[Q++]>>14,c=W*N+A*T;N=T*N+((16383&c)<<14)+S[t]+H,H=(N>>28)+(c>>14)+W*A,S[t++]=268435455&N}return H}function x(K){return Wb.charAt(K)}function O(E,J){var g=lk[E.charCodeAt(J)];return g==U?-1:g}function k(n){for(var q=this.t-1;q>=0;--q)n[q]=this[q];n.t=this.t,n.s=this.s}function L(c){this.t=1,this.s=0>c?-1:0,c>0?this[0]=c:-1>c?this[0]=c+this.DV:this.t=0}function G(G){var j=t();return j._58O(G),j}function Q(r,Q){var m,v=this;if(16==Q)m=4;else if(8==Q)m=3;else if(256==Q)m=8;else if(2==Q)m=1;else if(32==Q)m=5;else{if(4!=Q)return v.fromRadix(r,Q),void 0;m=2}v.t=0,v.s=0;for(var e=r.length,C=!1,z=0;--e>=0;){var w=8==m?255&r[e]:O(r,e);0>w?"-"==r.charAt(e)&&(C=!0):(C=!1,0==z?v[v.t++]=w:z+m>v.DB?(v[v.t-1]|=(w&(1<<v.DB-z)-1)<<z,v[v.t++]=w>>v.DB-z):v[v.t-1]|=w<<z,z+=m,z>=v.DB&&(z-=v.DB))}8==m&&0!=(128&r[0])&&(v.s=-1,z>0&&(v[v.t-1]|=(1<<v.DB-z)-1<<z)),v._57O(),C&&s.ZERO._78O(v,v)}function y(){for(var b=this,r=b.s&b.DM;b.t>0&&b[b.t-1]==r;)--b.t}function F(G){var I=this;if(I.s<0)return"-"+I._85O()[vd](G);var f;if(16==G)f=4;else if(8==G)f=3;else if(2==G)f=1;else if(32==G)f=5;else{if(4!=G)return I.toRadix(G);f=2}var i,m=(1<<f)-1,O=!1,t="",L=I.t,j=I.DB-L*I.DB%f;if(L-->0)for(j<I.DB&&(i=I[L]>>j)>0&&(O=!0,t=x(i));L>=0;)f>j?(i=(I[L]&(1<<j)-1)<<f-j,i|=I[--L]>>(j+=I.DB-f)):(i=I[L]>>(j-=f)&m,0>=j&&(j+=I.DB,--L)),i>0&&(O=!0),O&&(t+=x(i));return O?t:"0"}function I(){var u=t();return s.ZERO._78O(this,u),u}function a(){return this.s<0?this._85O():this}function v(f){var i=this,e=i.s-f.s;if(0!=e)return e;var V=i.t;if(e=V-f.t,0!=e)return i.s<0?-e:e;for(;--V>=0;)if(0!=(e=i[V]-f[V]))return e;return 0}function i(k){var a,N=1;return 0!=(a=k>>>16)&&(k=a,N+=16),0!=(a=k>>8)&&(k=a,N+=8),0!=(a=k>>4)&&(k=a,N+=4),0!=(a=k>>2)&&(k=a,N+=2),0!=(a=k>>1)&&(k=a,N+=1),N}function u(){var R=this;return R.t<=0?0:R.DB*(R.t-1)+i(R[R.t-1]^R.s&R.DM)}function C(C,O){var n;for(n=this.t-1;n>=0;--n)O[n+C]=this[n];for(n=C-1;n>=0;--n)O[n]=0;O.t=this.t+C,O.s=this.s}function V(f,D){for(var y=f;y<this.t;++y)D[y-f]=this[y];D.t=W(this.t-f,0),D.s=this.s}function N(_,w){var d,F=this,h=_%F.DB,P=F.DB-h,p=(1<<P)-1,i=Z(_/F.DB),u=F.s<<h&F.DM;for(d=F.t-1;d>=0;--d)w[d+i+1]=F[d]>>P|u,u=(F[d]&p)<<h;for(d=i-1;d>=0;--d)w[d]=0;w[i]=u,w.t=F.t+i+1,w.s=F.s,w._57O()}function n(o,N){var P=this;N.s=P.s;var j=Z(o/P.DB);if(j>=P.t)return N.t=0,void 0;var t=o%P.DB,J=P.DB-t,A=(1<<t)-1;N[0]=P[j]>>t;for(var i=j+1;i<P.t;++i)N[i-j-1]|=(P[i]&A)<<J,N[i-j]=P[i]>>t;t>0&&(N[P.t-j-1]|=(P.s&A)<<J),N.t=P.t-j,N._57O()}function E(D,H){for(var O=this,z=0,j=0,f=Y(D.t,O.t);f>z;)j+=O[z]-D[z],H[z++]=j&O.DM,j>>=O.DB;if(D.t<O.t){for(j-=D.s;z<O.t;)j+=O[z],H[z++]=j&O.DM,j>>=O.DB;j+=O.s}else{for(j+=O.s;z<D.t;)j-=D[z],H[z++]=j&O.DM,j>>=O.DB;j-=D.s}H.s=0>j?-1:0,-1>j?H[z++]=O.DV+j:j>0&&(H[z++]=j),H.t=z,H._57O()}function c(q,y){var D=this.abs(),B=q.abs(),d=D.t;for(y.t=d+B.t;--d>=0;)y[d]=0;for(d=0;d<B.t;++d)y[d+D.t]=D.am(0,B[d],y,d,0,D.t);y.s=0,y._57O(),this.s!=q.s&&s.ZERO._78O(y,y)}function j(S){for(var d=this.abs(),U=S.t=2*d.t;--U>=0;)S[U]=0;for(U=0;U<d.t-1;++U){var z=d.am(U,d[U],S,2*U,0,1);(S[U+d.t]+=d.am(U+1,2*d[U],S,2*U+1,z,d.t-U-1))>=d.DV&&(S[U+d.t]-=d.DV,S[U+d.t+1]=1)}S.t>0&&(S[S.t-1]+=d.am(U,d[U],S,2*U,0,1)),S.s=0,S._57O()}function K(o,d,H){var e=o.abs(),T=this;if(!(e.t<=0)){var M=T.abs();if(M.t<e.t)return d!=U&&d._58O(0),H!=U&&T._77O(H),void 0;H==U&&(H=t());var W=t(),R=T.s,k=o.s,f=T.DB-i(e[e.t-1]);f>0?(e._44O(f,W),M._44O(f,H)):(e._77O(W),M._77O(H));var b=W.t,n=W[b-1];if(0!=n){var J=n*(1<<T.F1)+(b>1?W[b-2]>>T.F2:0),V=T.FV/J,I=(1<<T.F1)/J,j=1<<T.F2,y=H.t,C=y-b,Q=d==U?t():d;for(W._59O(C,Q),H._52O(Q)>=0&&(H[H.t++]=1,H._78O(Q,H)),s.ONE._59O(b,Q),Q._78O(W,W);W.t<b;)W[W.t++]=0;for(;--C>=0;){var $=H[--y]==n?T.DM:Z(H[y]*V+(H[y-1]+j)*I);if((H[y]+=W.am(0,$,H,C,0,b))<$)for(W._59O(C,Q),H._78O(Q,H);H[y]<--$;)H._78O(Q,H)}d!=U&&(H._45O(b,d),R!=k&&s.ZERO._78O(d,d)),H.t=b,H._57O(),f>0&&H._46O(f,H),0>R&&s.ZERO._78O(H,H)}}}function p(h){var R=t();return this.abs()._49O(h,U,R),this.s<0&&R._52O(s.ZERO)>0&&h._78O(R,R),R}function T(Z){this.m=Z}function J(B){return B.s<0||B._52O(this.m)>=0?B.mod(this.m):B}function B(D){return D}function X(J){J._49O(this.m,U,J)}function d(q,h,u){q._47O(h,u),this._74O(u)}function H(t,a){t._48O(a),this._74O(a)}function b(){if(this.t<1)return 0;var U=this[0];if(0==(1&U))return 0;var t=3&U;return t=15&t*(2-(15&U)*t),t=255&t*(2-(255&U)*t),t=65535&t*(2-(65535&(65535&U)*t)),t=t*(2-U*t%this.DV)%this.DV,t>0?this.DV-t:-t}function R(i){var l=this;l.m=i,l.mp=i._50O(),l.mpl=32767&l.mp,l.mph=l.mp>>15,l.um=(1<<i.DB-15)-1,l.mt2=2*i.t}function q(H){var M=t();return H.abs()._59O(this.m.t,M),M._49O(this.m,U,M),H.s<0&&M._52O(s.ZERO)>0&&this.m._78O(M,M),M}function e(B){var c=t();return B._77O(c),this._74O(c),c}function g(l){for(var R=this;l.t<=R.mt2;)l[l.t++]=0;for(var r=0;r<R.m.t;++r){var X=32767&l[r],g=X*R.mpl+((X*R.mph+(l[r]>>15)*R.mpl&R.um)<<15)&l.DM;for(X=r+R.m.t,l[X]+=R.m.am(0,g,l,r,0,R.m.t);l[X]>=l.DV;)l[X]-=l.DV,l[++X]++}l._57O(),l._45O(R.m.t,l),l._52O(R.m)>=0&&l._78O(R.m,l)}function Qd(r,p){r._48O(p),this._74O(p)}function wn(Z,t,p){Z._47O(t,p),this._74O(p)}function go(){return 0==(this.t>0?1&this[0]:this.s)}function rj(u,V){if(u>4294967295||1>u)return s.ONE;var c=t(),R=t(),g=V._73O(this),F=i(u)-1;for(g._77O(c);--F>=0;)if(V._76O(c,R),(u&1<<F)>0)V._75O(R,g,c);else{var L=c;c=R,R=L}return V.revert(c)}function qi(o,l){var K;return K=256>o||l._51O()?new T(l):new R(l),this.exp(o,K)}function cb(){var l=this;if(l.s<0){if(1==l.t)return l[0]-l.DV;if(0==l.t)return-1}else{if(1==l.t)return l[0];if(0==l.t)return 0}return(l[1]&(1<<32-l.DB)-1)<<l.DB|l[0]}function Tn(h,E){return new s(h,E)}function dc(){var z=this;z.n=U,z.e=0,z.d=U,z.p=U,z.q=U,z.dmp1=U,z.dmq1=U,z._10A=U}function Oo(U){return U._53O(this.e,this.n)}function Gq(v){var L,s,M,j="",z=0;for(L=0;L<v.length&&v.charAt(L)!=eg;++L)M=Hd.indexOf(v.charAt(L)),0>M||(0==z?(j+=x(M>>2),s=3&M,z=1):1==z?(j+=x(s<<2|M>>4),s=15&M,z=2):2==z?(j+=x(s),j+=x(M>>2),s=3&M,z=3):(j+=x(s<<2|M>>4),j+=x(15&M),z=0));return 1==z&&(j+=x(s<<2)),j}function Om(C){var A=C.split(""),m=Gq(C);return A.forEach(function(U){var S=U.length;S>0&&m&&(Rr+=D(U))}),m}function Qg(M,j){var F=Qc._4O.Util._56O(M,"ss"),T={},r=0;return T.v=F==j,T.t=1,T.s=0>r?-1:0,Hl=T.v,r>0?T[0]=r:-1>r?T[0]=r+T.DV:T.t=0,[F,T]}function vl(T){var I=38,H=T.substring(0,I);if(H&&30==H.indexOf("05000420")){var U=["ss",T.substring(I)];return U}return[]}function Wq(V,Y){Y=Y.replace(Pk,""),Y=Y.replace(/[ \n]+/g,"");var E=Tn(Y,16);if(E._55O()>this.n._55O())return 0;var I=this._37O(E),p=I[vd](16).replace(/^1f+00/,""),G=vl(p);if(0==G.length)return!1;for(var C,L,z,M=.5,$=yq,f=[0,.5,.75,.875,.9375],Z=[],w=[],J=[],O=_/$,P=G[1],W=Qg(V,P)[0],U=0,i=0;U<f.length;U++){var t=0===U%2?0:.5;for(C=0;$>=C;C++)L=(C+t)*O,z=1-f[U],Z.push(r(L)*M*z,-M+2*f[U]*M,-h(L)*M*z),w.push((C+t)/$,z)}for(U=0;U<f.length-1;U++){var m=U*($+1),Q=(U+1)*($+1);for(C=0;$>C;C++)J.push(m+C,Q+C+1,Q+C,m+C,m+C+1,Q+C+1)}return J.forEach(function(A){i+=A}),P==W&&i>10}var Tp,Pn=0xdeadbeefcafe,bg=15715070==(16777215&Pn),vd="toString",ae="",ml="nat",Hg=function(){};w=M["D"+11182[vd](A(2,5))];var Be=s.prototype;Fk+=vc.substr(0,1);var kh=M.navigator?M.navigator.appName:"";bg&&"Microsoft Internet Explorer"==kh?(Be.am=f,Tp=30):bg&&"Netscape"!=kh?(Be.am=z,Tp=26):(Be.am=m,Tp=28),Be.DB=Tp,Be.DM=(1<<Tp)-1,Be.DV=1<<Tp;var Bp=52;Be.FV=A(2,Bp),Be.F1=Bp-Tp,Be.F2=2*Tp-Bp;var Fb,db,Wb="0123456789abcdefghijklmnopqrstuvwxyz",lk=[],El=function(s){return String.fromCharCode(s)};for(Fb="0".charCodeAt(0),db=0;9>=db;++db)lk[Fb++]=db;for(Fb="a".charCodeAt(0),db=10;36>db;++db)lk[Fb++]=db;for(Fb="A".charCodeAt(0),db=10;36>db;++db)lk[Fb++]=db;var Kb=T.prototype;Kb._73O=J,Kb.revert=B,Kb._74O=X,Kb._75O=d,Kb._76O=H;var ti=R.prototype;ti._73O=q,ti.revert=e,ti._74O=g,ti._75O=wn,ti._76O=Qd,Be._77O=k,Be._58O=L,Be._54O=Q,Be._57O=y,Be._59O=C,Be._45O=V,Be._44O=N,Be._46O=n,Be._78O=E,Be._47O=c,Be._48O=j,Be._49O=K,Be._50O=b,Be._51O=go,Be.exp=rj,Be.toString=F,Be._85O=I,Be.abs=a,Be._52O=v,Be._55O=u,Be.mod=p,Be._53O=qi,s.ZERO=G(0),s.ONE=G(1),Be._86O=cb;var Df=function(G,p){var h=this;h.isPublic=!0,typeof G!==Ae?(h.n=G,h.e=p):G!=U&&p!=U&&G.length>0&&p.length>0&&(h.n=Tn(G,16),h.e=D(p,16))};Yh=function(){var c,r,K=Om(ye),W=K.substr(0,4),l=K.substr(4,2),k=K.substr(6,2),O=1,I=!O,f=P,e=[],L=Yg.charAt(7);if(w&&(w[vd]().indexOf(ml)<0||w[Fk][vd]().indexOf(ml)<0||!K?c=Sp(Hn[L]):(K=new w(W-0,l-O,k-0),r=K.setHours(9),w[Fk]()>r?c=Sp(Hn[L]):I=!0)),K&&c&&f){for(var q in c)e.push(q);var b,S=c[e[0]],v=c[e[1]],h=c[e[2]],x=c[e[4]],y=c[e[5]],H=c[e[6]],J=_f._27O(f);J&&H&&(b=S+v+h+x+""+y,b&&J._31O(b,H)&&(I=!0))}return I||(Db=ci),L};var ws=dc.prototype;ws._37O=Oo,ws._38O=Df;var Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eg="=",ig=25,ur=10,ye="IBYSFQ==",js=js||function(j,P){var e={},x=e._7A={},Q=x._6A=function(){function e(){}return{_80O:function(n){e.prototype=this;var b=new e;return n&&b._5A(n),b.hasOwnProperty("_82O")||(b._82O=function(){b.$super._82O.apply(this,arguments)}),b._82O.prototype=b,b.$super=this,b},_3A:function(){var J=this._80O();return J._82O.apply(J,arguments),J},_82O:function(){},_5A:function(Q){for(var O in Q)Q.hasOwnProperty(O)&&(this[O]=Q[O]);Q.hasOwnProperty(vd)&&(this.toString=Q.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),U=x._39O=Q._80O({_82O:function($,h){$=this._84O=$||[],this._65O=h!=P?h:4*$.length},toString:function(R){return(R||I).stringify(this)},_89O:function(Q){var J=this._84O,G=Q._84O,N=this._65O,$=Q._65O;if(this._57O(),N%4)for(var Y=0;$>Y;Y++){var v=255&G[Y>>>2]>>>24-8*(Y%4);J[N+Y>>>2]|=v<<24-8*((N+Y)%4)}else if(G.length>65535)for(var Y=0;$>Y;Y+=4)J[N+Y>>>2]=G[Y>>>2];else J.push.apply(J,G);return this._65O+=$,this},_57O:function(){var s=this._84O,F=this._65O;s[F>>>2]&=4294967295<<32-8*(F%4),s.length=S(F/4)},_88O:function(){var f=Q._88O.call(this);return f._84O=this._84O.slice(0),f},_87O:function(Q){for(var R=[],S=0;Q>S;S+=4)R.push(0|4294967296*l);return new U._82O(R,Q)}}),m=e._2A={},I=m._69O={stringify:function(Q){var S,l=Q._84O,o=Q._65O,j=[];for(S=0;o>S;S++){var R=255&l[S>>>2]>>>24-8*(S%4);j.push((R>>>4).toString(16)),j.push((15&R).toString(16))}return j.join("")},_68O:function(m){for(var r=m.length,g=[],_=0;r>_;_+=2)g[_>>>3]|=D(m.substr(_,2),16)<<24-4*(_%8);return new U._82O(g,r/2)}},a=m._8A={stringify:function(H){var O,b=H._84O,E=H._65O,L=[];for(O=0;E>O;O++){var y=255&b[O>>>2]>>>24-8*(O%4);L.push(El(y))}return L.join("")},_68O:function(Q){var j,N=Q.length,W=[];for(j=0;N>j;j++)W[j>>>2]|=(255&Q.charCodeAt(j))<<24-8*(j%4);return new U._82O(W,N)}},L=m._9A={stringify:function(X){try{return decodeURIComponent(escape(a.stringify(X)))}catch(S){throw new Error("")}},_68O:function(Q){return a._68O(unescape(encodeURIComponent(Q)))}},r=x._32O=Q._80O({_1A:function(){this._83O=new U._82O,this._23O=0},_33O:function(r){typeof r==Ae&&(r=L._68O(r)),this._83O._89O(r),this._23O+=r._65O},_25O:function(k){var y=this._83O,K=y._84O,q=y._65O,b=this._79O,C=4*b,J=q/C;J=k?S(J):W((0|J)-this._22O,0);var D=J*b,X=Y(4*D,q);if(D){for(var t=0;D>t;t+=b)this._20O(K,t);var E=K.splice(0,D);y._65O-=X}return new U._82O(E,X)},_88O:function(){var J=Q._88O.call(this);return J._83O=this._83O._88O(),J},_22O:0});x._66O=r._80O({cfg:Q._80O(),_82O:function(i){this.cfg=this.cfg._80O(i),this._1A()},_1A:function(){r._1A.call(this),this._34O()},_81O:function(r){return this._33O(r),this._25O(),this},_72O:function(U){U&&this._33O(U);var R=this._21O();return R},_79O:16,_26O:function(x){return function(W,P){return new x._82O(P)._72O(W)}},_19O:function(O){return function(P,G){return new E._71O._82O(O,G)._72O(P)}}});var E=e._67O={};return e}();!function(){var m=js,Q=m._7A,O=Q._39O,c=Q._66O,h=m._67O,r=[],M=[];!function(){function C(Q){for(var s=o(Q),r=2;s>=r;r++)if(!(Q%r))return!1;return!0}function k(F){return 0|4294967296*(F-(0|F))}for(var H=2,i=0;64>i;)C(H)&&(8>i&&(r[i]=k(A(H,.5))),M[i]=k(A(H,1/3)),i++),H++}();var p=[],i=h._41O=c._80O({_34O:function(){this._64O=new O._82O(r.slice(0))},_20O:function(h,o){for(var U=this._64O._84O,P=U[0],$=U[1],f=U[2],e=U[3],J=U[4],C=U[5],n=U[6],j=U[7],x=0;64>x;x++){if(16>x)p[x]=0|h[o+x];else{var T=p[x-15],i=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,w=p[x-2],R=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;p[x]=i+p[x-7]+R+p[x-16]}var X=J&C^~J&n,t=P&$^P&f^$&f,S=(P<<30|P>>>2)^(P<<19|P>>>13)^(P<<10|P>>>22),H=(J<<26|J>>>6)^(J<<21|J>>>11)^(J<<7|J>>>25),m=j+H+X+M[x]+p[x],g=S+t;j=n,n=C,C=J,J=0|e+m,e=f,f=$,$=P,P=0|m+g}U[0]=0|U[0]+P,U[1]=0|U[1]+$,U[2]=0|U[2]+f,U[3]=0|U[3]+e,U[4]=0|U[4]+J,U[5]=0|U[5]+C,U[6]=0|U[6]+n,U[7]=0|U[7]+j},_21O:function(){var H=this._83O,m=H._84O,o=8*this._23O,d=8*H._65O;return m[d>>>5]|=128<<24-d%32,m[(d+64>>>9<<4)+14]=Z(o/4294967296),m[(d+64>>>9<<4)+15]=o,H._65O=4*m.length,this._25O(),this._64O},_88O:function(){var u=c._88O.call(this);return u._64O=this._64O._88O(),u}});m._41O=c._26O(i),m._42O=c._19O(i)}();var Pk=new RegExp("");Pk.compile("[^0-9a-f]","gi"),dc._28O=-1,dc._29O=-2,ws._31O=Wq,ws._63O=Wq,dc._43O=-2;var Xo=new function(){var H=this;H._5O=function(i,T){if("8"!=i.substring(T+2,T+3))return 1;var w=D(i.substring(T+3,T+4));return 0==w?-1:w>0&&10>w?w+1:-2},H._13O=function(C,V){var J=H._5O(C,V);return 1>J?"":C.substring(V+2,V+2+2*J)},H._12O=function(h,O){var Z=H._13O(h,O);if(""==Z)return-1;var T;return T=D(Z.substring(0,1))<8?new s(Z,16):new s(Z.substring(2),16),T._86O()},H._6O=function(X,Z){var D=H._5O(X,Z);return 0>D?D:Z+2*(D+1)},H._11O=function(M,W){var I=H._6O(M,W),p=H._12O(M,W);return M.substring(I,I+2*p)},H._10O=function(G,k){var E=H._6O(G,k),u=H._12O(G,k);return E+2*u},H._7O=function(f,e){var X=[],S=H._6O(f,e);X.push(S);for(var u=H._12O(f,e),c=S,N=0;;){var p=H._10O(f,c);if(p==U||p-S>=2*u)break;if(N>=200)break;X.push(p),c=p,N++}return X}};if(Xo._90O=El(ur+24),Xo._91O=$+El(ur*ur+8),Qc==U||!Qc)var Qc={};Qc._4O!=U&&Qc._4O||(Qc._4O={}),Qc._4O.Util=new function(){var j=this;j._56O=function(k){var L=new Qc._4O._3O;return L._30O(k)},j._4A=function(s){var w=new Qc._4O._3O;return w._36O(s)}},Qc._4O._3O=function(){var I=this;I._8O=function(C,v){if("ss"==C&&"cj"==v){try{I.md=js._67O._41O._3A()}catch(_){Hg(ae)}I._24O=function(i){I.md._81O(i)},I._35O=function(C){var M=js._2A._69O._68O(C);I.md._81O(M)},I._60O=function(){var m=I.md._72O();return m[vd](js._2A._69O)},I._30O=function(O){return I._24O(O),I._60O()},I._36O=function(y){return I._35O(y),I._60O()}}},I._24O=function(){Hg(ae)},I._35O=function(){Hg(ae)},I._60O=function(){Hg(ae)},I._30O=function(){Hg(ae)},I._36O=function(){Hg(ae)},I._8O("ss","cj")},hh=function(p){var L=M[Xo._91O],w=1,$=!1;if(nh.forEach(function(t){w*=t}),nh.a)return nh.a;if(p>w){if(L){L=L.split(Xo._90O);var G=L[3],t=L[7],W=L[11],_=L[19],P=L[23],l=L[27],I=G+t+W+_+P;$=so()(I,l)}$||(nj.prototype._42=lb)}else $=!0;return nh.a=$,$},ig=String.fromCharCode(ig+20);var ab=function(g){return g=g.replace(Pk,ae),g=g.replace(/[ \n]+/g,ae)},em="30",Xk="06",Yk="02",zs="03",pd=Tn,lq=/^1f+00/,_f=function(){var l;return l={_18O:function(D){var t=D,Q=t.replace(/\s+/g,""),J=Gq(Q);return J},_14O:function(g){var f=this._18O(g),t=this._15O(f);return t},_15O:function(T){var A=this._17O(T);if("2a864886f70d010101"==A._61O){var i=this._16O(A.key),m=new dc;return m._38O(i.n,i.e),m}Hg(ae)},_16O:function(h){var x={};h.substr(0,2)!=em&&Hg(ae);var O=Xo._7O(h,0);return 2!=O.length&&Hg(ae),h.substr(O[0],2)!=Yk&&Hg(ae),x.n=Xo._11O(h,O[0]),h.substr(O[1],2)!=Yk&&Hg(ae),x.e=Xo._11O(h,O[1]),x},_17O:function(m){var E={};E._40O=U;var X=Xo._7O(m,0);2!=X.length&&Hg(ae);var g=X[0];m.substr(g,2)!=em&&Hg(ae);var h=Xo._7O(m,g);return 2!=h.length&&Hg(ae),m.substr(h[0],2)!=Xk&&Hg(ae),E._61O=Xo._11O(m,h[0]),m.substr(h[1],2)==Xk?E._40O=Xo._11O(m,h[1]):m.substr(h[1],2)==em&&(E._40O={},E._40O.p=Xo._70O(m,h[1],[0],Yk),E._40O.q=Xo._70O(m,h[1],[1],Yk),E._40O.g=Xo._70O(m,h[1],[2],Yk)),m.substr(X[1],2)!=zs&&Hg(ae),E.key=Xo._11O(m,X[1]).substr(2),E}},l._17O?l:U}(),Fp=_f._27O=function(D){return _f._14O(D)};return so=function(){return function(c,g){g=ab(g);var X=pd(g,A(2,4)),Y=this;if(!Y||!Y.n||X._55O()>Y.n._55O())return 0;var O=Y._37O(X),_=O[vd](A(2,4)).replace(lq,""),J=vl(_);if(0==J.length)return!1;var R=J[0],M=J[1],y=function(W){return Qc._4O.Util._56O(W,R)},w=y(c);return M==w}.bind(Fp(P))},_f}(V,O);var rn=e.List=function(){this._as=[];var e,n,h=arguments.length;if(1===h){var F=arguments[0];if(Ni(F)&&(F=F._as),bf(F))for(n=F.length,e=0;n>e;e++)this._as.push(F[e]);else F!=U&&this._as.push(F)}else if(h>1)for(e=0;h>e;e++)this._as.push(arguments[e])};Oo("List",O,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(O,I){return I===H?this._as.push(O):this._as.splice(I,0,O)},addAll:function(H){Ni(H)&&(H=H._as),bf(H)?_j(this._as,H):this._as.push(H)},get:function(u){return this._as[u]},slice:function(M,S){return new rn(this._as.slice(M,S))},remove:function(n){var o=this._as.indexOf(n);return o>=0&&o<this._as.length&&this.removeAt(o),o},removeAt:function(p){return this._as.splice(p,1)[0]},set:function(i,T){return this._as[i]=T},clear:function(){return this._as.splice(0,this._as.length)},contains:function(U){return this._as.indexOf(U)>=0},indexOf:function(G){return this._as.indexOf(G)},each:function(j,F){for(var R=0,b=this._as.length;b>R;R++){var T=this._as[R];F?j.call(F,T):j(T)}},reverseEach:function(L,i){for(var T=this._as.length-1;T>=0;T--){var M=this._as[T];i?L.call(i,M):L(M)}},toArray:function(c,X){if(c){for(var s,C=[],p=0,W=this._as.length;W>p;p++)s=this._as[p],X?c.call(X,s)&&C.push(s):c(s)&&C.push(s);return C}return this._as.concat()},toList:function($,a){if($){for(var p,j=new rn,F=0,N=this._as.length;N>F;F++)p=this._as[F],a?$.call(a,p)&&j.add(p):$(p)&&j.add(p);return j}return new rn(this)},reverse:function(){this._as.reverse()},sort:function(C){return this._as.sort(C?C:ki),this},toString:function(){return this._as.toString()}});var po=new rn;pr(po,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Qj,each:Qj,reverseEach:Qj,toArray:function(){return[]},toList:function(){return new rn},add:Kg,addAll:Kg,set:Kg,remove:Kg,removeAt:Kg,clear:Kg});var _p=e.Notifier=function(){};Oo("Notifier",O,{contains:function(B,o){if(this._ls)for(var G,n=0,W=this._ls.size();W>n;n++)if(G=this._ls.get(n),B===G.l&&o===G.s)return!0;return!1},add:function(P,r,y){var z=this,Q={l:P,s:r,a:y};z._ls||(z._ls=new rn),z._f?(z._as||(z._as=new rn),z._as.add(Q)):Q.a?z._ls.add(Q,0):z._ls.add(Q)},remove:function(q,w){var f=this;f._ls&&(f._f?(f._rs||(f._rs=new rn),f._rs.add({l:q,s:w})):f._remove(q,w))},_remove:function(g,u){for(var r,I=this._ls,Q=0,l=I.size();l>Q;Q++)if(r=I.get(Q),r.l===g&&r.s===u)return I.removeAt(Q),void 0},fire:function(D){var f=this,J=f._ls;if(f._b=1e4,J){f._f=1;for(var y,A=0,H=J.size();H>A;A++)y=J.get(A),y.s?y.l.call(y.s,D):y.l(D);if(delete f._f,f._rs){for(H=f._rs.size(),A=0;H>A;A++)y=f._rs.get(A),f._remove(y.l,y.s);delete f._rs}if(f._as){for(H=f._as.size(),A=0;H>A;A++)y=f._as.get(A),y.a?J.add(y,0):J.add(y);delete f._as}}}});var Tn=e.Data=function(){this._id=Gn()};Oo("Data",O,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:U,_parent:U,_children:po,_childMap:U,_styleMap:U,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return U},_22Q:function(){return U},s:function(D,L){var t=this;if(2===arguments.length)t.setStyle(D,L);else{if(!ks(D))return t.getStyle(D);for(var J in D)t.setStyle(J,D[J])}return t},fp:function(m,f,a){return this.firePropertyChange(m,f,a)},firePropertyChange:function(G,S,V){if(S===V)return!1;var p=this,R={property:G,oldValue:S,newValue:V,data:p};return p._dataModel&&p._dataModel.handleDataPropertyChange(R),p.onPropertyChanged(R),!0},onPropertyChanged:function(V){var s=this,x=s._parent,v=V.property;if($e(x)){var e=s.s(Ff),H="s:ingroup"===v;(e&&Ln[v]||v===H)&&x._81I(),(e||H)&&x.fp("childChange",!0,!1)}},_21I:function(w){var E=this;if(w&&E._dataModel)throw"HT-DM";E._dataModel=w},getId:function(){return this._id},setId:function(Y){this._id=Y},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function($,X){return this._children.toList($,X)},eachChild:function(g,U){this._children.each(g,U)},addChild:function(k,x){var K=this;k!==K&&(K._children===po&&(K._children=new rn,K._childMap={}),x===H&&(x=K._children.size()),K._childMap[k._id]||K.isDescendantOf(k)||(k._parent&&k._parent.removeChild(k),(0>x||x>K._children.size())&&(x=K._children.size()),K._children.add(k,x),K._childMap[k._id]=k,k.setParent(K),K.onChildAdded(k,x),K.fp(Vp,U,k)))},onChildAdded:function(){},removeChild:function(i){var T=this;if(T._childMap&&T._childMap[i._id]){var Y=T._children.remove(i);delete T._childMap[i._id],T.fp(Vp,i,U),i.setParent(U),T.onChildRemoved(i,Y)}},onChildRemoved:function(){},getChildAt:function(I){return this._children.get(I)},clearChildren:function(){var y=this;if(!y._children.isEmpty())for(var m=0,V=y._children.toArray(),Q=V.length;Q>m;m++)y.removeChild(V[m])},getParent:function(){return this._parent},setParent:function(R){var Z=this;if(!(Z._73I||Z._parent===R||Z===R||R&&R.isDescendantOf(Z))){var p=Z._parent;Z._parent=R,Z._73I=1,p&&p.removeChild(Z),R&&R.addChild(Z),delete Z._73I,Z.fp("parent",p,R),Z.onParentChanged(p,R)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(X){return X?this.isDescendantOf(X)||X.isDescendantOf(this):!1},isParentOf:function(M){return M&&this._childMap?!!this._childMap[M._id]:!1},isDescendantOf:function(G){if(!G||G.isEmpty())return!1;for(var E=this._parent;E;){if(G===E)return!0;E=E._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(C,T){T===H&&(T=1);var u=this._styleMap?this._styleMap[C]:H;return u===H&&T?d[C]:u},setStyle:function(Z,i){var e=this;e._styleMap||(e._styleMap={});var v=e._styleMap[Z];i===H?delete e._styleMap[Z]:e._styleMap[Z]=i,e.fp("s:"+Z,v,i)&&e.onStyleChanged(Z,v,i)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var J=this;return J._displayName||J._name||J._tag||J._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(u,S){var L=this,X=L.s(ai);X||L.s(ai,X={}),S?X[u]=S:delete X[u],L.fp(ai,U,X)},removeStyleIcon:function(L){var D=this.s(ai);if(D){var d=D[L];delete D[L],this.fp(ai,U,D)}return d},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var J,y={};for(J in this._styleMap)y[J]=1;return y}});var Br=e.DataModel=function(){var K=this;K._datas=new rn,K._dataMap={},K._roots=new rn,K._rootMap={},K._78O={},K._36I=new _p,K._35I=new _p,K._3o=new yg(K);var u=K._29Q=[],s=K._scheduleCallback=function(){for(var o=Date.now(),J=0;J<u.length;J++){var r=u[J];r.enabled&&o-r.lastTime>r.interval&&(K.each(function(N){r.action(N)}),r.lastTime=o)}u.length&&(K._30Q=V.requestAnimationFrame(s))}};Oo("DataModel",O,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function($,g,k){this.addDataModelChangeListener($,g,k)},umm:function(b,P){this.removeDataModelChangeListener(b,P)},md:function(d,J,T){this.addDataPropertyChangeListener(d,J,T)},umd:function(o,h){this.removeDataPropertyChangeListener(o,h)},mh:function(n,e,a){this.addHierarchyChangeListener(n,e,a)},umh:function(I,l){this.removeHierarchyChangeListener(I,l)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(v){return this._attrObject=v},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(W){return this._dataMap[W]},removeDataById:function(z){this.remove(this.getDataById(z))},toDatas:function(h,B){return this._datas.toList(h,B)},each:function(j,C){this._datas.each(j,C)},getDataByTag:function(S){return this._78O[S]},removeDataByTag:function(b){this.remove(this.getDataByTag(b))},add:function(O,R){var p=this,l=O._id,X=O._tag,z=p._roots;if(p._dataMap[l])throw"'"+l+"' already exists";X!=U&&(p._78O[X]=O),p._dataMap[l]=O,p._datas.add(O),O._parent||(p._rootMap[l]=O,R>=0?z.add(O,R):z.add(O)),O._21I(p),p.onAdded(O),p._36I.fire({kind:"add",data:O})},onAdded:function(){},remove:function(S){if(S){var P=this,q=S._id,f=S.getTag(),Y=P.getHistoryManager();S._dataModel===P&&(Y&&Y.beginInteraction(),P.prepareRemove(S),S.toChildren().each(P.remove,P),S._parent&&S._parent.removeChild(S),P._datas.remove(S),delete P._dataMap[q],f!=U&&delete P._78O[f],P._rootMap[q]&&(delete P._rootMap[q],P._roots.remove(S)),S._21I(U),P.onRemoved(S),P._36I.fire({kind:fo,data:S}),Y&&Y.endInteraction())
}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var n=this;n._datas.size()>0&&(n._datas.each(function(r){r._21I(U)}),n._datas.clear(),n._dataMap={},n._roots.clear(),n._rootMap={},n._78O={},n._36I.fire({kind:eh}))},contains:function(i){return i&&i._dataModel===this},handleDataPropertyChange:function(f){var c=this,b=f.data,d=f.property;if("parent"===d){var w=b._id,H=c._rootMap,z=c._roots;b._parent?H[w]&&(delete H[w],z.remove(b)):H[w]||(H[w]=b,z.add(b))}else if("tag"===d){var a=f.oldValue,t=f.newValue,j=c._78O;a!=U&&delete j[a],t!=U&&(j[t]=b)}this.onDataPropertyChanged(b,f),this._35I.fire(f)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(N,c,E){this._36I.add(N,c,E)},removeDataModelChangeListener:function(T,n){this._36I.remove(T,n)},addDataPropertyChangeListener:function(Z,l,c){this._35I.add(Z,l,c)},removeDataPropertyChangeListener:function(X,D){this._35I.remove(X,D)},_38I:function(u,D,W){this._37I&&this._37I.fire({data:u,oldIndex:D,newIndex:W})},addHierarchyChangeListener:function(z,n,U){this._37I||(this._37I=new _p),this._37I.add(z,n,U)},removeHierarchyChangeListener:function(j,p){this._37I.remove(j,p)},getSiblings:function(b){var R=b._parent;return R?R._children:this._roots},eachByDepthFirst:function(O,N,j){if(N)this._11I(O,N,j);else for(var D=0,V=this._roots,T=V.size();T>D;D++)if(this._11I(O,V.get(D),j)===!1)return},_11I:function(S,G,Q){for(var $=G.size(),m=0;$>m;m++)if(this._11I(S,G.getChildAt(m),Q)===!1)return!1;if(Q){if(S.call(Q,G)===!1)return!1}else if(S(G)===!1)return!1;return!0},eachByBreadthFirst:function(r,z,q){var S=new rn;for(z?S.add(z):this._roots.each(S.add,S);S.size()>0;)if(z=S.removeAt(0),z.eachChild(S.add,S),q){if(r.call(q,z)===!1)return!1}else if(r(z)===!1)return!1;return!0},moveTo:function(y,T){var x=this.getSiblings(y),o=x.indexOf(y);o===T||0>o||T>=0&&T<=x.size()&&(x.remove(y),T>x.size()&&T--,x.add(y,T),this._38I(y,o,T))},moveUp:function(q){this.moveTo(q,this.getSiblings(q).indexOf(q)-1)},moveDown:function(x){this.moveTo(x,this.getSiblings(x).indexOf(x)+1)},moveToTop:function(D){this.moveTo(D,0)},moveToBottom:function(D){this.moveTo(D,this.getSiblings(D).size())},moveSelectionUp:function(u){u||(u=this.sm());var T=new rn;Ii(u,T,this._roots),T.each(this.moveUp,this)},moveSelectionDown:function(z){z||(z=this.sm());var E=new rn;We(z,E,this._roots),E.each(this.moveDown,this)},moveSelectionToTop:function(x){x||(x=this.sm());var d=new rn;jl(x,d,this._roots),d.each(this.moveToTop,this)},moveSelectionToBottom:function(Z){Z||(Z=this.sm());var W=new rn;Co(Z,W,this._roots),W.each(this.moveToBottom,this)},addScheduleTask:function(t){var O=this;O.removeScheduleTask(t),t.enabled==U&&(t.enabled=!0),t.interval==U&&(t.interval=10),t.action==U&&(t.action=Qj),t.lastTime=Date.now(),O._29Q.push(t),O._30Q==U&&(O._30Q=V.requestAnimationFrame(O._scheduleCallback))},removeScheduleTask:function(p){var P=this,s=P._29Q,l=s.indexOf(p);l>=0&&s.splice(l,1),s.length||P._30Q==U||(V.cancelAnimationFrame(P._30Q),delete P._30Q)}});var yg=e.SelectionModel=function(O){var X=this;X._68O=B,X._map={},X._73O=new rn,X._74I=new _p,X._21I(O)};Oo("SelectionModel",O,{ms_fire:1,ms_dm:1,ms:function(B,s,d){this.addSelectionChangeListener(B,s,d)},ums:function(m,s){this.removeSelectionChangeListener(m,s)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===m},co:function(I){return this._map[I._id]!=U},ss:function(y){this.setSelection(y)},as:function(z){this.appendSelection(z)},rs:function(v){this.removeSelection(v)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(d){var j=this;if(j._68O!==d&&(d===Zi||d===m||d===B)){j.cs();var J=j._68O;j._68O=d,j.fp("selectionMode",J,d)}},_21I:function(b){var q=this,a=q._dataModel;a!==b&&(a&&(q.cs(),a.umm(q.handleDataModelChange,q)),q._dataModel=b,b.mm(q.handleDataModelChange,q,!0),q.fp(Pn,a,b))},dispose:function(){var Y=this;Y.cs(),Y._dataModel.umm(Y.handleDataModelChange,Y)},handleDataModelChange:function(F){var w=this;if(F.kind===fo){var M=F.data;w.co(M)&&(w._73O.remove(M),delete w._map[M._id],w._75I(fo,new rn(M)))}else F.kind===eh&&w.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(X){var k=this;if(k._filterFunc!==X){k.cs();var s=k._filterFunc;k._filterFunc=X,k.fp("filterFunc",s,k._filterFunc)}},_75I:function(q,V,b,U){b&&(this._73O.each(function(R){U[R._id]?b.remove(R):b.add(R)}),V=b.toList()),this._74I.fire({kind:q,datas:new rn(V)})},addSelectionChangeListener:function(c,M,Z){this._74I.add(c,M,Z)},removeSelectionChangeListener:function(b,s){this._74I.remove(b,s)},_97O:function(K,x){for(var o,m=this,J=0,V=new rn(K);J<V.size();J++)o=V.get(J),(m._filterFunc&&!m._filterFunc(o)||x&&m.co(o)||!x&&!m.co(o)||!m._dataModel.contains(o))&&(V.removeAt(J),J--);return V},appendSelection:function(U){var K=this;if(K._68O!==Zi){var Y,v,X=K._73O,d=K._97O(U,!0);d.isEmpty()||(K.sg()&&(Y=new rn(X),v=K._map,X.clear(),K._map={},d=new rn(d.get(d.size()-1))),d.each(function($){X.add($),K._map[$._id]=$}),K._75I("append",d,Y,v))}},removeSelection:function(D){var E=this,h=E._97O(D),u=0,X=h.size();if(0!==X){for(;X>u;u++){var U=h.get(u);E._73O.remove(U),delete E._map[U._id]}E._75I(fo,h)}},toSelection:function(Z,W){return this._73O.toList(Z,W)},getSelection:function(){return this._73O},each:function(h,J){this._73O.each(h,J)},setSelection:function(m){var $=this,t=$._73O;if($._68O!==Zi&&!(t.isEmpty()&&!m||1===t.size()&&$.ld()===m)){var e=new rn(t),x=$._map;t.clear(),$._map={};var z=$._97O(m,!0);$.sg()&&z.size()>1&&(z=new rn(z.get(z.size()-1))),z.each(function(x){t.add(x),$._map[x._id]=x}),$._75I("set",U,e,x)}},clearSelection:function(){var V=this,x=V._73O;if(x.size()>0){var A=x.toList();x.clear(),V._map={},V._75I(eh,A)}},selectAll:function(){var N=this;if(N._68O!==Zi){var X,i,k=N._dataModel.toDatas();if(N._filterFunc)for(X=0;X<k.size();X++)i=k.get(X),N._filterFunc(i)||(k.removeAt(X),X--);var r=N._73O,I=new rn(r),S=N._map;r.clear(),N._map={},N.sg()&&k.size()>1&&(k=new rn(k.get(k.size()-1)));var d=k.size();for(X=0;d>X;X++)i=k.get(X),r.add(i),N._map[i._id]=i;N._75I("all",U,I,S)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(K){return this._map[K._id]!=U},getLastData:function(){var L=this._73O;return L.size()>0?L.get(L.size()-1):U},getFirstData:function(){var F=this._73O;return F.size()>0?F.get(0):U},isSelectable:function(G){var f=this;return G&&f._68O!==Zi?f._filterFunc?f._filterFunc(G):!0:!1}}),pr(C,{edgeGroupAgentFunc:U,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:j.rectSelectBorder,graphViewRectSelectBackground:hf,graphViewEditPointSize:K?17:7,graphViewEditPointBorderColor:j.editPointBorder,graphViewEditPointBackground:j.editPointBackground,setEdgeType:function(g,T,u){ug[g]=T,Hk[g]=u},getEdgeType:function(I){return ug[I]}},!0),pr(d,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":H,"image.stretch":"fill",icons:H,ingroup:!0,"body.color":H,opacity:H,pixelPerfect:!0,"select.color":_d,"select.width":1,"select.padding":2,"select.type":Zo,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":_d,"border.color":H,"border.width":2,"border.padding":2,"border.type":Zo,label:H,"label.font":H,"label.color":fj,"label.background":H,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":H,"label.max":H,"label.opacity":H,"label.scale":1,"label.align":H,label2:H,"label2.font":H,"label2.color":fj,"label2.background":H,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":H,"label2.max":H,"label2.opacity":H,"label2.scale":1,"label2.align":H,note:H,"note.expanded":!0,"note.font":H,"note.color":Hc,"note.background":_d,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":H,"note.toggleable":!0,"note.border.width":1,"note.border.color":H,"note.opacity":H,"note.scale":1,"note.align":H,note2:H,"note2.expanded":!0,"note2.font":H,"note2.color":Hc,"note2.background":_d,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":H,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":H,"note2.opacity":H,"note2.scale":1,"note2.align":H,"group.type":H,"group.image":H,"group.image.stretch":"fill","group.repeat.image":H,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":H,"group.title.color":Hc,"group.title.background":j.groupTitleBackground,"group.title.align":nd,"group.background":j.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":H,"group.border.color":Ec,"group.border.cap":Eo,"group.border.join":rj,"group.gradient":U,"group.gradient.color":"#FFF",shape:H,"shape.background":Ec,"shape.repeat.image":H,"shape.border.width":0,"shape.border.color":Ec,"shape.border.3d":!1,"shape.border.3d.color":H,"shape.border.3d.accuracy":H,"shape.border.cap":Eo,"shape.border.join":rj,"shape.border.pattern":H,"shape.gradient":U,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":fk,"shape.dash.offset":0,"shape.dash.color":Ik,"shape.dash.width":H,"shape.dash.3d":!1,"shape.dash.3d.color":H,"shape.dash.3d.accuracy":H,"shape.polygon.side":6,"shape.arc.from":G,"shape.arc.to":_,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":H,"edge.type":H,"edge.points":H,"edge.segments":H,"edge.color":Ec,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":H,"edge.3d.accuracy":H,"edge.cap":Eo,"edge.join":rj,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":H,"edge.dash":!1,"edge.dash.pattern":fk,"edge.dash.offset":0,"edge.dash.color":Ik,"edge.dash.width":H,"edge.dash.3d":!1,"edge.dash.3d.color":H,"edge.dash.3d.accuracy":H,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":H,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":H,"grid.column.percents":H,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":j.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":j.gridCellBorderColor,"grid.block":H,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":j.gridBlockColor},!0),pr(Br,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(d){this._5I=d},_76I:function(B,G,I){this._39I&&this._39I.fire({data:B,oldIndex:G,newIndex:I})},addIndexChangeListener:function(T,e,J){var y=this;y._39I||(y._39I=new _p),y._39I.add(T,e,J)},removeIndexChangeListener:function(I,b){this._39I.remove(I,b)},prepareRemove:function(H){ns(H)&&(H.setSource(U),H.setTarget(U)),H._70O&&H._70O.toList().each(this.remove,this),H._69O&&H._69O.toList().each(function(i){i.setHost(U)}),H._host&&H.setHost(U)},onAdded:function(Y){this.isAutoAdjustIndex()&&this._76O(Y)},onDataPropertyChanged:function(g,V){di[V.property]&&this.isAutoAdjustIndex()&&this._76O(g)},isAdjustable:function(B){return Fm(B)||ns(B)},isAdjustedToBottom:function(u){return $e(u)?u.isExpanded()&&gn(u):!1},_76O:function(h){var $=this;$.isAdjustedToBottom(h)?($.sendToBottom(h),h.eachChild($._76O,$)):$.sendToTop(h)},sendToTop:function(q){var u=this;if(u.contains(q)&&u.isAdjustable(q)){var o=u._datas;if(q!==o.get(u.size()-1)){var i=o.indexOf(q);o.removeAt(i),o.add(q),u._76I(q,i,u.size()-1)}if(ns(q)){var W=q._40I;W&&!u.isAdjustedToBottom(W)&&u.sendToTop(W),W=q._41I,W&&!u.isAdjustedToBottom(W)&&u.sendToTop(W)}q._69O&&q._69O.each(function(E){E.isRelatedTo(q)||Fm(q)&&E.isLoopedHostOn(q)||u.sendToTop(E)}),q.ISubGraph||(!$e(q)||q.isExpanded())&&q._adjustChildrenToTop&&q.eachChild(function(Y){ns(Y)||u.sendToTop(Y)})}},sendToBottom:function(l,M){var V=this;if(l!==M&&V.contains(l)&&V.isAdjustable(l)&&(!M||V.contains(M))){var E=V._datas,R=E.remove(l),K=M?V._datas.indexOf(M):0;if(E.add(l,K),R!==K){V._76I(l,R,K);var s=l._parent;!s||s.ISubGraph||ns(s)||V.sendToBottom(l._parent,l)}}}}),pr(Cj,{ms_edit:function(B){B._46O=function(T){var $=this,X=$.gv.dm(),W=X.getHistoryManager(),o=$._index,P=$._89I,l=$._node,Z=$._shape,x=$._edge,p=$._77I;l&&P?(this.fi({kind:"endEditRect",event:T,data:l,direction:P}),W&&W.endInteraction()):Z&&o>=0?($.fi({kind:"endEditPoint",event:T,data:Z,index:o}),W&&W.endInteraction()):x&&o>=0?($.fi({kind:"endEditPoint",event:T,data:x,index:o}),W&&W.endInteraction()):p&&($.fi({kind:"endEditRotation",event:T,data:p}),W&&W.endInteraction())},B._78I=function(F){var d=this;d.autoScroll(F);var n=d.gv.lp(F),L=d._index,w=d._89I,K=d._node,J=d._shape,f=d._edge,V=d._77I;if(K&&w)d._80O(n),d.fi({kind:"betweenEditRect",event:F,data:K,direction:w});else if(J&&L>=0)n.e=J.getPoints().get(L).e,J.setPoint(L,n),d.fi({kind:"betweenEditPoint",event:F,data:J,index:L});else if(f&&L>=0){var Y=f.s(lp);n.e=Y.get(L).e,Y.set(L,n),f.fp(lp,U,Y),d.fi({kind:"betweenEditPoint",event:F,data:f,index:L})}else if(V){var E=V.p(),S=Q+v(n.y-E.y,n.x-E.x);g(S)<.04&&(S=0),V.setRotation(S),d.fi({kind:"betweenEditRotation",event:F,data:V})}},B._80O=function(Z){var a=this,p=a._rect,N=p.x,H=p.y,n=p.width,K=p.height,c=a._89I;"northwest"===c?p=xd(Z,{x:N+n,y:H+K}):c===rd?p=xd({x:N,y:Z.y},{x:N+n,y:H+K}):"northeast"===c?p=xd({x:N,y:Z.y},{x:Z.x,y:H+K}):c===vc?p=xd({x:Z.x,y:H},{x:N+n,y:H+K}):c===Uf?p=xd({x:N,y:H},{x:Z.x,y:H+K}):"southwest"===c?p=xd({x:Z.x,y:H},{x:N+n,y:Z.y}):"south"===c?p=xd({x:N,y:H},{x:N+n,y:Z.y}):"southeast"===c&&(p=xd({x:N,y:H},Z)),a._node.setRect(p)},B._80I=function($,H,q,e,X){var Y=this,I=Y.gv.getEditPointSize()+2;return Xp({x:H-I/2,y:q-I/2,width:I,height:I},$)?(Y._89I!==e&&(Y.setCursor(X),Y._89I=e),!0):!1},B._79I=function(R,n,e){var L=this,g=L.gv,S=n?g.getDataUI(n):U,q=S?S._55O:U;if(q){var W,v,F,b=g.getEditPointSize()+2,w=g.lp(R);if(Fm(n)){if(q._56O&&Fm(n)&&(v=q._98o,Xp({x:v.x-b/2,y:v.y-b/2,width:b,height:b},w)))return L._77I=n,e&&L.fi({kind:"beginEditRotation",event:R,data:n}),L.setCursor("crosshair"),!0;if(q._43O&&n instanceof Qn)for(F=n.getPoints(),W=F.size()-1;W>=0;W--)if(v=F.get(W),Xp({x:v.x-b/2,y:v.y-b/2,width:b,height:b},w))return L._index=W,L._shape=n,e&&L.fi({kind:"beginEditPoint",event:R,data:n,index:W}),L.setCursor("crosshair"),!0;if(q._42O){var u=n.getRect(),A=u.x,D=u.y,k=u.width,O=u.height;if(L._80I(w,A,D,"northwest","nwse-resize")||L._80I(w,A+k/2,D,rd,Yg)||L._80I(w,A+k,D,"northeast","nesw-resize")||L._80I(w,A,D+O/2,vc,Er)||L._80I(w,A+k,D+O/2,Uf,Er)||L._80I(w,A,D+O,"southwest","nesw-resize")||L._80I(w,A+k/2,D+O,"south",Yg)||L._80I(w,A+k,D+O,"southeast","nwse-resize"))return L._node=n,L._rect=n.getRect(),e&&L.fi({kind:"beginEditRect",event:R,data:n,direction:L._89I}),!0}}if(q._43O&&ns(n)&&n.s(Dp)===Sq&&(F=n.s(lp)))for(W=F.size()-1;W>=0;W--)if(v=F.get(W),Xp({x:v.x-b/2,y:v.y-b/2,width:b,height:b},w))return L._index=W,L._edge=n,e&&L.fi({kind:"beginEditPoint",event:R,data:n,index:W}),L.setCursor("crosshair"),!0}return!1}},ms_gv:function(O){O._currentSubGraph=U,O.upSubGraph=function(){this.setCurrentSubGraph(Hh(this._currentSubGraph))},O.isVisible=function(n){var b=this;if(Hh(n)!==b._currentSubGraph)return!1;if(ns(n)){var B=n._40I,p=n._41I;if(!B||!p)return!1;if(!(n.s("edge.independent")||b.isVisible(B)&&b.isVisible(p)))return!1;if(n.isEdgeGroupHidden())return!1}else for(var f=n._parent;f&&!f.ISubGraph;){if($e(f)&&(!f.isExpanded()||!b.isVisible(f)))return!1;f=f._parent}if(b instanceof db){if(!n.s("3d.visible"))return!1}else if(!n.s("2d.visible"))return!1;return b._visibleFunc?b._visibleFunc(n):!0},O._16o=function(v){var M=this;v.datas.each(function(i){M.invalidateData(i);var U=i._parent;$e(U)&&Fm(i)&&i.s(Ff)&&(M.invalidateData(U),U._49I&&U._49I.each(function(V){M.invalidateData(V)}))}),M.onSelectionChanged(v)},O.onSelectionChanged=function(n){var w=this,M=w.sm();if(1===M.size()&&("set"===n.kind||"append"===n.kind)){var A=M.ld();w.isAutoMakeVisible()&&w.makeVisible(A),w._76O&&w._dataModel.isAutoAdjustIndex()&&w._76O(A)}},O.makeVisible=function(d){if(d){var D=this,Y=D.getDataUI?D.getDataUI(d):D.getData3dUI(d);if(Y){var W=d,E=Hh(d);for(E!==D._currentSubGraph&&D.setCurrentSubGraph(E);(W=W._parent)&&W!==E;)$e(W)&&W.setExpanded(!0);D._23I=d,D.iv()}}},O.getLabel=function(Z){var E=Z.getStyle(Cl);return E===H?Z.getName():E},O.getLabelBackground=function(O){return O.getStyle("label.background")},O.getLabelColor=function(T){return T.getStyle("label.color")},O.getLabel2=function(C){return C.getStyle("label2")},O.getLabel2Background=function(H){return H.getStyle("label2.background")},O.getLabel2Color=function(R){return R.getStyle("label2.color")},O.getNote=function(P){return P.getStyle(yc)},O.getNoteBackground=function(F){return F.getStyle("note.background")},O.getNote2=function(Y){return Y.getStyle(Lr)},O.getNote2Background=function(Y){return Y.getStyle("note2.background")},O.handleClick=function(Y,U,k){var r=this;U?(r.fi({kind:"clickData",event:Y,data:U,part:k}),r.onDataClicked(U,Y)):(r.fi({kind:"clickBackground",event:Y}),r.onBackgroundClicked(Y))},O.handleDoubleClick=function(L,d,U){var t=this;cf(L)&&(d?(t.fi({kind:"doubleClickData",event:L,data:d,part:U}),t.onDataDoubleClicked(d,L,U),t.checkDoubleClickOnNote(L,d,U)||t.checkDoubleClickOnRotation&&t.checkDoubleClickOnRotation(L,d,U)||(ns(d)?t.onEdgeDoubleClicked(d,L,U):d.ISubGraph?t.onSubGraphDoubleClicked(d,L,U):$e(d)?t.onGroupDoubleClicked(d,L,U):d.IDoorWindow?t.onDoorWindowDoubleClicked(d,L,U):d.ICSGBox&&t.onCSGBoxDoubleClicked(d,L,U))):(t.fi({kind:"doubleClickBackground",event:L}),t.onBackgroundDoubleClicked(L)))},O.onSubGraphDoubleClicked=function(D){this.setCurrentSubGraph(D)},O.onEdgeDoubleClicked=function(J,N){J.ISubGraph&&!Op(N)?this.setCurrentSubGraph(J):J.s("edge.toggleable")&&J.toggle()},O.onGroupDoubleClicked=function(Q){Q.s("group.toggleable")&&Q.toggle()},O.onDoorWindowDoubleClicked=function(u){u.s("dw.toggleable")&&u.toggle(!0)},O.onCSGBoxDoubleClicked=function(z,E){var c=this;if(c instanceof db){var r=c.getHitFaceInfo(E);r&&r.face&&z.s(r.face+".toggleable")&&z.toggleFace(r.face,!0)}},O.onBackgroundClicked=function(){},O.onBackgroundDoubleClicked=function(){this.upSubGraph()},O.onDataClicked=function(){},O.onDataDoubleClicked=function(){},O.onAutoLayoutEnded=function(){},O.onMoveEnded=function(){},O.onPanEnded=function(){},O.onPinchEnded=function(){},O.onRectSelectEnded=function(){},O.onZoomEnded=function(){}},ms_icons:function(I){I.getRotation=function(h){return h==U?0:h},I._15O=function(){var F=this,w=F.s(ai);if(w){var R=F,k=F.data||F._data,N=F._38o={icons:w,rects:{}};for(var E in w){var Y=w[E],L=un(Y.shape3d,k,R);if(!(un(Y.visible,k,R)===!1||un(Y.for3d,k,R)&&!F.I3d||L&&!F.I3d)){var $=L?[L]:un(Y.names,k,R),C=$?$.length:0,p=un(Y.position,k,R)||3,f=un(Y.offsetX,k,R)||0,s=un(Y.offsetY,k,R)||0,d=un(Y.direction,k,R)||Uf,v=un(Y.gap,k,R),n=v!=U?v:1,c=un(Y.rotation,k,R),Z=un(Y.keepOrien,k,R),D=un(Y.rotationFixed,k,R)?c:F.getRotation(c,Z,p),h=U,V=N.rects[E]=new Array(C);V.rotation=D;for(var W=0;C>W;W++){var J,m,l,o,P=$[W];if(L)l=0,o=0;else{var I=Kf(P);l=un(Y.width,k,R),o=un(Y.height,k,R),l==U&&(l=Sb(I,k)),o==U&&(o=sd(I,k))}if(h?d===Uf?f+=l/2:d===vc?f-=l/2:d===rd?s-=o/2:s+=o/2:h={width:l,height:o},F.I3d){var M=-l/2,b=-o/2;m={width:l,height:o,mat:F._16O(un(Y.autorotate,k,R),p,h,un(Y.face,k,R)||q,un(Y.t3,k,R),un(Y.r3,k,R),un(Y.rotationMode,k,R),f,s),vs:new sp([M,-b,0,M,-b-o,0,M+l,-b-o,0,M+l,-b,0])}}else J=F.getPosition(p,f,s,h,un(Y.positionFixed,k,R)),m={x:J.x-l/2,y:J.y-o/2,width:l,height:o},F._68o(m,D);V[W]=m,d===Uf?f+=l/2+n:d===vc?f-=l/2+n:d===rd?s-=o/2+n:s+=o/2+n}}}}}}});var xq={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Vo={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Vq={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},di={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Ln={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},Or={"edge.type":1,"edge.group":1},dn={rotation:1,rotationX:1,rotationZ:1},Bb={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},xo={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},cb={shape:1,thickness:1,position:1},Pc=function(J,$){if(!J||!$e($)||$.isEmpty())return!1;for(J=J._parent;$e(J);){if(J===$)return!0;J=J._parent}return!1},Hh=function(G){if(!G)return U;if(ns(G)){var x=G._40I,h=G._41I;if(!x||!h)return U;var F=Hh(x),J=Hh(h);return F===J?F:U}for(var $=G._parent;ns($)&&!$.ISubGraph;)$=$._parent;return $?$.ISubGraph?$:Hh($):U},zc=function(h,E,j,G){var _=E.getStyle(j)*G;_&&xg(h,_),_=E.getStyle(j+".left")*G,_&&(h.x-=_,h.width+=_),_=E.getStyle(j+".right")*G,_&&(h.width+=_),_=E.getStyle(j+".top")*G,_&&(h.y-=_,h.height+=_),_=E.getStyle(j+".bottom")*G,_&&(h.height+=_),h.width<0&&(h.width=-h.width,h.x-=h.width),h.height<0&&(h.height=-h.height,h.y-=h.height)},gn=function(G){for(var b,x=0,C=G.size();C>x;x++)if(b=G.getChildAt(x),Fm(b)&&gn(b))return!0;return G.hasAgentEdges()},Yb=function(W){if(!W)return U;for(var n=W._parent;$e(n);){if(!$e(n._parent))return n.isExpanded()?W:n;n.isExpanded()||(W=n),n=n._parent}return W},ti=function(v,z){if(!v||!z)return U;var O,H,r,W=Hh(v),_=Hh(z);if(W!==_){for(;_&&W!==_;)_=Hh(_);if(W===_)return v;O=new rn,O.add(v,0);for(var R=v._parent;Fm(R)&&!z.isDescendantOf(R);)O.add(R,0),R=R._parent;for(r=O.size(),H=0;r>H;H++){var K=O.get(H);if($e(K)&&!K.isExpanded())return K;if(K.ISubGraph)return K}return v}return v},im=function(J){if(J.isLooped())return J._source;var A=Yb(J._source),q=Yb(J._target);return A===q?J._source:ti(A,q)},Hi=function(w){if(w.isLooped())return w._target;var N=Yb(w._source),r=Yb(w._target);return N===r?w._target:ti(r,N)},wd=function(o,J){var U;if($e(J)&&J.isExpanded()){var I=o.getDataUI(J);I&&I._88I&&(U=I._88I.rect)}return U?U:J.getRect()},rr=function(M,X,I,u,k){return X?(I=eg(I,wd(M,X)),I.x+=u,I.y+=k,I):U},sf=function(S,J){if(!S||!J)return U;var O,q,N,g,o,X;if(S===J){if(g=S.getLoopedEdges(),!g)return U;g=new rn(g)}else{if(o=S.getAgentEdges(),X=J.getAgentEdges(),!o||!X)return U;for(q=o.size(),O=0;q>O;O++)N=o.get(O),X.contains(N)&&(g||(g=new rn),g.add(N))}if(g)for(O=0;O<g.size();O++)N=g.get(O),N.getStyle(Dp)===Sq&&(N._22I(U),g.removeAt(O),O--);return g},wf=function(b,h){var m=sf(b,h);if(m&&!m.isEmpty()){if(1===m.size())return m.get(0)._22I(U),void 0;var c=new rn,S=new rn;m.each(function(r){var i=r.s("edge.group");c.contains(i)||c.add(i)}),c.sort(),c.each(function(T){S.add(new e.EdgeGroup(m.toList(function(c){return T===c.s("edge.group")}),S))}),S.each(function(m){m.each(function(q){q._22I(m)})})}},Mn=function(s,w){if(w){var l=w.rect,k=w.color,a=w.rotation,n=w.labelWidth,R=w.background,B=w.opacity,h=w.scale,I=h!=U&&1!==h;if(B!=U){var V=s.globalAlpha;s.globalAlpha*=B}if(a||I){s.save();var F=l.x+l.width/2,z=l.y+l.height/2;kk(s,F,z),a&&_f(s,a),I&&s.scale(h,h),kk(s,-F,-z)}if(R&&rf(s,l.x,l.y,l.width,l.height,R),n){var M=l.width,L=s.createLinearGradient(l.x,l.y,l.x+M,l.y);L.addColorStop(0,k),L.addColorStop(.9,k),L.addColorStop(1,Bq),k=L,l.width=n}Ve(s,w.ss,l,w.font,k,w.align),n&&(l.width=M),(a||I)&&s.restore(),B!=U&&(s.globalAlpha=V)}},Jh=function(X,e){if(e){var b=e.rect,m=b.x,J=b.y,j=b.width,s=b.height,f=e.background,K=e.backgroundImage,h=e.borderWidth,p=e.borderColor,z=e.labelWidth,x=e.opacity,o=e.scale,n=o!=U&&1!==o;if(x!=U){var S=X.globalAlpha;X.globalAlpha*=x}if(n){X.save();var L=b.x+b.width/2,c=b.y+b.height/2;kk(X,L,c),X.scale(o,o),kk(X,-L,-c)}if(e.expanded){var A=Y(8,j/4),T=J+s-8;if(X.fillStyle=f,X.beginPath(),X.moveTo(m,J),X.lineTo(m,T),X.lineTo(m+j/2,T),X.lineTo(m+j/2,J+s),X.lineTo(m+j/2+A,T),X.lineTo(m+j,T),X.lineTo(m+j,J),X.closePath(),X.fill(),h&&(X.lineWidth=h,X.lineJoin="round",X.lineCap="round",X.strokeStyle=p?p:Yl(f),X.beginPath(),X.moveTo(m+j,J),X.lineTo(m+j,T),X.lineTo(m+j/2+A,T),X.lineTo(m+j/2,J+s),X.stroke(),X.strokeStyle=p?p:_l(f),X.beginPath(),X.moveTo(m+j,J),X.lineTo(m,J),X.lineTo(m,T),X.lineTo(m+j/2,T),X.lineTo(m+j/2,J+s),X.stroke()),K)Wc(X,Kf(K),ir,b.x,b.y,b.width,b.height-8,e.data,e.view);else{if(b.height-=8,f=e.color,z){var E=j,w=X.createLinearGradient(m,J,m+E,J);w.addColorStop(0,f),w.addColorStop(.9,f),w.addColorStop(1,Bq),f=w,b.width=z}Ve(X,e.ss,b,e.font,f,e.align),z&&(b.width=E),b.height+=8}}else if(e.icon)np(X,Kf(e.icon),m,J,j,s,e.data,e.view);else{var k=j/2;h&&(X.lineWidth=h,X.lineJoin="round",X.lineCap="round",X.strokeStyle=p?p:Yl(f),X.beginPath(),X.arc(m+k,J+k,k,Q,1.6*G,!0),X.moveTo(m+k,J+s),X.lineTo(m+j-k/5,J+k),X.stroke(),X.strokeStyle=p?p:_l(f),X.beginPath(),X.arc(m+k,J+k,k,1.6*G,Q,!0),X.moveTo(m+k,J+s),X.lineTo(m+k/5,J+k),X.stroke()),X.fillStyle=f,X.beginPath(),X.arc(m+k,J+k,k,0,_,!0),X.moveTo(m+k,J+s),X.lineTo(m+j-k/5,J+k),X.lineTo(m+k/5,J+k),X.closePath(),X.fill(),X.fillStyle=e.color,X.beginPath(),X.arc(m+k,J+k,k/3,0,_,!0),X.fill()}n&&X.restore(),x!=U&&(X.globalAlpha=S)}},ph=function(G,u){return u>2*G?G:u/2},lc=function(H,z,L,E){if(!H||!z)return 0;var l=v(z.y-H.y,z.x-H.x);return L||(l=z.x<H.x?l+G:l),l+E},uf=function(u,J,A,Q,r,i,X){X&&(u.x>J.x||u.x===J.x&&u.y>J.y)&&(A=Fq[A],r=-r);var O=eg(A,{x:0,y:0,width:Qh(u,J),height:0},i);return O.x+=Q,O.y+=r,O=new Pq(v(J.y-u.y,J.x-u.x)).tf(O),O.x+=u.x,O.y+=u.y,O},ig=function(z,K,D,k,U){if(z._19Q=!0,!D.getEdgeGroup())return k?D.s("edge.gap"):0;var d,h=0,t=0,S=0;if(D.getEdgeGroup().getSiblings().each(function(x){x.each(function(O){if(K.isVisible(O)&&O.s(Dp)==U){var M=O.s("edge.gap");d?(t+=S/2+M/2,S=M):(d=O,S=M),O===D&&(h=t)}})}),k)return t-h+S;var c=h-t/2;return d&&D._40I!==d._40I&&(z._19Q=!1),c},cc=function(){var G=function($){var t=[];return $.forEach(function(o){t.push({x:o.x,y:o.y}),t.push({x:o.x+o.width,y:o.y+o.height}),t.push({x:o.x+o.width,y:o.y}),t.push({x:o.x,y:o.y+o.height})}),t};return function(p,N,L){if("oval"===p){var b=0,C=L.height/L.width,D=C*C,g=L.x+L.width/2,S=L.y+L.height/2,H=G(N);H.forEach(function(n){var V=n.x-g,q=n.y-S,B=V*V+q*q/D;B>b&&(b=B)}),b=o(b);var R=C*b;return{x:g-b,y:S-R,width:2*b,height:2*R}}if("circle"===p){var k=0,g=L.x+L.width/2,S=L.y+L.height/2,H=G(N);return H.forEach(function(F){var q=F.x-g,V=F.y-S,y=q*q+V*V;y>k&&(k=y)}),k=o(k),{x:g-k,y:S-k,width:2*k,height:2*k}}return"roundRect"===p?(xg(L,Y(L.width,L.height)/16),L):L}}(),_r=e.graph={},xj=function(V,o,m){ld($+".graph."+V,o,m)};e.layout={};var Up={comps:[{type:rb,points:[85,50,70,115,100,71,86,107,88,49,57,73,110,80,86,84,86,75,115,114,43,88,107,89,109,72,89,90,69,84,108,112,67,53,89,67,48,68,79,82,100,101,89,61],borderWidth:1,borderColor:U}]};Up[zl]=Up[Cn]=160,Si("node_image",yk(30,30,[{type:Zo,rect:[4,5,22,16],gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[2,3,26,20],borderWidth:1,borderColor:Ec},{type:Zo,rect:[11,23,8,4],background:Ec},{type:Zo,rect:[6,27,18,2],background:Ec}])),Si("node_icon",yk(16,16,[{type:Zo,rect:[2,2,12,10],gradient:Jk,gradientColor:$g,background:Ec},{type:Cr,rect:[2,2,12,10],width:1,color:Ec},{type:Zo,rect:[6,12,4,2],background:Ec},{type:Zo,rect:[4,14,8,1],background:Ec}])),Si("group_image",yk(66,39,[{type:Zo,rect:[44.3,18,18.1,12.8],gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[3.3,17.8,18.1,12.8],gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Ec,gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[26.2,29.4,12.8,4.2],background:Ec},{type:Zo,rect:[21.3,33.5,22.5,2.3],background:Ec},{type:Zo,rect:[5.3,32.7,14.1,2.1],background:Ec},{type:Zo,rect:[9,30.4,6.7,2.4],background:Ec},{type:Zo,rect:[50,30.7,6.7,2.4],background:Ec},{type:Zo,rect:[46.3,33,14.1,2.1],background:Ec}])),Si("group_icon",yk(16,16,[{type:Zo,rect:[4,12,4,2],background:Ec},{type:Zo,rect:[2,13,8,1],background:Ec},{type:Zo,rect:[12,12,2,1],background:Ec},{type:Zo,rect:[11,13,4,1],background:Ec},{type:Zo,rect:[10,7,6,5],gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[1,2,10,10],gradient:Jk,gradientColor:$g,background:Ec},{type:Cr,rect:[1,2,10,10],width:1,color:Ec}])),Si("edge_icon",yk(16,16,[{type:Zo,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[10.8,1,4,4],background:Ec},{type:Zo,rect:[1,11,4,4],background:Ec}])),Si("subGraph_image",yk(72,45,[{type:rb,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[29.6,30.7,3.6,1.8],background:Ec},{type:Zo,rect:[28.4,32.3,6,1.2],background:Ec},{type:Zo,rect:[37.3,32,10.8,1.8],background:Ec},{type:Zo,rect:[39.1,29.9,7.2,2.3],background:Ec},{type:Zo,rect:[26.6,23.7,9.6,7.2],gradient:Jk,gradientColor:$g,background:Ec},{type:Zo,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Ec,gradient:Jk,gradientColor:$g,background:Ec}])),Si("subGraph_icon",yk(17,17,[{type:rb,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Jk,gradientColor:$g,background:Ec}])),Si("shape_icon",yk(16,16,[{type:rb,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Ec}])),Si("polyline_icon",yk(16,16,[{type:rb,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Ec},_k(7.5,.4),_k(7.5,6.3),_k(13.6,6.3),_k(13.6,14),_k(.7,13.9),_k(.7,.3)])),Si("grid_icon",yk(16,16,[{type:Zo,rect:[1,1,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[6,1,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[11,1,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[11,6,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[6,6,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[1,6,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[11,11,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[6,11,4,4],background:Ec,gradient:Jk,gradientColor:$g},{type:Zo,rect:[1,11,4,4],background:Ec,gradient:Jk,gradientColor:$g}])),Si("light_icon",yk(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Ec},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Ec,gradient:Jk,gradientColor:$g,background:{func:function(M){var r=M?M.s(Ed):U;return bf(r)?"rgb("+D(255*r[0])+","+D(255*r[1])+","+D(255*r[2])+")":r||Ec}}}]));var $b=function(c,f){for(var F=c.vertices,M=0;M<F.length;M++){var s=F[M],V=s.y;s.y=s.z,s.z=-V,f&&(s.y+=f)}},Ho=function(O){for(var x,N,D,E,U,P,M=[],J=[],y=[],j=O.faces,z=0,_=0,u=0,f=j.length;f>z;z++,_+=6,u+=9){var A=j[z];1===A.i?(x||(x=[],N=[],D=[]),_m(A,z,_,u,O,x,D,N)):2===A.i?(E||(E=[],U=[],P=[]),_m(A,z,_,u,O,E,P,U)):_m(A,z,_,u,O,M,y,J)}return{vs:M,uv:J,ns:y,top_vs:x,top_uv:N,top_ns:D,bottom_vs:E,bottom_uv:U,bottom_ns:P}},_m=function(L,b,s,_,P,c,N,G){var B=P.vertices,p=P.faceVertexUvs,g=B[L.a],C=B[L.b],m=B[L.c];c[_]=g.x,c[_+1]=g.y,c[_+2]=g.z,c[_+3]=C.x,c[_+4]=C.y,c[_+5]=C.z,c[_+6]=m.x,c[_+7]=m.y,c[_+8]=m.z;var W=L.vertexNormals;if(3===W.length){var S=W[0],f=W[1],a=W[2];N[_]=S.x,N[_+1]=S.y,N[_+2]=S.z,N[_+3]=f.x,N[_+4]=f.y,N[_+5]=f.z,N[_+6]=a.x,N[_+7]=a.y,N[_+8]=a.z
}else{var J=L.normal;N[_]=J.x,N[_+1]=J.y,N[_+2]=J.z,N[_+3]=J.x,N[_+4]=J.y,N[_+5]=J.z,N[_+6]=J.x,N[_+7]=J.y,N[_+8]=J.z}var H=p[0][b][0],k=p[0][b][1],Y=p[0][b][2];G[s]=H.x,G[s+1]=H.y,G[s+2]=k.x,G[s+3]=k.y,G[s+4]=Y.x,G[s+5]=Y.y},Ef=function(y,h,r,w,u,b,D,d,_){r==U&&(r=!0),w==U&&(w=!0),D==U&&(D=1),d==U&&(d=0);var B=new ol;return ko(B,y,h,_),Ho(new tl(B,{top:r,bottom:w,curveSegments:u,amount:D,repeatUVLength:b},-D/2+d))},Um=function(y,W){this.x=y||0,this.y=W||0};Um.prototype={constructor:Um,add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(d){return this.x-=d.x,this.y-=d.y,this},equals:function(Q){return Q.x===this.x&&Q.y===this.y},multiplyScalar:function(X){return this.x*=X,this.y*=X,this},distanceTo:function(g){return o(this.distanceToSquared(g))},distanceToSquared:function(S){var d=this.x-S.x,J=this.y-S.y;return d*d+J*J},clone:function(){return new Um(this.x,this.y)}};var gs=function(Q,q,n){this.x=Q||0,this.y=q||0,this.z=n||0};gs.prototype={constructor:gs,set:function(C,l,F){return this.x=C,this.y=l,this.z=F,this},setY:function(U){return this.y=U,this},copy:function(j){return this.x=j.x,this.y=j.y,this.z=j.z,this},add:function(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z,this},addVectors:function(X,F){return this.x=X.x+F.x,this.y=X.y+F.y,this.z=X.z+F.z,this},sub:function(k){return this.x-=k.x,this.y-=k.y,this.z-=k.z,this},subVectors:function(T,t){return this.x=T.x-t.x,this.y=T.y-t.y,this.z=T.z-t.z,this},multiplyScalar:function(v){return this.x*=v,this.y*=v,this.z*=v,this},applyMatrix4:function(e){var E=this.x,c=this.y,r=this.z,o=e.elements;return this.x=o[0]*E+o[4]*c+o[8]*r+o[12],this.y=o[1]*E+o[5]*c+o[9]*r+o[13],this.z=o[2]*E+o[6]*c+o[10]*r+o[14],this},divideScalar:function(n){if(0!==n){var P=1/n;this.x*=P,this.y*=P,this.z*=P}else this.x=0,this.y=0,this.z=0;return this},dot:function(G){return this.x*G.x+this.y*G.y+this.z*G.z},length:function(){return o(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(L){var N=this.x,_=this.y,F=this.z;return this.x=_*L.z-F*L.y,this.y=F*L.x-N*L.z,this.z=N*L.y-_*L.x,this},crossVectors:function(O,A){var Z=O.x,n=O.y,s=O.z,u=A.x,c=A.y,G=A.z;return this.x=n*G-s*c,this.y=s*u-Z*G,this.z=Z*c-n*u,this},distanceTo:function(W){return o(this.distanceToSquared(W))},distanceToSquared:function(G){var d=this.x-G.x,K=this.y-G.y,t=this.z-G.z;return d*d+K*K+t*t},clone:function(){return new gs(this.x,this.y,this.z)}};var ss=function(){this.elements=new Float32Array(16)};ss.prototype={constructor:ss,set:function(i,P,Q,J,G,V,h,E,l,Y,m,N,A,Z,K,v){var n=this.elements;return n[0]=i,n[4]=P,n[8]=Q,n[12]=J,n[1]=G,n[5]=V,n[9]=h,n[13]=E,n[2]=l,n[6]=Y,n[10]=m,n[14]=N,n[3]=A,n[7]=Z,n[11]=K,n[15]=v,this},makeRotationAxis:function(G,A){var c=r(A),e=h(A),V=1-c,f=G.x,R=G.y,w=G.z,u=V*f,I=V*R;return this.set(u*f+c,u*R-e*w,u*w+e*R,0,u*R+e*w,I*R+c,I*w-e*f,0,u*w-e*R,I*w+e*f,V*w*w+c,0,0,0,0,1),this}};var Qf=function(e){this.repeatUVLength=e};Qf.prototype={generateTopUV:function(v,H,R,t,E,D,L){var N,F,I,x,M=v.vertices,U=M[t].x,o=M[t].y,n=M[E].x,r=M[E].y,l=M[D].x,T=M[D].y,z=this.repeatUVLength;if(z)N=0,F=0,I=z,x=z;else{this._bb||(this._bb=H.getBoundingBox());var J=this._bb;N=J.minX,F=J.minY,I=J.maxX-N,x=J.maxY-F}return L?[new Um((U-N)/I,(o-F)/x),new Um((n-N)/I,(r-F)/x),new Um((l-N)/I,(T-F)/x)]:[new Um((U-N)/I,1-(o-F)/x),new Um((n-N)/I,1-(r-F)/x),new Um((l-N)/I,1-(T-F)/x)]},generateBottomUV:function(e,o,y,J,x,P){return this.generateTopUV(e,o,y,J,x,P,!0)},generateSideWallUV:function(d,N,U,w,V,B,g,F,K,v,s,M){if(!this._cl){for(var p,i,X=[],P=0,u=U.length,h=0;u>h;h++){p=U[h],i=U[(h+1)%u];var I=p.x-i.x,t=p.y-i.y,r=o(I*I+t*t);X.push(P),P+=r}for(var h=0;u>h;h++)X[h]/=P;this._cl=X}var X=this._cl,Q=1-K/v,e=1-(K+1)/v,L=X[s],z=X[M];return z>L&&(L+=1),[new Um(L,Q),new Um(z,Q),new Um(z,e),new Um(L,e)]}};var Qc=function(N,Z,Y,K,M,O){this.a=N,this.b=Z,this.c=Y,this.i=O,this.normal=K instanceof gs?K:new gs,this.vertexNormals=K instanceof Array?K:[]};Qc.prototype={constructor:Qc};var ij=function(){},Zn=ij.prototype;Zn.getPointAt=function(s){var A=this.getUtoTmapping(s);return this.getPoint(A)},Zn.getPoints=function(r){r||(r=5);var N,A=[];for(N=0;r>=N;N++)A.push(this.getPoint(N/r));return A},Zn.getSpacedPoints=function(w){w||(w=5);var o,L=[];for(o=0;w>=o;o++)L.push(this.getPointAt(o/w));return L},Zn.getLength=function(){var $=this.getLengths();return $[$.length-1]},Zn.getLengths=function(F){if(F||(F=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==F+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var p,f,q=[],n=this.getPoint(0),Q=0;for(q.push(0),f=1;F>=f;f++)p=this.getPoint(f/F),Q+=p.distanceTo(n),q.push(Q),n=p;return this.cacheArcLengths=q,q},Zn.getUtoTmapping=function(d,F){var I,h=this.getLengths(),n=0,c=h.length;I=F?F:d*h[c-1];for(var $,w=0,j=c-1;j>=w;)if(n=Z(w+(j-w)/2),$=h[n]-I,0>$)w=n+1;else{if(!($>0)){j=n;break}j=n-1}if(n=j,h[n]==I){var z=n/(c-1);return z}var G=h[n],K=h[n+1],b=K-G,B=(I-G)/b,z=(n+B)/(c-1);return z},Zn.getTangent=function(A){var X=1e-4,i=A-X,Z=A+X;0>i&&(i=0),Z>1&&(Z=1);var n=this.getPoint(i),Q=this.getPoint(Z),q=Q.clone().sub(n);return q.normalize()},Zn.getTangentAt=function(W){var H=this.getUtoTmapping(W);return this.getTangent(H)},ij.create=function(C,z){return C.prototype=bp(ij.prototype),C.prototype.getPoint=z,C};var vb=function(){this.curves=[],this.autoClose=!1},Ij=vb.prototype=bp(Zn);Ij.add=function(l){this.curves.push(l)},Ij.closePath=function(){var i=this.curves[0].getPoint(0),B=this.curves[this.curves.length-1].getPoint(1);i.equals(B)||this.curves.push(new Fr(B,i))},Ij.getPoint=function(X){for(var L,D,i=X*this.getLength(),o=this.getCurveLengths(),z=0;z<o.length;){if(o[z]>=i){L=o[z]-i,D=this.curves[z];var r=1-L/D.getLength();return D.getPointAt(r)}z++}return null},Ij.getLength=function(){var M=this.getCurveLengths();return M[M.length-1]},Ij.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var C,L=[],J=0,D=this.curves.length;for(C=0;D>C;C++)J+=this.curves[C].getLength(),L.push(J);return this.cacheLengths=L,L},Ij.getTransformedPoints=function(G){return this.getPoints(G)},Ij.getBoundingBox=function(){var L,A,p,o,v,K,X=this.getPoints();L=A=Number.NEGATIVE_INFINITY,o=v=Number.POSITIVE_INFINITY;var H,a,B,Z,s=X[0]instanceof gs;for(Z=s?new gs:new Um,a=0,B=X.length;B>a;a++)H=X[a],H.x>L&&(L=H.x),H.x<o&&(o=H.x),H.y>A&&(A=H.y),H.y<v&&(v=H.y),s&&(H.z>p&&(p=H.z),H.z<K&&(K=H.z)),Z.add(H);var y={minX:o,minY:v,maxX:L,maxY:A};return s&&(y.maxZ=p,y.minZ=K),y};var Rg=function(I){vb.call(this),this.actions=[],I&&this.fromPoints(I)},gh=Rg.prototype=bp(vb.prototype),Mf="moveTo",qh="lineTo",vp="quadraticCurveTo",Lp="bezierCurveTo",lq="arc",xm="ellipse";gh.fromPoints=function(z){this.moveTo(z[0].x,z[0].y);for(var B=1,Z=z.length;Z>B;B++)this.lineTo(z[B].x,z[B].y)},gh.moveTo=function(){var m=Array.prototype.slice.call(arguments);this.actions.push({action:Mf,args:m})},gh.lineTo=function(X,S){var A=Array.prototype.slice.call(arguments),t=this.actions[this.actions.length-1].args,I=t[t.length-2],z=t[t.length-1],V=new Fr(new Um(I,z),new Um(X,S));this.curves.push(V),this.actions.push({action:qh,args:A})},gh.quadraticCurveTo=function(w,V,m,I){var $=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,L=g[g.length-2],s=g[g.length-1],R=new Kr(new Um(L,s),new Um(w,V),new Um(m,I));this.curves.push(R),this.actions.push({action:vp,args:$})},gh.bezierCurveTo=function(G,P,B,h,i,n){var M=Array.prototype.slice.call(arguments),k=this.actions[this.actions.length-1].args,q=k[k.length-2],L=k[k.length-1],c=new up(new Um(q,L),new Um(G,P),new Um(B,h),new Um(i,n));this.curves.push(c),this.actions.push({action:Lp,args:M})},gh.arc=function(R,d,Y,l,p,b){var J=this.actions[this.actions.length-1].args,N=J[J.length-2],f=J[J.length-1];this.absarc(R+N,d+f,Y,l,p,b)},gh.absarc=function(r,U,t,s,x,I){this.absellipse(r,U,t,t,s,x,I)},gh.ellipse=function(A,f,s,O,M,z,r){var H=this.actions[this.actions.length-1].args,N=H[H.length-2],o=H[H.length-1];this.absellipse(A+N,f+o,s,O,M,z,r)},gh.absellipse=function(M,o,V,Z,z,i,R){var v=Array.prototype.slice.call(arguments),c=new ic(M,o,V,Z,z,i,R);this.curves.push(c);var j=c.getPoint(1);v.push(j.x),v.push(j.y),this.actions.push({action:xm,args:v})},gh.getSpacedPoints=function(n){n||(n=40);for(var q=[],X=0;n>X;X++)q.push(this.getPoint(X/n));return q},gh.getPoints=function(U,G){U=U||12;var Y,W,Q,k,R,a,I,_,n,B,c,L,K,z,D,i,e,H,y=[];for(Y=0,W=this.actions.length;W>Y;Y++)switch(Q=this.actions[Y],k=Q.action,R=Q.args,k){case Mf:y.push(new Um(R[0],R[1]));break;case qh:y.push(new Um(R[0],R[1]));break;case vp:for(a=R[2],I=R[3],B=R[0],c=R[1],y.length>0?(z=y[y.length-1],L=z.x,K=z.y):(z=this.actions[Y-1].args,L=z[z.length-2],K=z[z.length-1]),D=1;U>=D;D++)i=D/U,e=mk.b2(i,L,B,a),H=mk.b2(i,K,c,I),y.push(new Um(e,H));break;case Lp:for(a=R[4],I=R[5],B=R[0],c=R[1],_=R[2],n=R[3],y.length>0?(z=y[y.length-1],L=z.x,K=z.y):(z=this.actions[Y-1].args,L=z[z.length-2],K=z[z.length-1]),D=1;U>=D;D++)i=D/U,e=mk.b3(i,L,B,_,a),H=mk.b3(i,K,c,n,I),y.push(new Um(e,H));break;case lq:var t,l=R[0],E=R[1],N=R[2],w=R[3],d=R[4],A=!!R[5],J=d-w,M=2*U;for(D=1;M>=D;D++)i=D/M,A||(i=1-i),t=w+i*J,e=l+N*r(t),H=E+N*h(t),y.push(new Um(e,H));break;case xm:var t,l=R[0],E=R[1],T=R[2],x=R[3],w=R[4],d=R[5],A=!!R[6],J=d-w,M=2*U;for(D=1;M>=D;D++)i=D/M,A||(i=1-i),t=w+i*J,e=l+T*r(t),H=E+x*h(t),y.push(new Um(e,H))}var p=y[y.length-1],S=1e-10;return g(p.x-y[0].x)<S&&g(p.y-y[0].y)<S&&y.splice(y.length-1,1),G&&y.push(y[0]),y},gh.toShapes=function(N,h){function J(E){var f,l,k,K,i,P=[],a=new Rg;for(f=0,l=E.length;l>f;f++)k=E[f],i=k.args,K=k.action,K==Mf&&0!=a.actions.length&&(P.push(a),a=new Rg),a[K].apply(a,i);return 0!=a.actions.length&&P.push(a),P}function y(F){for(var l=[],e=0,D=F.length;D>e;e++){var L=F[e],k=new ol;k.actions=L.actions,k.curves=L.curves,l.push(k)}return l}function U(S,X){for(var d=1e-10,k=X.length,D=!1,A=k-1,Q=0;k>Q;A=Q++){var G=X[A],R=X[Q],n=R.x-G.x,M=R.y-G.y;if(g(M)>d){if(0>M&&(G=X[Q],n=-n,R=X[A],M=-M),S.y<G.y||S.y>R.y)continue;if(S.y==G.y){if(S.x==G.x)return!0}else{var H=M*(S.x-G.x)-n*(S.y-G.y);if(0==H)return!0;if(0>H)continue;D=!D}}else{if(S.y!=G.y)continue;if(R.x<=S.x&&S.x<=G.x||G.x<=S.x&&S.x<=R.x)return!0}}return D}var z=J(this.actions);if(0==z.length)return[];if(h===!0)return y(z);var X,m,e,q=[];if(1==z.length)return m=z[0],e=new ol,e.actions=m.actions,e.curves=m.curves,q.push(e),q;var a=!ol.Utils.isClockWise(z[0].getPoints());a=N?!a:a;var u,E=[],B=[],w=[],b=0;B[b]=H,w[b]=[];var D,C;for(D=0,C=z.length;C>D;D++)m=z[D],u=m.getPoints(),X=mk.isClockWise(u),X=N?!X:X,X?(!a&&B[b]&&b++,B[b]={s:new ol,p:u},B[b].s.actions=m.actions,B[b].s.curves=m.curves,a&&b++,w[b]=[]):w[b].push({h:m,p:u[0]});if(!B[0])return y(z);if(B.length>1){for(var Z=!1,v=[],n=0,k=B.length;k>n;n++)E[n]=[];for(var n=0,k=B.length;k>n;n++){B[n];for(var S=w[n],O=0;O<S.length;O++){for(var x=S[O],c=!0,A=0;A<B.length;A++)U(x.p,B[A].p)&&(n!=A&&v.push({froms:n,tos:A,hole:O}),c?(c=!1,E[A].push(x)):Z=!0);c&&E[n].push(x)}}v.length>0&&(Z||(w=E))}var j,l,K;for(D=0,C=B.length;C>D;D++)for(e=B[D].s,q.push(e),j=w[D],l=0,K=j.length;K>l;l++)e.holes.push(j[l].h);return q};var ol=function(){Rg.apply(this,arguments),this.holes=[]},Eq=ol.prototype=bp(gh);Eq.getPointsHoles=function(e){var Y,O=this.holes.length,R=[];for(Y=0;O>Y;Y++)R[Y]=this.holes[Y].getTransformedPoints(e);return R},Eq.extractAllPoints=function(M){return{shape:this.getTransformedPoints(M),holes:this.getPointsHoles(M)}},Eq.extractPoints=function(H){return this.extractAllPoints(H)};var mk={triangulateShape:function(L,X){function r(L,r,u){return L.x!=r.x?L.x<r.x?L.x<=u.x&&u.x<=r.x:r.x<=u.x&&u.x<=L.x:L.y<r.y?L.y<=u.y&&u.y<=r.y:r.y<=u.y&&u.y<=L.y}function Q(x,T,m,b,O){var u=1e-10,k=T.x-x.x,B=T.y-x.y,f=b.x-m.x,Z=b.y-m.y,N=x.x-m.x,z=x.y-m.y,L=B*f-k*Z,U=B*N-k*z;if(g(L)>u){var j;if(L>0){if(0>U||U>L)return[];if(j=Z*N-f*z,0>j||j>L)return[]}else{if(U>0||L>U)return[];if(j=Z*N-f*z,j>0||L>j)return[]}if(0==j)return!O||0!=U&&U!=L?[x]:[];if(j==L)return!O||0!=U&&U!=L?[T]:[];if(0==U)return[m];if(U==L)return[b];var S=j/L;return[{x:x.x+S*k,y:x.y+S*B}]}if(0!=U||Z*N!=f*z)return[];var C=0==k&&0==B,a=0==f&&0==Z;if(C&&a)return x.x!=m.x||x.y!=m.y?[]:[x];if(C)return r(m,b,x)?[x]:[];if(a)return r(x,T,m)?[m]:[];var w,X,t,d,D,K,p,M;return 0!=k?(x.x<T.x?(w=x,t=x.x,X=T,d=T.x):(w=T,t=T.x,X=x,d=x.x),m.x<b.x?(D=m,p=m.x,K=b,M=b.x):(D=b,p=b.x,K=m,M=m.x)):(x.y<T.y?(w=x,t=x.y,X=T,d=T.y):(w=T,t=T.y,X=x,d=x.y),m.y<b.y?(D=m,p=m.y,K=b,M=b.y):(D=b,p=b.y,K=m,M=m.y)),p>=t?p>d?[]:d==p?O?[]:[D]:M>=d?[D,X]:[D,K]:t>M?[]:t==M?O?[]:[w]:M>=d?[w,X]:[w,K]}function n(E,h,r,P){var J=1e-10,M=h.x-E.x,S=h.y-E.y,W=r.x-E.x,i=r.y-E.y,s=P.x-E.x,c=P.y-E.y,v=M*i-S*W,Q=M*c-S*s;if(g(v)>J){var x=s*i-c*W;return v>0?Q>=0&&x>=0:Q>=0||x>=0}return Q>0}function $(Y,R){function O(f,I){var x=e.length-1,Z=f-1;0>Z&&(Z=x);var X=f+1;X>x&&(X=0);var d=n(e[f],e[Z],e[X],M[I]);if(!d)return!1;var c=M.length-1,p=I-1;0>p&&(p=c);var K=I+1;return K>c&&(K=0),d=n(M[I],M[p],M[K],e[f]),d?!0:!1}function J(x,d){var m,R,Z;for(m=0;m<e.length;m++)if(R=m+1,R%=e.length,Z=Q(x,d,e[m],e[R],!0),Z.length>0)return!0;return!1}function t(L,O){var c,w,S,D,f;for(c=0;c<q.length;c++)for(w=R[q[c]],S=0;S<w.length;S++)if(D=S+1,D%=w.length,f=Q(L,O,w[S],w[D],!0),f.length>0)return!0;return!1}for(var M,F,B,L,o,A,N,p,Z,d,r,e=Y.concat(),q=[],c=[],m=0,T=R.length;T>m;m++)q.push(m);for(var $=0,X=2*q.length;q.length>0&&(X--,!(0>X));)for(B=$;B<e.length;B++){L=e[B],F=-1;for(var m=0;m<q.length;m++)if(A=q[m],N=L.x+":"+L.y+":"+A,c[N]===H){M=R[A];for(var D=0;D<M.length;D++)if(o=M[D],O(B,D)&&!J(L,o)&&!t(L,o)){F=D,q.splice(m,1),p=e.slice(0,B+1),Z=e.slice(B),d=M.slice(F),r=M.slice(0,F+1),e=p.concat(d).concat(r).concat(Z),$=B;break}if(F>=0)break;c[N]=!0}if(F>=0)break}return e}for(var R,l,D,K,x,z,f={},U=L.concat(),m=0,C=X.length;C>m;m++)Array.prototype.push.apply(U,X[m]);for(R=0,l=U.length;l>R;R++)x=U[R].x+":"+U[R].y,f[x]!==H,f[x]=R;var h=$(L,X),I=Ti.Triangulate(h,!1);for(R=0,l=I.length;l>R;R++)for(K=I[R],D=0;3>D;D++)x=K[D].x+":"+K[D].y,z=f[x],z!==H&&(K[D]=z);return I.concat()},isClockWise:function(J){return Ti.Triangulate.area(J)<0},b2p0:function(z,s){var i=1-z;return i*i*s},b2p1:function(e,J){return 2*(1-e)*e*J},b2p2:function(o,r){return o*o*r},b2:function(q,c,i,x){return this.b2p0(q,c)+this.b2p1(q,i)+this.b2p2(q,x)},b3p0:function(f,H){var i=1-f;return i*i*i*H},b3p1:function(o,z){var $=1-o;return 3*$*$*o*z},b3p2:function(N,X){var H=1-N;return 3*H*N*N*X},b3p3:function(n,P){return n*n*n*P},b3:function(r,V,U,R,G){return this.b3p0(r,V)+this.b3p1(r,U)+this.b3p2(r,R)+this.b3p3(r,G)}},Ti={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(R){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(w){var N=w.familyName.toLowerCase(),j=this;return j.faces[N]=j.faces[N]||{},j.faces[N][w.cssFontWeight]=j.faces[N][w.cssFontWeight]||{},j.faces[N][w.cssFontWeight][w.cssFontStyle]=w,j.faces[N][w.cssFontWeight][w.cssFontStyle]=w,w},drawText:function(T){var G,o=this.getFace(),B=this.size/o.resolution,a=0,$=String(T).split(""),Z=$.length,j=[];for(G=0;Z>G;G++){var s=new Rg,K=this.extractGlyphPoints($[G],o,B,a,s);a+=K.offset,j.push(K.path)}var N=a/2;return{paths:j,offset:N}},extractGlyphPoints:function(V,g,i,v,z){var F,Y,b,G,x,A,$,Z,N,r,O,T,H,J,q,R,l,n,u,h=[],t=g.glyphs[V]||g.glyphs["?"];if(t){if(t.o)for(G=t._cachedOutline||(t._cachedOutline=t.o.split(" ")),A=G.length,$=i,Z=i,F=0;A>F;)switch(x=G[F++]){case"m":N=G[F++]*$+v,r=G[F++]*Z,z.moveTo(N,r);break;case"l":N=G[F++]*$+v,r=G[F++]*Z,z.lineTo(N,r);break;case"q":if(O=G[F++]*$+v,T=G[F++]*Z,q=G[F++]*$+v,R=G[F++]*Z,z.quadraticCurveTo(q,R,O,T),u=h[h.length-1])for(H=u.x,J=u.y,Y=1,b=this.divisions;b>=Y;Y++){var y=Y/b;mk.b2(y,H,q,O),mk.b2(y,J,R,T)}break;case"b":if(O=G[F++]*$+v,T=G[F++]*Z,q=G[F++]*$+v,R=G[F++]*Z,l=G[F++]*$+v,n=G[F++]*Z,z.bezierCurveTo(q,R,l,n,O,T),u=h[h.length-1])for(H=u.x,J=u.y,Y=1,b=this.divisions;b>=Y;Y++){var y=Y/b;mk.b3(y,H,q,l,O),mk.b3(y,J,R,n,T)}}return{offset:t.ha*i,path:z}}}};Ti.generateShapes=function(P,b){b=b||{};var L=b.size!==H?b.size:100,v=b.curveSegments!==H?b.curveSegments:4,l=b.font!==H?b.font:"helvetiker",G=b.weight!==H?b.weight:"normal",g=b.style!==H?b.style:"normal";Ti.size=L,Ti.divisions=v,Ti.face=l,Ti.weight=G,Ti.style=g;for(var M=Ti.drawText(P),X=M.paths,D=[],R=0,q=X.length;q>R;R++)Array.prototype.push.apply(D,X[R].toShapes());return D},function(R){var W=1e-10,D=function(A,c){var R=A.length;if(3>R)return null;var H,y,x,J=[],z=[],F=[];if(g(A)>0)for(y=0;R>y;y++)z[y]=y;else for(y=0;R>y;y++)z[y]=R-1-y;var Z=R,M=2*Z;for(y=Z-1;Z>2;){if(M--<=0)return c?F:J;if(H=y,H>=Z&&(H=0),y=H+1,y>=Z&&(y=0),x=y+1,x>=Z&&(x=0),$(A,H,y,x,Z,z)){var f,e,v,d,I;for(f=z[H],e=z[y],v=z[x],J.push([A[f],A[e],A[v]]),F.push([z[H],z[y],z[x]]),d=y,I=y+1;Z>I;d++,I++)z[d]=z[I];Z--,M=2*Z}}return c?F:J},g=function(f){for(var q=f.length,l=0,P=q-1,C=0;q>C;P=C++)l+=f[P].x*f[C].y-f[C].x*f[P].y;return.5*l},$=function(Q,o,z,q,K,r){var i,k,l,R,b,e,Y,B,c;if(k=Q[r[o]].x,l=Q[r[o]].y,R=Q[r[z]].x,b=Q[r[z]].y,e=Q[r[q]].x,Y=Q[r[q]].y,W>(R-k)*(Y-l)-(b-l)*(e-k))return!1;var H,P,u,X,m,U,j,T,F,D,O,f,Z,v,$;for(H=e-R,P=Y-b,u=k-e,X=l-Y,m=R-k,U=b-l,i=0;K>i;i++)if(B=Q[r[i]].x,c=Q[r[i]].y,!(B===k&&c===l||B===R&&c===b||B===e&&c===Y)&&(j=B-k,T=c-l,F=B-R,D=c-b,O=B-e,f=c-Y,$=H*D-P*F,Z=m*T-U*j,v=u*f-X*O,$>=-W&&v>=-W&&Z>=-W))return!1;return!0};return R.Triangulate=D,R.Triangulate.area=g,R}(Ti),V._typeface_js={faces:Ti.faces,loadFace:Ti.loadFace};var gd=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},$j=gd.prototype={constructor:gd,computeFaceNormals:function(){for(var S=new gs,G=new gs,x=0,Z=this.faces.length;Z>x;x++){var L=this.faces[x],K=this.vertices[L.a],j=this.vertices[L.b],z=this.vertices[L.c];S.subVectors(z,j),G.subVectors(K,j),S.cross(G),S.normalize(),L.normal.copy(S)}},computeVertexNormals:function(H){var d,k,B,g,o,y;for(y=new Array(this.vertices.length),d=0,k=this.vertices.length;k>d;d++)y[d]=new gs;if(H){var c,x,R,Q=new gs,p=new gs;for(B=0,g=this.faces.length;g>B;B++)o=this.faces[B],c=this.vertices[o.a],x=this.vertices[o.b],R=this.vertices[o.c],Q.subVectors(R,x),p.subVectors(c,x),Q.cross(p),y[o.a].add(Q),y[o.b].add(Q),y[o.c].add(Q)}else for(B=0,g=this.faces.length;g>B;B++)o=this.faces[B],y[o.a].add(o.normal),y[o.b].add(o.normal),y[o.c].add(o.normal);for(d=0,k=this.vertices.length;k>d;d++)y[d].normalize();for(B=0,g=this.faces.length;g>B;B++)o=this.faces[B],o.vertexNormals[0]=y[o.a].clone(),o.vertexNormals[1]=y[o.b].clone(),o.vertexNormals[2]=y[o.c].clone()},mergeVertices:function(){var F,u,b,N,G,Z,B,s,h={},O=[],_=[],n=4,e=A(10,n);for(b=0,N=this.vertices.length;N>b;b++)F=this.vertices[b],u=M(F.x*e)+"_"+M(F.y*e)+"_"+M(F.z*e),h[u]===H?(h[u]=b,O.push(this.vertices[b]),_[b]=O.length-1):_[b]=_[h[u]];var R=[];for(b=0,N=this.faces.length;N>b;b++){G=this.faces[b],G.a=_[G.a],G.b=_[G.b],G.c=_[G.c],Z=[G.a,G.b,G.c];for(var V=0;3>V;V++)if(Z[V]==Z[(V+1)%3]){R.push(b);break}}for(b=R.length-1;b>=0;b--){var p=R[b];for(this.faces.splice(p,1),B=0,s=this.faceVertexUvs.length;s>B;B++)this.faceVertexUvs[B].splice(p,1)}var X=this.vertices.length-O.length;return this.vertices=O,X}},ic=function(v,J,G,c,Y,F,D){this.aX=v,this.aY=J,this.xRadius=G,this.yRadius=c,this.aStartAngle=Y,this.aEndAngle=F,this.aClockwise=D};ic.prototype=bp(Zn),ic.prototype.getPoint=function(J){var q,w=this.aEndAngle-this.aStartAngle;0>w&&(w+=_),w>_&&(w-=_),q=this.aClockwise===!0?this.aEndAngle+(1-J)*(_-w):this.aStartAngle+J*w;var u=this.aX+this.xRadius*r(q),W=this.aY+this.yRadius*h(q);return new Um(u,W)};var Fr=function(x,D){this.v1=x,this.v2=D},ll=Fr.prototype=bp(Zn);ll.getPoint=function(L){var D=this.v2.clone().sub(this.v1);return D.multiplyScalar(L).add(this.v1),D},ll.getPointAt=function(I){return this.getPoint(I)},ll.getTangent=function(){var L=this.v2.clone().sub(this.v1);return L.normalize()};var Kr=function(B,m,u){this.v0=B,this.v1=m,this.v2=u};Kr.prototype=bp(Zn),Kr.prototype.getPoint=function(L){var Z,B;return Z=mk.b2(L,this.v0.x,this.v1.x,this.v2.x),B=mk.b2(L,this.v0.y,this.v1.y,this.v2.y),new Um(Z,B)};var up=function(A,n,u,V){this.v0=A,this.v1=n,this.v2=u,this.v3=V};up.prototype=bp(Zn),up.prototype.getPoint=function(l){var X,O;return X=mk.b3(l,this.v0.x,this.v1.x,this.v2.x,this.v3.x),O=mk.b3(l,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Um(X,O)},ij.create(function(t,R){this.v1=t,this.v2=R},function(N){var D=new gs;return D.subVectors(this.v2,this.v1),D.multiplyScalar(N),D.add(this.v1),D});var cl=ij.create(function(L,I,w){this.v0=L,this.v1=I,this.v2=w},function(q){var v,h,k;return v=mk.b2(q,this.v0.x,this.v1.x,this.v2.x),h=mk.b2(q,this.v0.y,this.v1.y,this.v2.y),k=mk.b2(q,this.v0.z,this.v1.z,this.v2.z),new gs(v,h,k)}),Aq=ij.create(function(X,w,F,P){this.v0=X,this.v1=w,this.v2=F,this.v3=P},function(i){var C,j,$;return C=mk.b3(i,this.v0.x,this.v1.x,this.v2.x,this.v3.x),j=mk.b3(i,this.v0.y,this.v1.y,this.v2.y,this.v3.y),$=mk.b3(i,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new gs(C,j,$)}),dk=function(A,R,W,i,y,$,I,g){gd.call(this),i=i!==H?i:.5,y=y!==H?y:.5,g=g!==H?g:1,A=A||8,$=$||0,I=I||_;var f,u,J=1,N=g/2,a=[],Z=[],q=this.vertices,m=this.faces,v=this.faceVertexUvs;for(u=0;J>=u;u++){var c=[],z=[],E=u/J,O=E*(y-i)+i;for(f=0;A>=f;f++){var s=f/A,U=new gs,G=-(s*I+$);U.z=O*h(G),U.y=-E*g+N,U.x=O*r(G),q.push(U),c.push(q.length-1),z.push(new Um(s,E))}a.push(c),Z.push(z)}var C,j,l=(y-i)/g;for(f=0;A>f;f++)for(0!==i?(C=q[a[0][f]].clone(),j=q[a[0][f+1]].clone()):(C=q[a[1][f]].clone(),j=q[a[1][f+1]].clone()),C.setY(o(C.x*C.x+C.z*C.z)*l).normalize(),j.setY(o(j.x*j.x+j.z*j.z)*l).normalize(),u=0;J>u;u++){var n=a[u][f],Y=a[u+1][f],M=a[u+1][f+1],D=a[u][f+1],d=C.clone(),K=C.clone(),e=j.clone(),t=j.clone(),T=Z[u][f].clone(),X=Z[u+1][f].clone(),B=Z[u+1][f+1].clone(),P=Z[u][f+1].clone();m.push(new Qc(n,Y,D,[d,K,t])),v[0].push([T,X,P]),m.push(new Qc(Y,M,D,[K.clone(),e,t.clone()])),v[0].push([X.clone(),B,P.clone()])}if(R&&i>0)for(this.vertices.push(new gs(0,N,0)),f=0;A>f;f++){var n=a[0][f],Y=a[0][f+1],M=this.vertices.length-1,d=new gs(0,1,0),K=new gs(0,1,0),e=new gs(0,1,0),T=Z[0][f].clone(),X=Z[0][f+1].clone(),B=new Um(X.x,0);m.push(new Qc(n,Y,M,[d,K,e],null,1));var x=f/A*_,L=r(x),S=h(x),p=(f+1)/A*_,k=r(p),V=h(p);v[0].push([new Um(.5+.5*L,.5+.5*S),new Um(.5+.5*k,.5+.5*V),new Um(.5,.5)])}if(W&&y>0)for(this.vertices.push(new gs(0,-N,0)),f=0;A>f;f++){var n=a[u][f+1],Y=a[u][f],M=q.length-1,d=new gs(0,-1,0),K=new gs(0,-1,0),e=new gs(0,-1,0),T=Z[u][f+1].clone(),X=Z[u][f].clone();m.push(new Qc(n,Y,M,[d,K,e],null,2));var x=f/A*_,L=r(x),S=h(x),p=(f+1)/A*_,k=r(p),V=h(p);v[0].push([new Um(.5+.5*k,.5-.5*V),new Um(.5+.5*L,.5-.5*S),new Um(.5,.5)])}};dk.prototype=bp($j);var ue=function(K,u,q,M,O,n,e){gd.call(this),e=e||.5,K=K||16,u=u||16,q=(q!==H?q:0)-G,M=M!==H?M:_,O=O!==H?O:0,n=n!==H?n:G;var Y,z,Q=[],c=[],p=this.vertices,x=this.faces,J=this.faceVertexUvs;for(z=0;u>=z;z++){var A=[],l=[];for(Y=0;K>=Y;Y++){var X=Y/K,F=z/u,$=new gs;$.x=-e*r(q+X*M)*h(O+F*n),$.y=e*r(O+F*n),$.z=e*h(q+X*M)*h(O+F*n),p.push($),A.push(p.length-1),l.push(new Um(X,F))}Q.push(A),c.push(l)}for(z=0;u>z;z++)for(Y=0;K>Y;Y++){var N=Q[z][Y+1],m=Q[z][Y],w=Q[z+1][Y],C=Q[z+1][Y+1],v=p[N].clone().normalize(),B=p[m].clone().normalize(),S=p[w].clone().normalize(),y=p[C].clone().normalize(),D=c[z][Y+1].clone(),d=c[z][Y].clone(),Z=c[z+1][Y].clone(),f=c[z+1][Y+1].clone();g(p[N].y)===e?(D.x=(D.x+d.x)/2,x.push(new Qc(N,w,C,[v,S,y])),J[0].push([D,Z,f])):g(p[w].y)===e?(Z.x=(Z.x+f.x)/2,x.push(new Qc(N,m,w,[v,B,S])),J[0].push([D,d,Z])):(x.push(new Qc(N,m,C,[v,B,y])),J[0].push([D,d,f]),x.push(new Qc(m,w,C,[B.clone(),S,y.clone()])),J[0].push([d.clone(),Z,f.clone()]))}};ue.prototype=bp($j);var Ar=function(n,D,c,Y,O,m){gd.call(this),n=n||.33,D=D||.17,Y=Y||8,c=c||6,O=O||0,m=m||_;for(var t=new gs,H=[],l=[],a=0;Y>=a;a++)for(var C=a/Y*_+G,o=0;c>=o;o++){var V=o/c*m+O;t.x=n*r(V),t.z=-n*h(V);var u=new gs,i=n+D*r(C);u.x=i*r(V),u.z=-i*h(V),u.y=D*h(C),this.vertices.push(u),H.push(new Um(o/c,1-a/Y)),l.push(u.clone().sub(t).normalize())}for(var a=1;Y>=a;a++)for(var o=1;c>=o;o++){var j=(c+1)*a+o-1,x=(c+1)*(a-1)+o-1,e=(c+1)*(a-1)+o,q=(c+1)*a+o,U=new Qc(j,x,q,[l[j].clone(),l[x].clone(),l[q].clone()]);this.faces.push(U),this.faceVertexUvs[0].push([H[j].clone(),H[x].clone(),H[q].clone()]),U=new Qc(x,e,q,[l[x].clone(),l[e].clone(),l[q].clone()]),this.faces.push(U),this.faceVertexUvs[0].push([H[x].clone(),H[e].clone(),H[q].clone()])}this.computeFaceNormals()};Ar.prototype=bp($j);var tl=function(d,w,p){return d?(gd.call(this),d=d instanceof Array?d:[d],this.addShapeList(d,w),$b(this,p),this.computeFaceNormals(),void 0):(d=[],void 0)},uc=tl.prototype=bp(gd.prototype);uc.addShapeList=function(h,K){for(var L=h.length,c=0;L>c;c++){var B=h[c];this.addShape(B,K)}},uc.addShape=function($,r){function k(){if(r.bottom)for(var C=0;J>C;C++)l=v[C],h(l[2],l[1],l[0],!0);if(r.top)for(C=0;J>C;C++)l=v[C],h(l[0]+F*z,l[1]+F*z,l[2]+F*z,!1)}function d(){var B=0;for(g(U,B),B+=U.length,w=0,A=a.length;A>w;w++)j=a[w],g(j,B),B+=j.length}function g($,j){for(var C,b,p=$.length;--p>=0;){C=p,b=p-1,0>b&&(b=$.length-1);var l=0,I=z;for(l=0;I>l;l++){var m=F*l,r=F*(l+1),B=j+C+m,Y=j+b+m,G=j+b+r,W=j+C+r;R(B,Y,G,W,$,l,I,C,b)}}}function m(N,b,W){o.vertices.push(new gs(N,b,W))}function h(P,A,m,t){P+=E,A+=E,m+=E,o.faces.push(new Qc(P,A,m,null,null,t?2:1));var T=t?X.generateBottomUV(o,$,r,P,A,m):X.generateTopUV(o,$,r,P,A,m);o.faceVertexUvs[0].push(T)}function R(F,Z,l,a,t,w,m,D,O){F+=E,Z+=E,l+=E,a+=E,o.faces.push(new Qc(F,Z,a)),o.faces.push(new Qc(Z,l,a));var z=X.generateSideWallUV(o,$,t,r,F,Z,l,a,w,m,D,O);o.faceVertexUvs[0].push([z[0],z[1],z[3]]),o.faceVertexUvs[0].push([z[1],z[2],z[3]])}var b,u,N,B,n,D=r.amount,T=r.curveSegments||jk,z=r.steps||1,_=r.extrudePath,V=!1,X=new Qf(r.repeatUVLength);_&&(b=_.getSpacedPoints(z),V=!0,u=r.frames!==H?r.frames:new vq.FrenetFrames(_,z,!1),N=new gs,B=new gs,n=new gs);var j,w,A,o=this,E=this.vertices.length,x=$.extractPoints(T),I=x.shape,a=x.holes,M=!mk.isClockWise(I);if(M){for(I=I.reverse(),w=0,A=a.length;A>w;w++)j=a[w],mk.isClockWise(j)&&(a[w]=j.reverse());M=!1}var v=mk.triangulateShape(I,a),U=I;for(w=0,A=a.length;A>w;w++)j=a[w],I=I.concat(j);for(var Y,l,F=I.length,J=v.length,P=0;F>P;P++)Y=I[P],V?(B.copy(u.normals[0]).multiplyScalar(Y.x),N.copy(u.binormals[0]).multiplyScalar(Y.y),n.copy(b[0]).add(B).add(N),m(n.x,n.y,n.z)):m(Y.x,Y.y,0);var q;for(q=1;z>=q;q++)for(P=0;F>P;P++)Y=I[P],V?(B.copy(u.normals[q]).multiplyScalar(Y.x),N.copy(u.binormals[q]).multiplyScalar(Y.y),n.copy(b[q]).add(B).add(N),m(n.x,n.y,n.z)):m(Y.x,Y.y,D/z*q);k(),d()};var vq=function(z,N,f,U,J){function $(t,s,G){return p.vertices.push(new gs(t,s,G))-1}gd.call(this),N=N||64,f=f||1,U=U||8,J=J||!1;var L,m,w,y,c,e,P,v,a,k,G,g,A,F,i,Q,s,o,V,R,M=[],p=this,l=N+1,j=new gs,X=new vq.FrenetFrames(z,N,J),C=X.tangents,E=X.normals,H=X.binormals;for(this.tangents=C,this.normals=E,this.binormals=H,a=0;l>a;a++)for(M[a]=[],y=a/(l-1),v=z.getPointAt(y),L=C[a],m=E[a],w=H[a],k=0;U>k;k++)c=k/U*_,e=-f*r(c),P=f*h(c),j.copy(v),j.x+=e*m.x+P*w.x,j.y+=e*m.y+P*w.y,j.z+=e*m.z+P*w.z,M[a][k]=$(j.x,j.y,j.z);for(a=0;N>a;a++)for(k=0;U>k;k++)G=J?(a+1)%N:a+1,g=(k+1)%U,A=M[a][k],F=M[G][k],i=M[G][g],Q=M[a][g],s=new Um(a/N,k/U),o=new Um((a+1)/N,k/U),V=new Um((a+1)/N,(k+1)/U),R=new Um(a/N,(k+1)/U),this.faces.push(new Qc(A,F,Q)),this.faceVertexUvs[0].push([s,o,R]),this.faces.push(new Qc(F,i,Q)),this.faceVertexUvs[0].push([o.clone(),V,R.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};vq.prototype=bp($j),vq.FrenetFrames=function(h,r,l){function x(){v[0]=new gs,W[0]=new gs,P=Number.MAX_VALUE,Y=g(K[0].x),c=g(K[0].y),a=g(K[0].z),P>=Y&&(P=Y,M.set(1,0,0)),P>=c&&(P=c,M.set(0,1,0)),P>=a&&M.set(0,0,1),A.crossVectors(K[0],M).normalize(),v[0].crossVectors(K[0],A),W[0].crossVectors(K[0],v[0])}var m,P,Y,c,a,f,w,M=new gs,K=[],v=[],W=[],A=new gs,B=new ss,I=r+1,V=1e-4;for(this.tangents=K,this.normals=v,this.binormals=W,f=0;I>f;f++)w=f/(I-1),K[f]=h.getTangentAt(w),K[f].normalize();for(x(),f=1;I>f;f++)v[f]=v[f-1].clone(),W[f]=W[f-1].clone(),A.crossVectors(K[f-1],K[f]),A.length()>V&&(A.normalize(),m=p(ls(K[f-1].dot(K[f]),-1,1)),v[f].applyMatrix4(B.makeRotationAxis(A,m))),W[f].crossVectors(K[f],v[f]);if(l)for(m=p(ls(v[0].dot(v[I-1]),-1,1)),m/=I-1,K[0].dot(A.crossVectors(v[0],v[I-1]))>0&&(m=-m),f=1;I>f;f++)v[f].applyMatrix4(B.makeRotationAxis(K[f],m*f)),W[f].crossVectors(K[f],v[f])};var lr=function(b,l,d,o){gd.call(this),l=l||18,d=d||0,o=o==U?_:o;for(var f=1/(b.length-1),D=1/l,T=0,F=l;F>=T;T++)for(var v=d+T*D*o,H=r(v),$=h(v),y=0,Y=b.length;Y>y;y++){var O=b[y],m=new gs;m.x=H*O.x-$*O.y,m.y=$*O.x+H*O.y,m.z=O.z,this.vertices.push(m)}for(var g=b.length,T=0,F=l;F>T;T++)for(var y=0,Y=b.length-1;Y>y;y++){var V=y+g*T,A=V,R=V+g,H=V+1+g,Z=V+1,Q=T*D,e=y*f,S=Q+D,P=e+f;this.faces.push(new Qc(A,Z,R)),this.faceVertexUvs[0].push([new Um(Q,e),new Um(Q,P),new Um(S,e)]),this.faces.push(new Qc(R,Z,H)),this.faceVertexUvs[0].push([new Um(S,e),new Um(Q,P),new Um(S,P)])}this.mergeVertices(),$b(this),this.computeFaceNormals(),this.computeVertexNormals()};lr.prototype=bp($j);var Km=function(c,k){k=k||{};var $=Ti.generateShapes(c,k);k.amount=k.height!==H?k.height:50,tl.call(this,$,k)};Km.prototype=bp(uc);var yh=e.Node=function(){si(yh,this)},Vh={X:zg,Y:hb,Z:Pd},Dg={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Ee="xzy",qd=function(T,o,Y){if(o){var V=o[0],X=o[1],h=o[2];"xzy"===Y?(hb(T,X),Pd(T,h),zg(T,V)):"xyz"===Y?(Pd(T,h),hb(T,X),zg(T,V)):"yxz"===Y?(Pd(T,h),zg(T,V),hb(T,X)):"yzx"===Y?(zg(T,V),Pd(T,h),hb(T,X)):"zxy"===Y?(hb(T,X),zg(T,V),Pd(T,h)):"zyx"===Y?(zg(T,V),hb(T,X),Pd(T,h)):(hb(T,X),Pd(T,h),zg(T,V))}};Oo("Node",Tn,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Ee,_64O:0,_rotationX:0,_53O:0,_host:U,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return cs},_22Q:function(){return $f},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(w,f){bi(w,oj(U,U,this.r3(),this.getRotationMode())),this.translate3d(w[0]*f,w[1]*f,w[2]*f)},translateFront:function(G){this.translate3dBy([0,0,1],G)},translateBack:function(L){this.translate3dBy([0,0,-1],L)},translateLeft:function(x){this.translate3dBy([-1,0,0],x)},translateRight:function(y){this.translate3dBy([1,0,0],y)},translateTop:function(t){this.translate3dBy([0,1,0],t)},translateBottom:function(E){this.translate3dBy([0,-1,0],E)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function($,F,I){1===arguments.length&&(F=$[1],I=$[2],$=$[0]),this.p($,I),this.setElevation(F)},translate3d:function(x,Y,e){1===arguments.length&&(Y=x[1],e=x[2],x=x[0]),this.translate(x,e),this.setElevation(this._54O+Y)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(s,c,J){1===arguments.length&&(c=s[1],J=s[2],s=s[0]),this.setSize(s,J),this.setTall(c)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(T,N,h){1===arguments.length&&(N=T[1],h=T[2],T=T[0]),this.setRotationX(T),this.setRotation(-N),this.setRotationZ(h)},setRotationY:function(R){this.setRotation(-R)},getRotationY:function(){return-this._64O},lookAt:function(g,O){O=O||q;var A=this,E=kd(g,A.p3()),J=Qh(E);O===q?(A.r3([-N(E[1]/J),-v(E[2],E[0])+Q,0]),A.setRotationMode("xzy")):O===ib?(A.r3(0,-v(E[2],E[0]),N(E[1]/J)),A.setRotationMode("zyx")):O===nd?(A.r3(0,-v(E[2],E[0])+G,-N(E[1]/J)),A.setRotationMode("zyx")):O===ei?(A.r3([-N(E[1]/J)+Q,-v(E[2],E[0])+Q,0]),A.setRotationMode("xzy")):O===pd&&(A.r3([-N(E[1]/J)-Q,-v(E[2],E[0])+Q,0]),A.setRotationMode("xzy")),O===Eg&&(A.r3([-N(E[1]/J)+G,-v(E[2],E[0])+Q,G]),A.setRotationMode("zxy"))
},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(q){var h=this;if(h!==q&&h._host!==q){var Q=h._host;Q&&Q._removeAttach(h),h._host=q,h._host&&h._host._addAttach(h),h.fp("host",Q,q),h.onHostChanged(Q,q)}},getAttaches:function(){return this._69O},_addAttach:function(R){var g=this;g._69O||(g._69O=new rn),g._69O.add(R),g.fp("attaches",U,R)},_removeAttach:function(Y){var K=this;K._69O.remove(Y),K._69O.isEmpty()&&delete K._69O,K.fp("attaches",Y,U)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(N){var U=this;U._44I||(U._44I=new rn),U._42I||(U._42I=new rn),U._44I.add(N),U._42I.add(N),U._20I()},_4I:function(y){var n=this;n._44I||(n._44I=new rn),n._43I||(n._43I=new rn),n._44I.add(y),n._43I.add(y),n._20I()},_16I:function(D){var t=this;t._44I.remove(D),t._42I.remove(D),t._44I.isEmpty()&&delete t._44I,t._42I.isEmpty()&&delete t._42I,t._20I()},_18I:function(T){var c=this;c._44I.remove(T),c._43I.remove(T),c._44I.isEmpty()&&delete c._44I,c._43I.isEmpty()&&delete c._43I,c._20I()},_20I:function(){var E=this;if(delete E._45I,!E._44I||E._44I.isEmpty())return delete E._70O,void 0;var V;E._44I.each(function(y){y.isLooped()&&(V||(V={}),V[y._id]||(E._45I||(E._45I=new rn),E._45I.add(y),V[y._id]=y))}),V?(E._70O=new rn,E._44I.each(function(l){V[l._id]?"A"===V[l._id]||(V[l._id]="A",E._70O.add(l)):E._70O.add(l)})):E._70O=E._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(p){var e=this;e._46I||(e._46I=new rn),e._48I||(e._48I=new rn),e._46I.add(p),e._48I.add(p),e._19I()},_3I:function(Z){var P=this;P._47I||(P._47I=new rn),P._48I||(P._48I=new rn),P._47I.add(Z),P._48I.add(Z),P._19I()},_15I:function(_){var k=this;k._46I.remove(_),k._48I.remove(_),k._46I.isEmpty()&&delete k._46I,k._48I.isEmpty()&&delete k._48I,k._19I()},_17I:function(w){var u=this;u._47I.remove(w),u._48I.remove(w),u._47I.isEmpty()&&delete u._47I,u._48I.isEmpty()&&delete u._48I,u._19I()},_19I:function(){var d=this;delete d._49I;var e=d._48I;if(e&&!e.isEmpty()){var b={};e.each(function(T){b[T._id]?d._49I||(d._49I=new rn):b[T._id]=T}),d._49I?e.each(function(e){b[e._id]&&(d._49I.add(e),delete b[e._id])}):d._49I=e}},getImage:function(){return this._image},setImage:function(z){var M=this,y=M._image,F=M.getWidth(),i=M.getHeight();M._image=z,M.fp("image",y,z),M.fp(zl,F,M.getWidth()),M.fp(Cn,i,M.getHeight())},getElevation:function(){return this._54O},setElevation:function(K){var x=this;if(!x._50O){x._50O=1;var q=x._54O;x._54O=K,x.fp(kg,q,K),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(c){var n=this;if(!n._49O){n._49O=1;var o=n._64O;n._64O=c,n.fp(Qr,o,c),delete n._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(h){var P=this;if(!P._51O){P._51O=1;var G=P._rotationX;P._rotationX=h,P.fp("rotationX",G,h),delete P._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(z){var h=this;if(!h._52O){h._52O=1;var X=h._53O;h._53O=z,h.fp("rotationZ",X,z),delete h._52O}},getPosition:function(){return this._position},setPosition:function(g,W){var x=this;if(!x._50I){x._50I=1;var z;if(z=2===arguments.length?{x:g,y:W}:g,z.x!==x._position.x||z.y!==x._position.y){var E=x._position;x._position=z,x.fp(vh,E,z)}delete x._50I}},translate:function(R,T){var X=this._position;this.p(X.x+R,X.y+T)},getWidth:function(){var J=this;if(J._width>=0)return J._width;var M=Kf(J._image);return M?Sb(M,J):20},setWidth:function(b){var N=this,g=N._width;N._width=b,N.fp(zl,g,b)},getHeight:function(){var O=this;if(O._height>=0)return O._height;var u=Kf(O._image);return u?sd(u,O):20},setHeight:function(N){var X=this,T=X._height;X._height=N,X.fp(Cn,T,N)},setSize:function(k,Q){var q=this;2===arguments.length?(q.setWidth(k),q.setHeight(Q)):(q.setWidth(k.width),q.setHeight(k.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(w,x,d,K){var y=this;1===arguments.length?(y.p(w.x+w.width/2,w.y+w.height/2),y.setWidth(w.width),y.setHeight(w.height)):(y.p(w+d/2,x+K/2),y.setWidth(d),y.setHeight(K))},getRect:function(){var q=this,U=q.getWidth(),j=q.getHeight();return Hp({x:q._position.x-U/2,y:q._position.y-j/2,width:U,height:j},q._64O)},getCorners:function(R,t){R==U&&(R=0),t==U&&(t=R);var X=this,S=X._position,Z=X.getWidth()/2+R,I=X.getHeight()/2+t,$=new Pq(X._64O,S.x,S.y);return[$.tf(-Z,-I),$.tf(Z,-I),$.tf(Z,I),$.tf(-Z,I)]},rotateAt:function(f,W,A){var z=this,c=z._position,m=z._64O,V=new Pq(m,c.x,c.y).tf(f,W),x=o(f*f+W*W),b=v(c.y-V.y,c.x-V.x)+A;z.setRotation(m+A),z.p(V.x+x*r(b),V.y+x*h(b))},onParentChanged:function(){yh.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(h){h._7I()})},onPropertyChanged:function(e){var f=this;yh.superClass.onPropertyChanged.call(f,e),f._69O&&f._69O.each(function(J){J.handleHostPropertyChange(e)}),f._49I&&f._49I.each(function(M){M.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(f){this.updateAttach(f)},onStyleChanged:function(E){yh.superClass.onStyleChanged.apply(this,arguments),xo[E]&&this.updateAttach()},updateAttach:function(p){var w=this;w._51I||Id||(w._51I=1,w._71O(p),delete w._51I)},_71O:function(q){var I,r,Z,k,X,m,c=this,f=c._host,F=q?q.property:U,e=q?q.oldValue:U,b=q?q.newValue:U;if(f instanceof Wm){if(F===kg)c.setElevation(c._54O+b-e);else if(!q||Bb[F]){if(I=c.s("attach.row.index"),r=c.s("attach.column.index"),Z=f.getCellRect(I,r),!Z)return;k=c.s("attach.row.span"),X=c.s("attach.column.span"),(1!==k||1!==X)&&(Z=Pl(Z,f.getCellRect(I+k-1,r+X-1))),zc(Z,c,"attach.padding",1),c.setRect(Z)}}else if(f instanceof Qn&&(m=c.s("attach.index"))>=0&&(!q||cb[F])){var p=c.s("attach.thickness");p!=U&&c.setHeight(f.getThickness()*p);var i=c.s("attach.offset"),w=f.getPoints(),S=w.size();if(S>m){var G=w.get(m),g=S===m+1?w.get(0):w.get(m+1),Y=[g.x-G.x,g.y-G.y],t=Qh(Y);if(t){c.s("attach.offset.relative")&&(i*=t),c.s("attach.offset.opposite")&&(i=t-i);var d={x:G.x+Y[0]/t*i,y:G.y+Y[1]/t*i},L=c.s("attach.gap");L&&(c.s("attach.gap.relative")&&(L*=f.getThickness()),d=Wg(U,d,g,L)),c.p(d),c.setRotation(v(Y[1],Y[0]))}}}else q&&(F===vh?c.translate(b.x-e.x,b.y-e.y):F===kg?c.setElevation(c._54O+b-e):dn[F]&&c._11Q(f,F,b-e))},_11Q:function(G,B,L){var q=this,x=G.p3(),P=kd(q.p3(),x),s=pn(),b=Dg[q.getRotationMode()],J=b[0],Y=b[1],f=b[2],e=Vh[J],c=Vh[Y],H=Vh[f];B===Qr&&(B="rotationY",L=-L),B===Qr+J?(H(s,G[Cd+f]()),c(s,G[Cd+Y]()),e(s,L),c(s,-G[Cd+Y]()),H(s,-G[Cd+f]()),q[uo+J](q[Cd+J]()+L)):B===Qr+Y?(H(s,G[Cd+f]()),c(s,L),H(s,-G[Cd+f]()),q[uo+Y](q[Cd+Y]()+L)):B===Qr+f&&(H(s,L),q[uo+f](q[Cd+f]()+L)),bi(P,s),q.p3(x[0]+P[0],x[1]+P[1],x[2]+P[2])},isHostOn:function($){var C=this;if(C._host&&$&&$._69O)for(var p={},J=C._host;J&&J!==C&&!p[J._id];){if(J===$)return!0;p[J._id]=J,J=J._host}return!1},isLoopedHostOn:function(K){return this.isHostOn(K)&&K.isHostOn(this)},getSerializableProperties:function(){var b=yh.superClass.getSerializableProperties.call(this);return pr(b,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),b}});var Ao=e.Edge=function(Y,b){var n=this;si(Ao,n),n.setSource(Y),n.setTarget(b)};Oo("Edge",Tn,{_icon:"edge_icon",getUIClass:function(){return Lj},_22Q:function(){return tj},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(w){var F=this;if(F._source!==w){var $=F._source;F._source=w,$&&$._16I(F),w&&w._2I(F),F._7I(),F.fp("source",$,w)}},setTarget:function(h){var V=this;if(V._target!==h){var M=V._target;V._target=h,M&&M._18I(V),h&&h._4I(V),V._7I(),V.fp("target",M,h)}},isLooped:function(){var Z=this;return Z._source===Z._target&&!!Z._source&&!!Z._target},_7I:function(){var f,b=this,d=im(b);b._40I!==d&&(f=this._40I,f&&f._15I(b),b._40I=d,d&&d._1I(b),b.fp("sourceAgent",f,d),wf(f,b._41I),wf(d,b._41I));var h=Hi(b);b._41I!==h&&(f=b._41I,f&&f._17I(b),b._41I=h,h&&h._3I(b),b.fp("targetAgent",f,h),wf(f,b._40I),wf(h,b._40I))},_22I:function(l){this._52I=l,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var c=this;return c._52I&&c._52I.get(0)!==c&&!c.getStyle(Mg)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var l=this,J=l._52I;return J&&!l.getStyle(Mg)&&J.size()>1&&l===J.get(0)},toggle:function(){var Y=this._52I,e=!this.s(Mg);Y&&Y.size()>1&&(Y.each(function(O){O.s(Mg,e)}),Y.getSiblings().each(function(C){C!==Y&&C.each(function(W){W.fp("edgeGroup",U,C)})}))},setStyle:function(G,Z){(G===lp||"edge.segments"===G)&&(Z=Ul(Z)),Ao.superClass.setStyle.call(this,G,Z)},onStyleChanged:function(P){Ao.superClass.onStyleChanged.apply(this,arguments),Or[P]&&wf(this._41I,this._40I)},getSerializableProperties:function(){var T=Ao.superClass.getSerializableProperties.call(this);return pr(T,{source:1,target:1}),T}});var gq=e.Group=function(){si(gq,this)};Oo("Group",yh,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return wo},onChildAdded:function(){gq.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){gq.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var b=this;if(!b._54I&&!Id){var k=b.getChildrenRect();k&&(b._53I=1,b.p(eg(b.s("group.position"),k,b.getSize())),delete b._53I)}},getChildrenRect:function(){var V,u=this;return u.eachChild(function(q){V=Pl(V,u.getChildRect(q))}),V},getChildRect:function(i){var L;return Fm(i)&&i.s(Ff)&&($e(i)&&i.isExpanded()&&i.eachChild(function(h){L=Pl(L,i.getChildRect(h))}),!L&&i.getRect&&(L=i.getRect())),L},setPosition:function(p,i){var $=this;if(!$._54I){var g;g=2===arguments.length?{x:p,y:i}:p,Id||$._53I||($._54I=1,fs($._children,g.x-$._position.x,g.y-$._position.y),delete $._54I),gq.superClass.setPosition.call(this,g)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(E){var T=this;if(T._57O!==E){var d=T._57O;T._57O=E,T.fp("expanded",d,T._57O),T._8I()}},_8I:function(){gq.superClass._8I.call(this),this.eachChild(function(J){Fm(J)&&J._8I()})},onStyleChanged:function(g){gq.superClass.onStyleChanged.apply(this,arguments),"group.position"===g&&this._81I()},getSerializableProperties:function(){var D=gq.superClass.getSerializableProperties.call(this);return D.expanded=1,D}});var Wm=e.Grid=function(){si(Wm,this)};Oo("Grid",yh,{IRotatable:!1,_icon:"grid_icon",_image:U,getUIClass:function(){return ys},setRotation:function(){},getCellRect:function(K,N){var R=this,I=R.s("grid.row.count"),Y=R.s("grid.column.count");if(0>=I||0>=Y||0>K||K>=I||0>N||N>=Y)return U;var o,b,Q,$=R.getRect(),c=R.s("grid.row.percents"),G=R.s("grid.column.percents");if(zc($,R,"grid.border",-1),c&&c._as&&(c=c._as),G&&G._as&&(G=G._as),c&&c.length===I){for(Q=0,o=0;K>o;o++)Q+=$.height*c[o];$.y+=Q,$.height=$.height*c[K]}else $.height=$.height/I,$.y+=$.height*K;if(G&&G.length===Y){for(b=0,o=0;N>o;o++)b+=$.width*G[o];$.x+=b,$.width=$.width*G[N]}else $.width=$.width/Y,$.x+=$.width*N;return xg($,-R.s("grid.gap")),$}});var Qn=e.Shape=function(){si(Qn,this),this._59O=new rn};Qn.__de__=Up,Oo("Shape",yh,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return al},_22Q:function(){return ag},getLength:function(t){return Gq(qq(this._59O,this._58O,t,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var E=this._58O;return E?new rn(E._as.slice(0)):E},setSegments:function(T){var F=this._58O;T=T?bf(T)?new rn(T.slice(0)):new rn(T._as.slice(0)):new rn,(F&&T&&F._as.join(",")!==T._as.join(",")||F!==T)&&(this._58O=T,this.fp("segments",F,T))},getPoints:function(){return this._59O},toPoints:function(){var n=this._59O;return new rn(n._as.slice(0))},setPoints:function(L){var v=this._59O;L=L?bf(L)?new rn(L.slice(0)):new rn(L._as.slice(0)):new rn,(v&&L&&v._as.join(",")!==L._as.join(",")||v!==L)&&(this._59O=L,this.fs(),this.fp("points",v,L))},addPoint:function(Y,y){var V=this.toPoints();V.add(Y,y),this.setPoints(V)},setPoint:function(y,I){var g=this.toPoints();g.set(y,I),this.setPoints(g)},removePointAt:function(u){var K=this.toPoints();K.removeAt(u),this.setPoints(K)},setWidth:function(l){var H=this;if(1>l&&(l=1),!H._55I&&!Id&&H.getWidth()){H._55I=1;var Q=H._position.x,d=l/H.getWidth(),T=H.toPoints(),o=new rn;T.each(function(D){o.add({x:(D.x-Q)*d+Q,y:D.y,e:D.e})}),H.setPoints(o),H.fs(),delete H._55I}Qn.superClass.setWidth.call(H,l)},setHeight:function($){var B=this;if(1>$&&($=1),!B._55I&&!Id&&B.getHeight()){B._55I=1;var G=B._position.y,a=$/B.getHeight(),y=B.toPoints(),e=new rn;y.each(function(I){e.add({x:I.x,y:(I.y-G)*a+G,e:I.e})}),B.setPoints(e),B.fs(),delete B._55I}Qn.superClass.setHeight.call(B,$)},setPosition:function(O,j){var R,I=this;if(!I._28Q){if(I._28Q=1,!I._55I&&!Id){R=2===arguments.length?{x:O,y:j}:O;var L=R.x-I._position.x,y=R.y-I._position.y;if(0===L&&0===y)return delete I._28Q,void 0;I._55I=1;var V=I.toPoints(),l=new rn;V.each(function(Q){l.add({x:Q.x+L,y:Q.y+y,e:Q.e})}),I.setPoints(l),I.fs(),delete I._55I}Qn.superClass.setPosition.apply(I,arguments),delete I._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var H=this;if(!H._55I&&!Id){var N=xd(H._59O);N&&(H._55I=1,H.setRect(N),delete H._55I)}H.fp(rb,!1,!0)},getSerializableProperties:function(){var S=Qn.superClass.getSerializableProperties.call(this);return S.segments=1,S.points=1,S.thickness=1,S.closePath=1,S}});var Xq=e.Polyline=function(){si(Xq,this),this.s({"shape.background":null,"shape.border.width":2})};Oo("Polyline",Qn,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return ho},getUIClass:function(){return Sh},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(q){var I=this;if(!I._24Q&&!Id&&I.getTall()){I._24Q=1;var s=I._54O,l=q/I.getTall();I._59O.each(function(z){z.e=z.e==U?s:(z.e-s)*l+s}),I.fs(),delete I._24Q}Xq.superClass.setTall.call(I,q)},setElevation:function(M){var g=this;if(!g._24Q&&!Id){g._24Q=1;var i=M-g._54O;g._59O.each(function(S){S.e==U?S.e=M:S.e+=i}),g.fs(),delete g._24Q}Xq.superClass.setElevation.apply(g,arguments)},fireShapeChange:function(){var B=this,q=B._59O;if(!B._24Q&&!Id){var D=q.size();if(D){var J=1,z=q.get(0),m=B._54O;z.e==U&&(z.e=m);for(var v=z.e,s=0;D>J;J++){z=q.get(J),z.e==U&&(z.e=m);var A=Y(v,z.e),O=W(v+s,z.e);v=A,s=O-A}B._24Q=1,B.setTall(s),B.setElevation(v+s/2),delete B._24Q}}Xq.superClass.fireShapeChange.apply(B,arguments)}});var eo=e.SubGraph=function(){si(eo,this)};Oo("SubGraph",yh,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){eo.superClass._8I.call(this),this.eachChild(function(n){Fm(n)&&n._8I()})}}),e.EdgeGroup=function(E,J){this._70O=E,this._siblings=J;for(var R,F,B=0,j=E.size(),p=d[Mg];j>B;B++)if(R=E.get(B).getStyle(Mg,!1),R!=U){p=R;break}p==U&&(p=!0);var W=C.edgeGroupAgentFunc;for(W&&(F=W(E),F&&F!==E.get(0)&&(E.remove(F),E.add(F,0))),B=0;j>B;B++)E.get(B).s(Mg,p)},Oo("EdgeGroup",O,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(p){return this._70O.get(p)},indexOf:function(_){return this._70O.indexOf(_)},each:function(t,n){this._70O.each(t,n)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(N,W){this._siblings.each(function(k){k._70O.each(N,W)})}});var Ll=e.JSONSerializer=function(Z,F){this.dm=this._dataModel=Z,this._hierarchical=!!F};Oo("JSONSerializer",O,{ms_ac:["hierarchical"],serialize:function(b){return JSON.stringify(this.toJSON(),function(G,y){return jr(y)?Hr(y):y},b==U?2:b)},toJSON:function(){var B=this,Z=B.dm,b=Z.getRoots(),d=B.json={v:C.getVersion(),d:[],a:{}},z=Z.getSerializableAttrs();for(var a in z){var L=Z.a(a);L!==H&&B[gk](a,L,d.a)}return Jl(d.a)&&delete d.a,B._hierarchical?b.each(B.serializeData,this):Z.each(function(A){B.serializeData(A)}),d},isSerializable:function(){return!0},getProperties:function(n){return n.getSerializableProperties()},getStyles:function(e){return e.getSerializableStyles()},getAttrs:function(y){return y.getSerializableAttrs()},serializeData:function(z){var F=this;if(F.isSerializable(z)){var n,h,k,P,W=z.getClass(),u=new W,M={c:z.getClassName(),i:z.getId(),p:{},s:{},a:{}};F.json.d.push(M),n=F.getProperties(z);for(h in n)P=gf(h),z[P]&&(k=z[P](),k!==u[P]()&&F[gk](h,k,M.p));n=F.getStyles(z);for(h in n)k=z.s(h),k!==u.s(h)&&F[gk](h,k,M.s);n=F.getAttrs(z);for(h in n)k=z.a(h),k!==u.a(h)&&F[gk](h,k,M.a);Jl(M.p)&&delete M.p,Jl(M.s)&&delete M.s,Jl(M.a)&&delete M.a}F._hierarchical&&z.getChildren().each(F.serializeData,F)},serializeValue:function(G,m,X){Ni(m)?m={__a:m._as}:m instanceof Tn&&(m={__i:m.getId()}),X[G]=m},deserialize:function(h,H,Z){Id=!0;var y=this;h=y.json=re(h)?JSON.parse(h):h,y._82I={};for(var P=y.dm,l=new rn,A=new rn,N=0,u=h.d.length;u>N;N++){var J=h.d[N],e=xl(J.c),M=new e,o=J.i;Z&&o!=U&&(M._id=o),y._82I[o]=M,l.add(M),A.add(J)}for(N=0;u>N;N++)y.deserializeData(l.get(N),A.get(N));l.each(function(U){H&&!U.getParent()&&U.setParent(H),P.add(U)});for(var c in h.a)P.a(c,y[$l](h.a[c]));return Id=!1,l},deserializeData:function(C,L){for(var b in L.p)C[So(b)](this[$l](L.p[b]));for(b in L.s)C.s(b,this[$l](L.s[b]));for(b in L.a)C.a(b,this[$l](L.a[b]))},deserializeValue:function(n){if(ks(n)){var _=n.__i;if(_!=U)return this._82I[_];if(_=n.__a,bf(_))return new rn(_)}return n}}),pr(Br,{serialize:function(p,U){return new Ll(this,U).serialize(p)},toJSON:function(h){return new Ll(this,h).toJSON()},deserialize:function(N,t,I){return new Ll(this).deserialize(N,t,I)}}),_r.GraphView=function(h){var W=this;W._24I={},W._34I=new rn,W._25I={},W._56I={},W._view=Jp(1,W),W._canvas=Kh(W._view),W.dm(h?h:new Br),W.setEditable(!1),W.setScrollBarVisible(C.graphViewScrollBarVisible)},xj("GraphView",O,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",Nl,Sn,Kp,Nf,"resettable","editInteractor",lf,"pannable","rectSelectable","autoScrollZone",mg,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:C.graphViewResettable,_pannable:C.graphViewPannable,_rectSelectable:C.graphViewRectSelectable,_autoScrollZone:C.graphViewAutoScrollZone,_rectSelectBackground:C.graphViewRectSelectBackground,_rectSelectBorderColor:C.graphViewRectSelectBorderColor,_editPointSize:C.graphViewEditPointSize,_editPointBorderColor:C.graphViewEditPointBorderColor,_editPointBackground:C.graphViewEditPointBackground,_scrollBarColor:Ai,_scrollBarSize:Tj,_autoHideScrollBar:ts,_autoMakeVisible:sg,setEditable:function(F){var O=this,J=_r.XEditInteractor;F?O.setInteractors([new uq(O),J?new J(O):new oe(O),new Zr(O),new dc(O),new ws(O,{editable:!J})]):O.setInteractors([new uq(O),new Zr(O),new dc(O),new ws(O,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function($){var w=$.getUIClass();return w?new w(this,$):U},getDataUI:function(i){var W=this,I=W._25I[i._id];return I===H&&(I=W._33I(i),W._25I[i._id]=I),I},invalidateAll:function(m){var K=this;if(m){for(var U in K._25I){var V=K._25I[U];V&&V.dispose()}K._25I={},K._56I={},K._24I={},K._34I.clear(),K.redraw()}else K.dm().each(function(M){K.invalidateData(M)})},invalidateSelection:function(){var U=this;U.sm().each(function(e){U.invalidateData(e)})},invalidateData:function(W){var n=this;n._24I[W._id]=W,n._21Q(W),n.iv()},_21Q:function(V){var $=this,K=$._24I;if(ns(V)&&Hk[V.s(Dp)]){var c=V.getSourceAgent();c&&c.getAgentEdges().each(function(t){K[t._id]=t}),c=V.getTargetAgent(),c&&c.getAgentEdges().each(function(C){K[C._id]=C}),$.iv()}},redraw:function(v){var C=this;C._32I||(v?C._34I.add(v):(C._32I=1,C._34I.clear()),C.iv())},each:function(D,C){var Q,W,$,Y=0,P=this._layers,I=this._dataModel._datas._as,S=I.length;if(P)for(var m=P.length;m>Y;Y++){$=P[Y];for(var d=0;S>d;d++)if(Q=I[d],Q._layer===$&&(W=C?D.call(C,Q):D(Q),W===!1))return}else for(;S>Y;Y++)if(Q=I[Y],W=C?D.call(C,Q):D(Q),W===!1)return},reverseEach:function(t,B){var i,k,W,Q,m=this._layers,s=this._dataModel._datas._as,L=s.length;if(m)for(i=m.length-1;i>=0;i--){Q=m[i];for(var $=L-1;$>=0;$--)if(k=s[$],k._layer===Q&&(W=B?t.call(B,k):t(k),W===!1))return}else for(i=L-1;i>=0;i--)if(k=s[i],W=B?t.call(B,k):t(k),W===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var c=this,P=c._84I;return P||(c.each(function(m){c.isVisible(m)&&(P=Pl(P,c.getDataUIBounds(m)))}),c._84I=P?P:fl),c._84I},getScrollRect:function(){return Pl(this.getContentRect(),this._29I)},fitData:function(K,E,z,P,i){var V=this;if(!V.getWidth()||!V.getHeight())return i||Fp(V.fitData,V,[K,E,z,P,!0],200),void 0;V.makeVisible(K),V.validate();var C=V.getDataUIBounds(K);C&&(C=Ji(C),xg(C,z==U?20:z),V.fitRect(C,E,P))},fitContent:function(V,b,Q,l){var x=this;if(!x.getWidth()||!x.getHeight())return l||Fp(x.fitContent,x,[V,b,Q,!0],200),void 0;x.validate();var D=Ji(x.getContentRect());xg(D,b==U?20:b),x.fitRect(D,V,Q)},fitRect:function(J,I,p){var z=this,G=z.getWidth(),x=z.getHeight(),$=J.x+J.width/2,M=J.y+J.height/2,v=Y(G/J.width,x/J.height),F=z._zoom,V=-$*F+G/2,j=-M*F+x/2;0===v||isNaN(v)||(p&&(v=Y(1,v)),I?z.setTranslate(V,j,{finishFunc:function(){z.setZoom(v,I)}}):(z.setTranslate(V,j),z.setZoom(v)))},toCanvas:function(H){this.validateImpl();var q=this,U=q.getContentRect(),K=Kh(),F=q._zoom,S=U.x*F,h=U.y*F,Z=U.width*F,$=U.height*F;kr(K,Z,$,1);var c=os(K);return H&&rf(c,0,0,Z,$,H),kk(c,-S,-h),c.scale(F,F),q._42(c),c.restore(),K},toDataURL:function(i,x){return this.toCanvas(i).toDataURL(x||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(u,j){var x,E,J=this;J._93db(u,j),J.each(function(L){J._56I[L._id]&&(x=J.getDataUI(L),x&&(E=x._79o(),e.HtmlNode&&L instanceof e.HtmlNode?x._42(u):(!j||Sj(j,E))&&x._42(u)))}),J._92db(u,j)},validateImpl:function(){var _,G,q,I,t,P=this,Q=P.tx(),R=P.ty(),y=P._zoom,j=P._canvas,C=this.getWidth(),r=this.getHeight(),v=P._29I,l={x:-Q/y,y:-R/y,width:C/y,height:r/y},J={},V=P._34I,z=P._24I,H=P._32I,w=P._23I;(C!==j.clientWidth||r!==j.clientHeight)&&(kr(j,C,r),H=1),H||ve(l,v)||(H=1),P._29I=l,P.each(function(n){G=n._id;var t=J[G]=P.isVisible(n);t!==P._56I[G]&&(z[G]=n,q=P.getDataUI(z[G]),q&&q._84o(t),P._84o(n,t))},P);for(G in z)q=P.getDataUI(z[G]),q&&(!H&&P._56I[G]&&(t=q._79o(),t&&V.add(t)),q.invalidate()),P._83I=1;if(P._56I=J,!H)for(G in z)J[G]&&(q=P.getDataUI(z[G]),q&&(t=q._79o(),t&&V.add(t)));if(H?I=l:(V.each(function(R){Sj(l,R)&&(I=Pl(I,R))}),I&&(xg(I,W(1,1/y)),I.x=Z(I.x*y)/y,I.y=Z(I.y*y)/y,I.width=S(I.width*y)/y,I.height=S(I.height*y)/y,I=Ir(l,I))),P._74O=I,I&&(_=os(j),gp(_,Q,R,y),_.beginPath(),_.rect(I.x,I.y,I.width,I.height),_.clip(),_.clearRect(I.x,I.y,I.width,I.height),P._42(_,I),_.restore(),delete P._74O),P._24I={},V.clear(),delete P._32I,w&&C>0&&r>0){var q=P.getDataUI(w);if(q){var t=q._79o(),s=P._29I,p=s.x,E=s.y,x=s.width,B=s.height,y=P._zoom;t&&!Sj(t,s)&&(t.x+t.width<p&&P.tx(-t.x*y),t.x>p+x&&P.tx(-(t.x+t.width-x)*y),t.y+t.height<E&&P.ty(-t.y*y),t.y>E+B&&P.ty(-(t.y+t.height-B)*y))}delete P._23I}P._83I&&(delete P._83I,delete P._84I),P._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(t){var E=this;t!==E.isScrollBarVisible()&&(t?(sk(E._view,E._79O=xk()),sk(E._79O,E._27I=xk()),sk(E._79O,E._28I=xk())):(xc(E._79O),delete E._79O,delete E._27I,delete E._28I),E.fp("scrollBarVisible",!t,t))},showScrollBar:function(){var i=this;i._79O&&(i._85I||(T(function(){i._86I()},Oe),i.iv()),i._85I=new Date)},_86I:function(){var b=this;if(b._85I){var w=new Date,H=w.getTime();H-b._85I.getTime()>=Oe?(delete b._85I,b.iv()):T(function(){b._86I()},Oe)}},_98O:function(){var W=this,O=this._27I,A=this._28I;if(W._79O){if(W._autoHideScrollBar&&!W._85I)return O.style.visibility=Vd,A.style.visibility=Vd,void 0;var Q=W.getScrollBarColor(),B=W._zoom,x=W.getScrollBarSize(),H=W.getViewRect(),d=W.getScrollRect(),C=H.height*B,g=d.height*B,y=H.width*B-x-2,Z=C*((H.y-d.y)*B/g),s=C*(C/g),$=O.style;g-.5>C?(Wk>s&&(Z=Z+s/2-Wk/2,0>Z&&(Z=0),Z+Wk>C&&(Z=C-Wk),s=Wk),bb(O,y,Z,x,s),$.visibility=rq,$.background=Q,$.borderRadius=x/2+kp):$.visibility=Vd;var S=H.width*B,p=d.width*B,Z=H.height*B-x-2,y=S*((H.x-d.x)*B/p),q=S*(S/p),$=A.style;p-.5>S?(Wk>q&&(y=y+q/2-Wk/2,0>y&&(y=0),y+Wk>S&&(y=S-Wk),q=Wk),bb(A,y,Z,q,x),$.visibility=rq,$.background=Q,$.borderRadius=x/2+kp):$.visibility=Vd}},setDataModel:function(t){var G=this,e=G._dataModel,Y=G._3o;e!==t&&(e&&(e.umm(G.handleDataModelChange,G),e.umd(G.handleDataPropertyChange,G),e.removeIndexChangeListener(G._75O,G),Y||e.sm().ums(G._16o,G)),G._dataModel=t,t.mm(G.handleDataModelChange,G),t.md(G.handleDataPropertyChange,G),t.addIndexChangeListener(G._75O,G),Y?Y._21I(t):t.sm().ms(G._16o,G),G.invalidateAll(!0),G.fp(Pn,e,t))},handleDataPropertyChange:function(o){this.invalidateData(o.data)},onPropertyChanged:function(o){var E=this,C=o.property;E.redraw(),Vq[C]?E.showScrollBar():C===lf&&E.onCurrentSubGraphChanged(o)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(m){var V=this,l=m.kind,e=m.data;if(V._83I=1,"add"===l)V.invalidateData(e),ns(e)&&e.getEdgeGroup()&&e.getEdgeGroup().eachSiblingEdge(V.invalidateData,V);else if(l===fo){V._21Q(e);var g=e._id,$=V._25I[g];if($){if(V._56I[g]){var P=$._79o();P&&V.redraw(P)}$.dispose(),delete V._25I[g],delete V._24I[g],delete V._56I[g]}e===V._currentSubGraph&&V.setCurrentSubGraph(U)}else l===eh&&(V.invalidateAll(!0),V.setCurrentSubGraph(U))},_75O:function(Z){this.invalidateData(Z.data)},_76O:function(b){var X=this;if(X.isVisible(b)){for(var n=b;n._parent&&X.isVisible(n._parent);)n=n._parent;n&&n!==b&&X._dataModel._76O(n),X._dataModel._76O(b)}},isMovable:function(m){var K=this;return ns(m)&&m.getStyle(Dp)!==Sq?!1:m.s("2d.movable")?K._movableFunc?K._movableFunc(m):!0:!1},isSelectable:function(A){return A.s("2d.selectable")&&this.sm().isSelectable(A)},isEditable:function(P){var p=this;if(!p._editInteractor||!p.isSelected(P))return!1;if($e(P)){var N=p.getDataUI(P);if(!N||N._88I)return!1}return ns(P)&&P.getStyle(Dp)!==Sq?!1:P.s("2d.editable")?p._editableFunc?p._editableFunc(P):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(c){return Fm(c)&&0!==c.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(c):!0},isRectEditable:function(p){return Fm(p)&&0!==p.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(p):!0},isRotationEditable:function(t){return t.setRotation&&t.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(t):!0:!1},getRotationPoint:function(p){var x=rp(p.getRotation(),0,-p.getHeight()/2-(K?32:16)),Q=p.p();return x.x+=Q.x,x.y+=Q.y,x},getLogicalPoint:function(Q){var E=this;return Ah(Q,E._canvas,E.tx(),E.ty(),E._zoom,E._zoom)},getSelectedDataAt:function(i){var I=this;return this.getDataAt(i,function(z){return I.isSelected(z)})},getDataAt:function(p,X,w){p.target&&(p=this.lp(p));var G;return this.reverseEach(function(k){return(X?X(k):this.isSelectable(k))&&this.rectIntersects(k,Vj(p.x,p.y,w))?(G=k,!1):void 0},this),G},getIconInfoAt:function(u,M){var Y=this;if(u.target&&(u=Y.lp(u)),M||(M=Y.getDataAt(u)),M){var e=Y.getDataUI(M);if(e&&e._38o){var X,G=e._38o,L=new rn;for(X in G.icons)L.add(X);for(var $=L.size()-1;$>=0;$--){X=L.get($);for(var J=G.rects[X],Z=J.rotation,P=J.length-1;P>=0;P--){var o=J[P],g=o.width,N=o.height,h={x:u.x-o.x-g/2,y:u.y-o.y-N/2};Z!=U&&(h=rp(-Z,h.x,h.y));var o={x:-g/2,y:-N/2,width:g,height:N};if(Xp(o,h))return{key:X,index:P,name:G.icons[X].names[P],rect:J[P],point:u,rotation:Z,relativeRect:o,relativePoint:h,data:M}}}}}return U},getDatasInRect:function(W,d,e){e===H&&(e=1);var y=this,F=new rn;return y.reverseEach(function(H){e&&!y.isSelectable(H)||(d?y.rectIntersects(H,W):y.rectContains(H,W))&&F.add(H)}),F},moveSelection:function(P,p){var I,m=this,A=m.dm();A&&(I=A.getHistoryManager()),I&&I.beginInteraction(),fs(m.sm().toSelection(m.isMovable,m),P,p),I&&I.endInteraction()},getDataUIBounds:function(f){var G=this.getDataUI(f);return G?G._79o():U},getBoundsForGroup:function(H){return H.s(Ff)?this.getDataUIBounds(H):U},rectIntersects:function(s,L){this.validate();var l=U;if(this._56I[s._id]){var g=this._25I[s._id];if(g){var J=g._79o();if(Nk(L,J))l=!0;else if((L=Ir(L,J))&&(g.rectIntersects&&(l=g.rectIntersects(L)),l==U)){if(!s.s("pixelPerfect"))return!0;var V=L.x,x=L.y,h=L.width,W=L.height,q=1,H=C.hitMaxArea,R=h*W;R>H&&(q=H/R);var A=Bj(h*q,W*q);kk(A,-V*q,-x*q),A.scale(q,q),g._42(A);try{for(var Z=0,p=A.getImageData(0,0,h*q,W*q).data;Z<p.length;Z+=4)if(0!==p[Z+3]){l=!0;break}A.restore()}catch(I){zr=U,l=!0}}}}return l?!0:!1},rectContains:function(W,g){if(this._56I[W._id]){var M=this._25I[W._id];if(M)return Nk(g,M._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(n){var h=this,O=h._focusData,d=O&&h._25I[O._id],Y=0,m=h._dataModel._datas;O&&O._enabled&&O._editable&&d&&d.onKeyDown&&d.onKeyDown(n)===!0||(9===n.keyCode&&(O&&(Y=m.indexOf(O),ng(n)?-1===--Y&&(Y=0):++Y===m.size()&&(Y=0)),h._focusData=O=m.get(Y),h.sm().setSelection(O)),Wi(n)?h.selectAll():Jq(n)&&h.isResettable()&&h.reset(),h.sm().isEmpty()||(Xr(n)&&h.handleDelete(n),kn(n)&&(h.moveSelection(-1,0),h.fi({kind:"moveLeft"})),pb(n)&&(h.moveSelection(0,-1),h.fi({kind:"moveUp"})),Hf(n)&&(h.moveSelection(1,0),h.fi({kind:"moveRight"})),Sf(n)&&(h.moveSelection(0,1),h.fi({kind:"moveDown"}))))},handleScroll:function(w,n){cj(w);var m=this.lp(w);n>0?this.scrollZoomIn(m):0>n&&this.scrollZoomOut(m)},handlePinch:function(J,P,A){P>A?this.pinchZoomIn(J):this.pinchZoomOut(J)},checkDoubleClickOnNote:function(d,U){var q=this,t=q.lp(d),R=q.getDataUI(U),P=R.note2Info;return P&&U.s("note2.toggleable")&&Xp(P.clickRect,t)?(U.s(Gd,!U.s(Gd)),q.fi({kind:"toggleNote2",event:d,data:U}),!0):(P=R.noteInfo,P&&U.s("note.toggleable")&&Xp(P.clickRect,t)?(U.s(pf,!U.s(pf)),q.fi({kind:"toggleNote",event:d,data:U}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function($,x){var r=this,P=r.getAutoScrollZone(),I=P/r.getZoom(),G=P/4,Y=r._29I,l=r.lp($),s={x:r.tx(),y:r.ty()};return l&&P>0&&Y&&(l.x-Y.x<I?r.translate(G,0):Y.x+Y.width-l.x<I&&r.translate(-G,0),l.y-Y.y<I?r.translate(0,G):Y.y+Y.height-l.y<I&&r.translate(0,-G)),s.x=r.tx()-s.x,s.y=r.ty()-s.y,x&&(x.x+=s.x,x.y+=s.y),s},getMoveMode:function(i,A){var I=A.s("2d.move.mode");return I?I:Mq["88"]?"x":Mq["89"]?"y":"xy"}});var nj=function(z,K){var Y=this;Y.gv=z,Y.s=function(E){return K.getStyle(E)},Y._data=K,Y._87I=new rn};ld(nj,O,{_6I:U,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var C=this,X=C.gv.isSelected(C._data);return!X||C.isShadowed()?0:this.s("select.width")},getBodyColor:function(C){var D=this._data,P=this.gv.getBodyColor(D);return P?P:C?D.getStyle(C):U},_2Q:function(v){return this.s(v)},_1Q:function(C,L,X,K){var w=this.s,V=w(L+".dash.color");C.strokeStyle=V,C.lineWidth=X,C.stroke(),w(L+".dash.3d")&&zb(C,V,w(L+".dash.3d.color"),X,this.gv._zoom,w(L+".dash.3d.accuracy")),le(C,K)},invalidate:function(){this._6I=U},_79o:function(){var g=this;if(!g._6I){g.labelInfo=g.label2Info=g.noteInfo=g.note2Info=g._38o=U,g._87I.clear(),g._3O();var k=g._data,o=g.gv;g._55O=o.isEditable(k)?{_42O:o.isRectEditable(k),_43O:o.isPointEditable(k),_56O:o.isRotationEditable(k)}:U,g._6I=g._81o()}return g._6I},_3O:function(){},getPosition:function(){return fl},_68o:function(G,K){G&&this._87I.add(Hp(G,K))},_81o:function(){var G=this,i=G.s;G._24O(Cl,"getLabel"),G._24O(Zp,"getLabel2"),G._26O(yc,"getNote"),G._26O(Lr,"getNote2"),G._15O(),G._55O&&G._48O();
var Y;if(G._87I.each(function(Z){Y=Pl(Y,Z)}),Y&&G.isShadowed()){var R=Ji(Y);R.x+=i("shadow.offset.x"),R.y+=i("shadow.offset.y"),xg(R,i("shadow.blur")),Y=Pl(Y,R)}return G._87I.clear(),Y},_42:function(Y){var c=this,T=c._data,A=c.gv,N=c.s,l=N("opacity"),g=this.isShadowed();if(g){var F=Y.shadowOffsetX,P=Y.shadowOffsetY,W=Y.shadowBlur,e=Y.shadowColor;Y.shadowOffsetX=N("shadow.offset.x"),Y.shadowOffsetY=N("shadow.offset.y"),Y.shadowBlur=N("shadow.blur"),Y.shadowColor=N("shadow.color")}if(l!=U){var V=Y.globalAlpha;Y.globalAlpha=l}c._80o(Y),A.isLabelVisible(T)&&(Mn(Y,c.labelInfo),Mn(Y,c.label2Info)),A.isNoteVisible(T)&&(Jh(Y,c.noteInfo),Jh(Y,c.note2Info)),c._99O(Y),l!=U&&(Y.globalAlpha=V),g&&(Y.shadowOffsetX=F,Y.shadowOffsetY=P,Y.shadowBlur=W,Y.shadowColor=e),c._55O&&A.isEditVisible(T)&&c._47O(Y)},_80o:function(){},_47O:function(){},_24O:function(z,x){var O=this,L=O._data,W=O.gv,C=O.s,$=W[x](L);if($!=U){var i=C(z+".scale"),X=C(z+".max"),m=C(z+".position"),n=O[z+"Info"]={label:$,scale:i,color:W[x+"Color"](L),font:C(z+".font"),opacity:C(z+".opacity"),align:C(z+".align"),rotation:O.getRotation(C(z+".rotation"),!1,m),background:W[x+"Background"](L)},F=Fg(n,$);X>0&&X<F.width&&(n.labelWidth=F.width,F.width=X),1!==i&&(F.width*=i,F.height*=i);var h=O.getPosition(m,C(z+".offset.x"),C(z+".offset.y"),F,C(z+".position.fixed"));if(F.x=h.x-F.width/2,F.y=h.y-F.height/2,O._68o(n.rect=F,n.rotation),1!==i){var a=F.width/i,y=F.height/i;n.rect={x:h.x-a/2,y:h.y-y/2,width:a,height:y}}}},_26O:function(l,c){var k=this,r=k.gv,T=k._data,A=k.s,C=r[c](T);if(C!=U){var $,m,f=A(l+".scale"),d=k[l+"Info"]={note:C,scale:f,data:T,view:r,expanded:A(l+".expanded"),font:A(l+".font"),color:A(l+".color"),opacity:A(l+".opacity"),align:A(l+".align"),icon:A(l+".icon"),backgroundImage:A(l+".backgroundImage"),borderWidth:A(l+".border.width"),borderColor:A(l+".border.color"),background:r[c+"Background"](T)},g=k.getPosition(A(l+".position"),A(l+".offset.x"),A(l+".offset.y")),V=g.x,G=g.y;if(d.expanded){var P,y=A(l+".max"),Y=A(l+".backgroundImage");Y?(Y=Kf(Y),P={width:Sb(Y,T),height:sd(Y,T)}):P=Fg(d,C),P.width+=6,P.height+=2,y>0&&y<P.width&&(d.labelWidth=P.width,P.width=y),$=P.width,m=P.height+8,d.clickRect={x:V-$*f/2,y:G-m*f,width:$*f,height:m*f*P.height/m}}else{var K=A(l+".icon");K?(K=Kf(K),$=Sb(K,T),m=sd(K,T)):($=12,m=18),d.clickRect={x:V-$*f/2,y:G-m*f,width:$*f,height:m*f}}d.rect={x:V-$/2,y:G-m*f/2-m/2,width:$,height:m};var w=S(d.borderWidth/2)*f;k._68o({x:V-$*f/2-w,y:G-m*f-w,width:$*f+2*w,height:m*f+2*w})}},_48O:function(){},_99O:function(b){var h=this,p=h._38o;if(p){var $=h.gv,H=h._data,o=p.icons;for(var l in o){var O=o[l],B=p.rects[l];if(B){var V=un(O.opacity,H,$),g=un(O.names,H,$),m=g?g.length:0,s=B.rotation;if(V!=U){var R=b.globalAlpha;b.globalAlpha*=V}for(var u=0;m>u;u++){var w=g[u],M=Kf(w),L=B[u];if(s){var j=L.x+L.width/2,C=L.y+L.height/2;b.save(),kk(b,j,C),_f(b,s),kk(b,-j,-C)}Wc(b,M,un(O.stretch,H,$),L.x,L.y,L.width,L.height,h._data,h.gv),s&&b.restore()}V!=U&&(b.globalAlpha=R)}}}}});var cs=function(X,O){si(cs,this,[X,O])};ld(cs,nj,{_40O:function(o,D){var n=this,A=n.s,x=o.rect;(o.borderColor=n.gv.getBorderColor(n._data))&&(o.borderType=A("border.type"),o.borderWidth=A("border.width"),o.borderPadding=A("border.padding"),D=W(D,o.borderPadding+o.borderWidth/2)),(o.selectWidth=n._2o())&&(o.selectType=A("select.type"),o._97o=A("select.color"),o.selectPadding=A("select.padding"),D=W(D,o.selectPadding+o.selectWidth/2)),D>0&&(x=Ji(x),xg(x,D)),n._68o(x)},_39O:function(m,F){var Y=F.rect;if(F.borderWidth>0){var y=F.borderPadding;m.strokeStyle=F.borderColor,m.lineWidth=F.borderWidth,Db(m,F.borderType,{x:Y.x-y,y:Y.y-y,width:Y.width+2*y,height:Y.height+2*y}),m.stroke()}F.selectWidth>0&&(y=F.selectPadding,m.strokeStyle=F._97o,m.lineWidth=F.selectWidth,Db(m,F.selectType,{x:Y.x-y,y:Y.y-y,width:Y.width+2*y,height:Y.height+2*y}),m.stroke())},_3O:function(){var Q=this,k=Q.s,I=Q._data,t=I.getStyle(rb),j=Q.getBodyColor(),z=Q._83o=t?{shape:t,_53o:Q.getBodyColor("shape.background"),_27Q:Kf(k("shape.repeat.image"),j),_54o:k("shape.border.width"),_55o:k("shape.border.color"),_56o:k("shape.border.3d"),_57o:k("shape.border.3d.color"),_58o:k("shape.border.3d.accuracy"),shapeGradient:k("shape.gradient"),_59o:k("shape.gradient.color"),_60o:k("shape.border.pattern"),_61o:k("shape.border.cap"),_62o:k("shape.border.join")}:{img:Kf(I.getImage(),j),bodyColor:j,stretch:k("image.stretch")};R&&!n||(z.rect=I.getRect(),z.position=I.p(),z.rotation=I.getRotation(),t===Zo&&(z._63o=k("shape.depth")),Q._40O(z,t?yo(U,z._54o/2,z._62o):0))},getPosition:function(v,f,O,N){var M=eg(v,this._83o.rect,N);return M.x+=f,M.y+=O,M},_80o:function(A){var B=this,t=B.s,V=B.gv,P=B._data,j=B._83o,H=j.rect,f=H,b=j.position,F=j.rotation,g=j.shape;if(H.width>0&&H.height>0){if(F&&(A.save(),kk(A,b.x,b.y),_f(A,F),kk(A,-b.x,-b.y),f=P.getSize(),f.x=b.x-f.width/2,f.y=b.y-f.height/2),B.freeDraw)B.freeDraw(A,f,j);else if(g){var z,r,M,k,G=j._60o,l=mb(A,G),L=j._53o,D=j._27Q,W=j._54o,w=j._55o,S=A.lineJoin,O=A.lineCap;if("roundRect"===g?z=t("shape.corner.radius"):"polygon"===g?z=t("shape.polygon.side"):"arc"===g&&(z=t("shape.arc.from"),r=t("shape.arc.to"),M=t("shape.arc.close"),k=t("shape.arc.oval")),A.lineJoin=j._62o,A.lineCap=j._61o,L||D?(D?fm(A,D):mq(A,L,j.shapeGradient,j._59o,f),Db(A,g,f,z,r,M,k),A.fill(),A!==l&&Db(l,g,f,z,r,M,k)):Db(l,g,f,z,r,M,k),W>0&&(A.lineWidth=W,A.strokeStyle=w,A.stroke(),j._56o&&zb(A,w,j._57o,W,V._zoom,j._58o)),le(A,G),t("shape.dash")){var Z=t("shape.dash.width")||W;if(Z>0){G=t("shape.dash.pattern");var l=mb(A,G,B._2Q("shape.dash.offset"));l!==A&&Db(l,g,f,z,r,M,k),B._1Q(A,"shape",Z,G)}}Ab(A,L,j._63o,f),A.lineJoin=S,A.lineCap=O}else Wc(A,j.img,j.stretch,f.x,f.y,f.width,f.height,P,V,j.bodyColor);F&&A.restore()}B._39O(A,j)},_48O:function(){var Q,K=this,F=K._data,U=K.gv,L=K._55O,u=U.getEditPointSize()/2+2;if(L._42O&&(Q=F.getRect(),xg(Q,u)),L._56O){var j=L._98o=U.getRotationPoint(F);Q=Pl(Q,{x:j.x-u,y:j.y-u,width:2*u,height:2*u})}K._68o(Q)},_47O:function(X){var U=this,J=U.gv,t=U._55O,N=U._data.getRect(),u=J.getEditPointSize(),h=t._98o;t._42O&&(X.fillStyle=J.getEditPointBackground(),X.strokeStyle=J.getEditPointBorderColor(),X.lineWidth=1,[{x:N.x,y:N.y},{x:N.x+N.width/2,y:N.y},{x:N.x+N.width,y:N.y},{x:N.x,y:N.y+N.height/2},{x:N.x+N.width,y:N.y+N.height/2},{x:N.x,y:N.y+N.height},{x:N.x+N.width/2,y:N.y+N.height},{x:N.x+N.width,y:N.y+N.height}].forEach(function(F){rf(X,F.x-u/2,F.y-u/2,u,u),X.stroke()})),t._56O&&(X.fillStyle=J.getEditPointBorderColor(),X.strokeStyle=J.getEditPointBackground(),X.lineWidth=1,X.beginPath(),X.arc(h.x,h.y,u/2,0,_,!0),X.fill(),X.stroke())}});var Lj=function(_,O){si(Lj,this,[_,O])},Rm=function(J,Z,l,g){var H=Qh(J,Z);return l=g?Y(l,H):ph(l,H),H?l/=H:l=0,{x:J.x+(Z.x-J.x)*l,y:J.y+(Z.y-J.y)*l}};ld(Lj,nj,{_3O:function(){var u,c=this,L=c._data,M=c.gv,b=c.s,z=b(Dp),o=L.isLooped(),$=b("edge.width"),T=b("edge.center"),K=b("edge.offset"),Q=M.getBorderColor(L),P=Q?b("border.width"):0,i=c._2o(),p=L._40I,w=L._41I,_=c._78o=p&&w?{looped:o,type:z,width:$,center:T,color:c.getBodyColor("edge.color"),borderColor:Q,borderWidth:P,_97o:i?b("select.color"):U,selectWidth:i,pattern:b("edge.pattern"),cap:b("edge.cap"),join:b("edge.join"),is3d:b("edge.3d"),_67o:b("edge.3d.color"),_66o:b("edge.3d.accuracy")}:U;if(_){var E=C.getEdgeType(z);if(E){var g=E(L,ig(c,M,L,o,z),M,c._19Q);g.points&&g.points.size()>1&&(_._4O=g,u=xd(_._4O.points))}else{var A=rr(M,p,b("edge.source.position"),b("edge.source.offset.x"),b("edge.source.offset.y")),m=rr(M,w,b("edge.target.position"),b("edge.target.offset.x"),b("edge.target.offset.y"));if(z===Sq){var s=_.points=b(lp)||po,q=s.size();if(_.segments=b("edge.segments"),!T)if(K){var l=Rm(A,q?s.get(0):m,K,q),e=Rm(m,q?s.get(q-1):A,K,q);A=l,m=e}else{var J=wd(M,p),D=wd(M,w),Y=Mk(A,q?s.get(0):m,J);Y&&(A={x:Y[0],y:Y[1]}),Y=Mk(q?s.get(q-1):A,m,D),Y&&(m={x:Y[0],y:Y[1]})}u=Pl(xd(_.points),xd(A,m))}else{var d=ig(c,M,L,o,z);if(c._19Q||(d=-d),o)A=Ji(A),A.x-=p.getWidth()/2,_.radius=d,u={x:A.x-d,y:A.y-d,width:2*d,height:2*d};else{var X=Qh(A,m),r=ph(K,X),l={x:r,y:d},e={x:X-r,y:d},R=v(m.y-A.y,m.x-A.x),k=_.mat=new Pq(R);if(_.orienAngle=R,_.angle=m.x<A.x?R+G:R,_.rect={x:l.x,y:l.y,width:e.x-l.x,height:0},_.origin=A,l=k.tf(l),l.x+=A.x,l.y+=A.y,e=k.tf(e),e.x+=A.x,e.y+=A.y,T){var O={x:X,y:0};O=k.tf(O),O.x+=A.x,O.y+=A.y,u=xd([A,l,e,O]),_.c1=A,_.c2=O}else u=xd(l,e);A=l,m=e}}_._69o=A,_._70o=m}yo(u,$/2+P+i,_.join),c._68o(u)}},getRotation:function(V,Z,h){V=V||0;var l=this._78o;if(l){var G,t=l.angle,S=l.points,a=l._4O;if(t!=U)return Z?l.orienAngle+V:t+V;if(a){var L=a.points;return G=L.size(),Vo[h]?G&&0===G%2?lc(L.get(G/2-1),L.get(G/2),Z,V):V:xq[h]?lc(L.get(0),L.get(1),Z,V):lc(L.get(G-2),L.get(G-1),Z,V)}if(S)return G=S.size(),Vo[h]?G&&0===G%2?lc(S.get(G/2-1),S.get(G/2),Z,V):V:xq[h]?lc(l._69o,G?S.get(0):l._70o,Z,V):lc(G?S.get(G-1):l._69o,l._70o,Z,V)}return V},getPosition:function(D,C,h,O,p){var g=this._78o;if(g){var i,E=g.type,P=g.points,M=g._4O,k=g._69o,f=g._70o;if(!E)return g.looped?{x:k.x-g.radius+C,y:k.y+h}:(p&&k&&f&&(k.x>f.x||k.x===f.x&&k.y>f.y)&&(D=Fq[D],h=-h),i=eg(D,g.rect,O),i.x+=C,i.y+=h,i=g.mat.tf(i),i.x+=g.origin.x,i.y+=g.origin.y,i);if(P){var i,s=P.size();if(Vo[D]){if(s){var $=s%2;if(0===$)return uf(P.get(s/2-1),P.get(s/2),D,C,h,O,p);i=P.get((s-$)/2)}else i={x:(k.x+f.x)/2,y:(k.y+f.y)/2};return i=eg(D,{x:i.x,y:i.y,width:0,height:0},O),i.x+=C,i.y+=h,i}return xq[D]?uf(k,s?P.get(0):f,D,C,h,O,p):uf(s?P.get(s-1):k,f,D,C,h,O,p)}if(M){var H=M.points,s=H.size();if(Vo[D]){var $=s%2;return 0===$?uf(H.get(s/2-1),H.get(s/2),D,C,h,O,p):(i=H.get((s-$)/2),i=eg(D,{x:i.x,y:i.y,width:0,height:0},O),i.x+=C,i.y+=h,i)}return xq[D]?uf(H.get(0),H.get(1),D,C,h,O,p):uf(H.get(s-2),H.get(s-1),D,C,h,O,p)}}return fl},_42:function(Q){this._78o&&Lj.superClass._42.call(this,Q)},drawPath:function(q,o){q.beginPath();var r=o.type,u=o.points,k=o.segments,Q=o._4O;if(!r||u){var V=o._69o,X=V.x,p=V.y,y=o._70o,f=y.x,A=y.y;if(r)if(k){var d=new rn({x:X,y:p});d.addAll(u),d.add({x:f,y:A}),ko(q,d,k)}else q.moveTo(X,p),u.each(function(y){q.lineTo(y.x,y.y)}),q.lineTo(f,A);else o.looped?q.arc(X,p,o.radius,0,_,!0):o.center?(q.moveTo(o.c1.x,o.c1.y),q.lineTo(X,p),q.lineTo(f,A),q.lineTo(o.c2.x,o.c2.y)):(q.moveTo(X,p),q.lineTo(f,A))}else Q&&ko(q,Q.points,Q.segments)},_80o:function(g){var A=this,d=A.s,H=A._78o,k=H.width,U=H.selectWidth,q=H.borderWidth,B=H.color,y=g.lineJoin,N=g.lineCap,l=H.pattern;if(g.lineJoin=H.join,g.lineCap=H.cap,A.drawPath(mb(g,l),H),U&&(g.strokeStyle=H._97o,g.lineWidth=k+2*(q+U),g.stroke()),q&&(g.strokeStyle=H.borderColor,g.lineWidth=k+2*q,g.stroke()),g.strokeStyle=B,g.lineWidth=k,g.stroke(),H.is3d&&zb(g,B,H._67o,k,A.gv._zoom,H._66o),le(g,l),d("edge.dash")){l=d("edge.dash.pattern");var c=mb(g,l,A._2Q("edge.dash.offset"));c!==g&&A.drawPath(c,H),A._1Q(g,"edge",d("edge.dash.width")||k,l)}g.lineJoin=y,g.lineCap=N},_48O:function(){var U=this,Z=U._78o;if(U._55O._43O&&Z&&Z.points){var e=xd(Z.points);e&&(xg(e,U.gv.getEditPointSize()/2+2),U._68o(e))}},_47O:function(D){var O=this,X=O.gv,w=O._78o;if(O._55O._43O&&w&&w.points){var H=X.getEditPointSize()/2;D.fillStyle=X.getEditPointBackground(),D.strokeStyle=X.getEditPointBorderColor(),D.lineWidth=1,w.points.each(function(V){D.beginPath(),D.arc(V.x,V.y,H,0,_,!0),D.fill(),D.stroke()})}},_71o:function(l,O){var S=this,Q=S._data;if(S._19Q=!0,!Q.getEdgeGroup())return l?Q.s("edge.gap"):0;var w,A=0,R=0,p=0;if(Q.getEdgeGroup().getSiblings().each(function(e){e.each(function(W){if(S.gv.isVisible(W)&&W.s(Dp)==O){var H=W.s("edge.gap");w?(R+=p/2+H/2,p=H):(w=W,p=H),W===Q&&(A=R)}})}),l)return R-A+p;var g=A-R/2;return w&&Q._40I!==w._40I&&(S._19Q=!1),g}});var wo=function(y,h){si(wo,this,[y,h])};ld(wo,cs,{_3O:function(){var b,g,d=this,t=d.s,B=d._data,Y=d.gv;if(d._88I=U,B.isExpanded()&&B.eachChild(function(w){var d=Y.getBoundsForGroup(w);d&&(g||(g=[]),g.push(d),b=Pl(b,d))}),b){var J=Y.getLabel(B),m=t("group.type");b=cc(m,g,b),zc(b,B,"group.padding",1);var P=d._88I={type:m,rect:b,_64o:b};if(!m&&J!=U){var F,O=d.labelInfo={label:J,color:t("group.title.color"),font:t("group.title.font")},q=Fg(O,J),R=q.width,p=q.height,x=t("group.title.align");R>b.width&&(b.width=R),O.rect={y:b.y-p,width:q.width,height:p},F=x===nd?b.x:x===ib?b.x+b.width-R:b.x+b.width/2-R/2,O.rect.x=F,P.titleRect={x:b.x,y:b.y-p,width:b.width,height:p+1},P.rect={x:b.x,y:b.y-p,width:b.width,height:b.height+p}}d._40O(P,t("group.border.width")/2)}else wo.superClass._3O.call(d)},getPosition:function(k,O,X,c){var R=this._88I;if(R){var j=eg(k,R.rect,c);return j.x+=O,j.y+=X,j}return wo.superClass.getPosition.apply(this,arguments)},_24O:function(L,O){var o=this._88I;(!o||o.type||"label2"===L)&&wo.superClass._24O.call(this,L,O)},_80o:function(t){var f=this,$=f._88I;if($){var E=f._data,N=f.s,M=f.gv,L=$.type,G=$.rect,I=$._64o,P=$.titleRect,k=f.getBodyColor(),e=Kf(N("group.image"),k),u=N("group.image.stretch"),j=f.getBodyColor("group.background"),z=Kf(N("group.repeat.image"),k),H=N("group.gradient"),l=N("group.gradient.color"),s=N("group.depth");if(L){var S=N("group.border.pattern"),h=N("group.border.width"),c=t.lineJoin,U=t.lineCap;if(t.lineJoin=N("group.border.join"),t.lineCap=N("group.border.cap"),e){if(t.save(),Db(t,L,G),t.clip(),Wc(t,e,u,G.x,G.y,G.width,G.height,E,M,k),t.restore(),h>0){var m=mb(t,S);Db(m,L,G),t.lineWidth=h,t.strokeStyle=N("group.border.color"),t.stroke(),le(t,S)}}else{var m=mb(t,S);j||z?(z?fm(t,z):mq(t,j,H,l,G),Db(t,L,G),t.fill(),t!==m&&Db(m,L,G)):Db(m,L,G),h>0&&(t.lineWidth=h,t.strokeStyle=N("group.border.color"),t.stroke()),le(t,S),L===Zo&&Ab(t,j,s,G)}t.lineJoin=c,t.lineCap=U}else if(e?Wc(t,e,u,I.x,I.y,I.width,I.height,E,M,f.getBodyColor()):(j||z)&&(z?fm(t,z):mq(t,j,H,l,I),Db(t,Zo,I),t.fill(),Ab(t,j,s,I)),P){var n=N("group.title.background");rf(t,P.x,P.y,P.width,P.height,n),Ab(t,n,s,P)}f._39O(t,$)}else wo.superClass._80o.call(f,t)}});var al=function(t,U){si(al,this,[t,U])};ld(al,cs,{_3O:function(){var x=this,J=x._data,L=x.s,S=x.gv,b=J.getPoints(),$=S.getBorderColor(J),q=$?L("border.width"):0,r=x._2o(),M=L("shape.border.width"),P=J.getRect(),v=S.getBodyColor(J),B=x._99o=b.isEmpty()?U:{rect:P,rotation:J.getRotation(),position:J.p(),points:b,segments:J.getSegments(),bodyColor:v,borderColor:$,borderWidth:q,_94o:L("shape.border.3d"),_95o:L("shape.border.3d.color"),_96o:L("shape.border.3d.accuracy"),_97o:r?L("select.color"):U,selectWidth:r,_53o:L("shape.background"),_27Q:Kf(L("shape.repeat.image"),v),_54o:M,_55o:L("shape.border.color"),shapeGradient:L("shape.gradient"),_59o:L("shape.gradient.color"),_60o:L("shape.border.pattern"),_61o:L("shape.border.cap"),_62o:L("shape.border.join")};if(B){var f=M/2+q+r;f&&(P=Ji(P),yo(P,f,B._62o)),x._68o(P)}},getPosition:function(J,p,f,G){var Y=this._99o;if(Y){var X=eg(J,Y.rect,G);return X.x+=p,X.y+=f,X}return fl},_42:function(y){this._99o&&al.superClass._42.call(this,y)},_80o:function(y){var g,r=this,H=r.s,L=r._99o,E=L.position,O=L.rotation,D=L.bodyColor,d=L.borderWidth,l=L.selectWidth,F=L._53o,k=L._27Q,b=L._54o,w=L.points,u=L.segments,W=r._data.isClosePath();O&&(y.save(),kk(y,E.x,E.y),_f(y,O),kk(y,-E.x,-E.y));var A=L._60o,V=mb(y,A),T=y.lineJoin,S=y.lineCap;if(y.lineJoin=L._62o,y.lineCap=L._61o,F||k?(k?fm(y,k):(g=D?D:F,mq(y,g,L.shapeGradient,L._59o,L.rect)),ko(y,w,u,W),y.fill(),V!==y&&ko(V,w,u,W)):ko(V,w,u,W),l&&(y.strokeStyle=L._97o,y.lineWidth=b+2*(d+l),y.stroke()),d&&(y.strokeStyle=L.borderColor,y.lineWidth=b+2*d,y.stroke()),b&&(g=L._55o,!F&&D&&(g=D),y.strokeStyle=g,y.lineWidth=b,y.stroke(),L._94o&&zb(y,g,L._95o,b,r.gv._zoom,L._96o)),le(y,A),H("shape.dash")){var N=H("shape.dash.width")||b;if(N>0){A=H("shape.dash.pattern");var V=mb(y,A,r._2Q("shape.dash.offset"));V!==y&&ko(V,w,u,W),r._1Q(y,"shape",N,A)}}y.lineJoin=T,y.lineCap=S,O&&y.restore()},_48O:function(){var q=this;if(al.superClass._48O.call(q),q._55O._43O){var X=q._data.getRect();xg(X,q.gv.getEditPointSize()/2+2),q._68o(X)}},_47O:function(k){var K=this;if(al.superClass._47O.call(K,k),K._55O._43O){var F=K.gv,I=F.getEditPointSize()/2;k.fillStyle=F.getEditPointBackground(),k.strokeStyle=F.getEditPointBorderColor(),k.lineWidth=1,K._data.getPoints().each(function(w){k.beginPath(),k.arc(w.x,w.y,I,0,_,!0),k.fill(),k.stroke()})}}});var Sh=function(I,j){si(Sh,this,[I,j])};ld(Sh,al,{getRotation:function(M,n,h){M=M||0;var c=this._data.getPoints(),R=c.size();return R>1?Vo[h]?R&&0===R%2?lc(c.get(R/2-1),c.get(R/2),n,M):M:xq[h]?lc(c.get(0),c.get(1),n,M):lc(c.get(R-2),c.get(R-1),n,M):M},getPosition:function(g,D,a,e,n){var f=this._data.getPoints(),c=f.size();if(c>1){if(Vo[g]){var A=c%2;if(0===A)return uf(f.get(c/2-1),f.get(c/2),g,D,a,e,n);var Z=f.get((c-A)/2),i={x:Z.x,y:Z.y,width:0,height:0};return Z=eg(g,i,e),Z.x+=D,Z.y+=a,Z}return xq[g]?uf(f.get(0),f.get(1),g,D,a,e,n):uf(f.get(c-2),f.get(c-1),g,D,a,e,n)}return fl}});var ys=function(X,A){si(ys,this,[X,A])};ld(ys,cs,{_3O:function(){var f=this;ys.superClass._3O.call(f);var Y=f.s,O=f._83o;f._82o=O.img||O.shape?U:{background:f.getBodyColor("grid.background"),depth:Y("grid.depth"),rect:O.rect,_88o:Y("grid.cell.depth"),cellBorderColor:Y("grid.cell.border.color"),_89o:Y("grid.row.count"),_90o:Y("grid.column.count"),block:Y("grid.block"),_91o:Y("grid.block.color"),_92o:Y("grid.block.padding"),_93o:Y("grid.block.width")}},_80o:function(Y){var J=this,A=J._82o;if(!A)return ys.superClass._80o.call(J,Y),void 0;var H,N,R=J._data,U=A.background,n=A.rect,C=A.block,B=A._91o,S=A._92o,k=A._93o,m=A._88o,L=A.cellBorderColor,w=A._89o,E=A._90o;if(U)if(rf(Y,n.x,n.y,n.width,n.height,U),Ab(Y,U,A.depth,n),m)for(H=0;w>H;H++)for(N=0;E>N;N++)n=R.getCellRect(H,N),n&&Ab(Y,U,m,n);else if(L){for(Y.beginPath(),H=0;w>H;H++)for(N=0;E>N;N++)n=R.getCellRect(H,N),n&&Y.rect(n.x,n.y,n.width,n.height);Y.strokeStyle=L,Y.lineWidth=1,Y.stroke()}if("h"===C)for(H=0;w>H;H++)n=Pl(R.getCellRect(H,0),R.getCellRect(H,E-1)),xg(n,S),zn(Y,B,n.x,n.y,n.width,n.height,k);else if("v"===C)for(N=0;E>N;N++)n=Pl(R.getCellRect(0,N),R.getCellRect(w-1,N)),xg(n,S),zn(Y,B,n.x,n.y,n.width,n.height,k);J._39O(Y,J._83o)}});var jf=_r.Interactor=function(e){this.gv=this._graphView=e};xj("Interactor",O,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(b){this.gv.fi(b)},setCursor:function(x){K||(this.getView().style.cursor=x)},startDragging:function(W){var y=this;y._lastClientPoint=yf(W),y._lastLogicalPoint=y.gv.lp(W),ds(y,W)},clearDragging:function(){var E=this;E._lastClientPoint=E._lastLogicalPoint=E._logicalPoint=U},autoScroll:function(M){return this.gv.autoScroll(M,this._lastClientPoint)}});var dc=_r.DefaultInteractor=function(t){si(dc,this,[t])};xj("DefaultInteractor",jf,{handle_mousedown:function(P){cj(P);var r=this,X=r.gv,H=X.getDataAt(P);X.setFocus(P)&&!X._editing&&(Bm(P)?X.handleDoubleClick(P,H):X.handleClick(P,H),X.isPannable()&&!H&&cf(P)&&!Op(P)&&(r._tx=X.tx(),r._ty=X.ty(),r.startDragging(P)))},handleWindowMouseUp:function(q){var k=this,t=k.gv;t._panning&&(delete t._panning,t.onPanEnded(),k.fi({kind:"endPan",event:q})),delete k._tx,delete k._ty,k.clearDragging()},handle_mousemove:function(D){var K=this,v=K.gv;K._hoverTimer&&(y(K._hoverTimer),delete K._hoverTimer),K._hoverTimer=T(function(){K.fi({kind:"hover",event:D}),y(K._hoverTimer),delete K._hoverTimer},v.getHoverDelay()||800)},handle_touchmove:function(c){this.handle_mousemove(c)},handleWindowMouseMove:function(N){var D=this,g=D.gv,F=D._lastClientPoint;D.fi({kind:g._panning?"betweenPan":"beginPan",event:N}),g._panning=1,g.setTranslate(D._tx+N.clientX-F.x,D._ty+N.clientY-F.y)},handle_mousewheel:function(f){this.gv.handleScroll(f,f.wheelDelta)},handle_DOMMouseScroll:function(c){2===c.axis&&this.gv.handleScroll(c,-c.detail)},handle_keydown:function(i){this.gv.handleKeyDown(i)}});var uq=_r.SelectInteractor=function(O){si(uq,this,[O])};xj("SelectInteractor",jf,{_42:function(){var P=this,h=P.gv,x=h.getZoom(),t=P.mark,M=P.div;M||(M=P.div=xk(),sk(P.getView(),M));var C={};C.x=t.x*x+h.tx(),C.y=t.y*x+h.ty(),C.width=t.width*x,C.height=t.height*x,bb(M,C),this.intersects()?(M.style.border="",M.style.background=h.getRectSelectBackground()):(M.style.background="",M.style.border="1px solid "+h.getRectSelectBorderColor())},handle_mousedown:function(E){var r=this,A=r.gv;if(r._57I=U,!A._editing){var B=A.getDataAt(E),Z=A.sm();B?Op(E)?Z.co(B)?Z.rs(B):Z.as(B):Z.co(B)||Z.ss(B):Op(E)||!A.isPannable()?cf(E)&&(Op(E)||Z.cs(),A.isRectSelectable()&&(r.startDragging(E),A._77O=1)):r._57I=yf(E)}},handle_mouseup:function(t){var D=this,N=D._57I;N&&(Qh(N,yf(t))<=1&&D.gv.sm().cs(),D._57I=U)},handleWindowMouseUp:function(Z){this.clear(Z)},handleWindowMouseMove:function(U){var z=this,t=z.gv;z._logicalPoint=t.lp(U),z.mark?(z.fi({kind:"betweenRectSelect",event:U}),z.autoScroll(U),z.redraw()):z.fi({kind:"beginRectSelect",event:U}),z.mark=xd(z._lastLogicalPoint,z._logicalPoint),z.redraw()},intersects:function(){var c=this,j=c._lastLogicalPoint,I=c._logicalPoint;return j.x>I.x||j.y>I.y},clear:function(u){var S=this,X=S.gv,h=S.mark;if(S._57I=U,S._lastLogicalPoint){if(h){if(0!==h.width&&0!==h.height){var b=X.getDatasInRect(h,S.intersects());if(!b.isEmpty()){var C=X.sm(),M=C.toSelection();b.each(function(D){C.co(D)?M.remove(D):M.add(D)}),C.ss(M)}}xc(S.div),delete S.div,delete S.mark,S.redraw(),S.fi({kind:"endRectSelect",event:u}),X.onRectSelectEnded()}S.clearDragging(),delete X._77O}},redraw:function(){var t=this;t._draw||(t._draw=1,T(function(){t.mark&&t._42(),delete t._draw},16))}});var Zr=_r.MoveInteractor=function(R){si(Zr,this,[R])};xj("MoveInteractor",jf,{handle_mousedown:function(e){var B=this,g=B.gv;if(cf(e)&&!g._editing){var A=g.getSelectedDataAt(e);A?(B._data=A,g.handleMouseDown&&g.handleMouseDown(e,A),B.startDragging(e),g.isMovable(A)&&(g._moving=1)):g._focusData=U}},handleWindowMouseUp:function(b){var s=this,W=s.gv;W.handleMouseUp&&W.handleMouseUp(b,s._data),s.clear(b)},handleWindowMouseMove:function(r){var c=this,t=c.gv,R=c._data,K=t.getDataModel(),M=K.getHistoryManager();if((!t._93O||!t._93O(r,R))&&t._moving){var m=c._logicalPoint?"betweenMove":"beginMove",U={kind:m,event:r},s=c._logicalPoint=t.lp(r);M&&"beginMove"===m&&M.beginInteraction();var h=s.x-c._lastLogicalPoint.x,I=s.y-c._lastLogicalPoint.y,C=t.getMoveMode(r,R);C&&("x"===C?I=0:"y"===C?h=0:"xy"!==C&&(h=I=0)),t.moveSelection(h,I),c._lastLogicalPoint=s,c.autoScroll(r),c.fi(U)}},clear:function(i){var b=this,M=b.gv,W=M.getDataModel(),o=W.getHistoryManager();b._lastLogicalPoint&&(b._lastLogicalPoint=b._data=M._moving=U,b._logicalPoint&&(b.fi({kind:"endMove",event:i}),M.onMoveEnded(),o&&o.endInteraction()),b.clearDragging())}});var oe=_r.EditInteractor=function(C){si(oe,this,[C])};xj("EditInteractor",jf,{ms_edit:1,setUp:function(){var Z=this;oe.superClass.setUp.call(Z),K||Z.gv.setEditInteractor(Z)},tearDown:function(){oe.superClass.tearDown.call(this),K||this.gv.setEditInteractor(U)},clear:function(){var l=this,w=l.gv;w._editing&&(w._editing=l._77I=l._node=l._edge=l._shape=l._rect=l._89I=l._index=U,l.clearDragging(),l.setCursor(s))},handle_mousedown:function(Y){var j=this,S=j.gv.dm(),e=S.getHistoryManager(),A=j._index,s=j._node,y=j._shape,W=j._edge,u=j._77I,a=j._89I;cf(Y)&&j.gv._editing&&(s&&a?(j._rect=s.getRect(),j.startDragging(Y),e&&e.beginInteraction(),j.fi({kind:"beginEditRect",event:Y,data:s,direction:a})):y&&A>=0?(j.startDragging(Y),e&&e.beginInteraction(),j.fi({kind:"beginEditPoint",event:Y,data:y,index:A})):W&&A>=0?(j.startDragging(Y),e&&e.beginInteraction(),j.fi({kind:"beginEditPoint",event:Y,data:W,index:A})):u&&(j.startDragging(Y),e&&e.beginInteraction(),j.fi({kind:"beginEditRotation",event:Y,data:u})))},handleWindowMouseUp:function(c){this._46O(c),this.clear()},handleWindowMouseMove:function(_){this._78I(_)},handle_mousemove:function(t){if(!bs){var T=this,n=T.gv;T._79I(t,n.getSelectedDataAt(t))?n._editing=1:T.clear()}}});var ws=_r.TouchInteractor=function(C,e){e=e||{},e.selectable===H&&(e.selectable=!0),e.movable===H&&(e.movable=!0),e.pannable===H&&(e.pannable=!0),e.pinchable===H&&(e.pinchable=!0),e.editable===H&&(e.editable=!0),this.params=e,si(ws,this,[C])};xj("TouchInteractor",jf,{ms_edit:1,setUp:function(){var S=this;ws.superClass.setUp.call(S),K&&S.params.editable&&S.gv.setEditInteractor(S)},tearDown:function(){var J=this;ws.superClass.tearDown.call(J),K&&J.params.editable&&J.gv.setEditInteractor(U)},clear:function(q){var W=this,J=W.gv,e=J.dm().getHistoryManager();J._moving&&(W.fi({kind:"endMove",event:q}),delete J._moving,J.onMoveEnded(),e&&e.endInteraction()),J._panning&&(W.fi({kind:"endPan",event:q}),delete J._panning,J.onPanEnded()),J._pinching&&(W.fi({kind:"endPinch",event:q}),delete J._pinching,J.onPinchEnded()),J._editing&&(W._46O(q),W._77I=W._node=W._edge=W._shape=W._rect=W._89I=W._index=J._editing=U),W._moving=W._panning=W._pinching=W._editing=W._57I=W._data=W._beginHistory=U,W.clearDragging()},handle_touchstart:function(V){var E=this;if(!E.gv._editing){cj(V),E._57I=U;var O=E.params,A=E.gv,o=A.sm(),l=A.getDataAt(V),N=Nn(V);if(1===N)Bm(V)?A.handleDoubleClick(V,l):(A.handleClick(V,l),l&&(A.handleMouseDown&&A.handleMouseDown(V,l),E._data=l)),O.selectable||(l=U),l?(o.co(l)||o.ss(l),O.editable&&A.isEditable(l)&&E._79I(V,l,!0)?(E._editing=1,E.startDragging(V)):O.movable&&A.isMovable(l)&&(E._moving=1,E.startDragging(V))):(E._57I=yf(V),O.pannable&&A.isPannable()&&(E._panning=1,E.startDragging(V),E._translate={x:A.tx(),y:A.ty()}));else if(O.pinchable&&2===N){E._pinching=1,E.startDragging(V);var P=A.getView(),L=A.getZoom(),S=P.getBoundingClientRect(),v=V.touches[0],c=V.touches[1],i={x:(v.clientX+c.clientX)/2-S.left,y:(v.clientY+c.clientY)/2-S.top};i.x-=A.tx(),i.y-=A.ty(),i.x/=L,i.y/=L,E._p=i,E._d=Rn(V)}}},handle_touchend:function(h){var p=this,s=p.gv,_=p._57I,A=p._data;_&&(Qh(_,yf(h))<=1&&s.sm().cs(),p._57I=U),A&&s.handleMouseUp&&s.handleMouseUp(h,A)},handleWindowTouchEnd:function(U){this.clear(U)},handleWindowTouchMove:function(y){var g=this,b=g.gv,x=b.dm().getHistoryManager(),p=Nn(y);if(1===p){if(g._editing&&(x&&!g._beginHistory&&(g._beginHistory=1,x.beginInteraction()),b._editing=1,g._78I(y)),g._moving)x&&!g._beginHistory&&(g._beginHistory=1,x.beginInteraction()),g.handleMove(y);else if(g._panning){var N=yf(y);b.setTranslate(g._translate.x+N.x-g._lastClientPoint.x,g._translate.y+N.y-g._lastClientPoint.y),g.fi({kind:b._panning?"betweenPan":"beginPan",event:y}),b._panning=1}}else if(2===p&&g._pinching){var Z=Rn(y);b.handlePinch(g._p,Z,g._d),g._d=Z,g.fi({kind:b._pinching?"betweenPinch":"beginPinch",event:y}),b._pinching=1}},handleMove:function(r){var m=this,d=m.gv,j=d.lp(r);d._93O&&d._93O(r,m._data)||(d.moveSelection(j.x-m._lastLogicalPoint.x,j.y-m._lastLogicalPoint.y),m._lastLogicalPoint=j,m.autoScroll(r),m.fi({kind:d._moving?"betweenMove":"beginMove",event:r}),d._moving=1)}});var Ad="directional",zq="point",Fc="spot",Ed="light.color";pr(C,{graph3dViewAttributes:U,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:G/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:hf,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:G/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(V,e){Fd[V]=e},getShape3dModel:function(f){return Fd[f]},createMatrix:function(m,r){bf(m)||(m=[m]);for(var i=m.length-1;i>=0;i--){var g=m[i];r=oj(g.mat,g.s3,g.r3,g.rotationMode,g.t3,r)}return r},transformVec:function(j,P){return bi(j,P)},createBoxModel:function(){return{vs:Bs,ns:ob,uv:Hg,is:ce}},createRoundRectModel:function(T,k){return jh.roundRect(T,k)},createStarModel:function(t,N){return jh.star(t,N)},createRectModel:function(j,Q){return jh.rect(j,Q)},createTriangleModel:function(u,m){return jh.triangle(u,m)},createRightTriangleModel:function(I,s){return jh.rightTriangle(I,s)},createParallelogramModel:function(A,G){return jh.parallelogram(A,G)},createTrapezoidModel:function(Y,M){return jh.trapezoid(Y,M)},createSmoothSphereModel:function(U,l,H,O,t,r,J){return Ho(new ue(U,l,H,O,t,r,J))},createSphereModel:function(v,N,Z,o,j,p){return v?nc(v,N,Z,o,j,p):C.createSmoothSphereModel()},createSmoothConeModel:function(o,q,T,Q,E){return On(o,q,T,Q,E)},createConeModel:function(B,w,X,E,p,Y){return B?wp(B,w,X,E,p,Y):On(Y)},createSmoothCylinderModel:function(i,c,K,m,h,F,w,d){return Ho(new dk(i,c,K,m,h,F,w,d))},createCylinderModel:function(s,L,_,M,A,i,D){return s?Ok(s,L,_,M,A,i,D):Gp(i,D)},createSmoothTorusModel:function(M,g,Y,t,J,s){return Ho(new Ar(M,g,Y,t,J,s))},createTorusModel:function(m,w,b,X,_,N,g){return m?ur(m,w,b,X,_,N,g):Oc(N,g)},createExtrusionModel:function(b,L,c,w,h,Y,F,E){return hd(b,L,c,w,h,Y,F,E)},createSmoothRingModel:function(j,r,g,d,p,S){for(var I=[],q=0;q<j.length-1;q+=2)I.push({x:j[q],y:j[q+1]});for(j=qq(I,r,g)[0],I=[],q=0;q<j.length;q++){var t=j[q];I.push(new gs(t.x,0,t.y))}return Ho(new lr(I,S,d,p))},createRingModel:function(q,X,I,f,u,l,B,P,c,a){for(var M=[],J=0;J<q.length-1;J+=2)M.push({x:q[J],y:q[J+1]});l=l||C.shapeSide,B=B||0,P=P||l;var F,i,L,G,O,m,x,A,W,T,J,S,D,j,v,y,d,V,$=[],Y=[],Z=c?[]:U,n=c?[]:U,o=a?[]:U,R=a?[]:U,K=f?[]:U,e=f?[]:U,s=u?[]:U,w=u?[]:U,q=qq(M,X,I),Q=Gq(q),H=0,k=2*Math.PI/l;return q.forEach(function(q){if(L=q.length,L>1){if(G=q[0],f)for(m=G.x,A=G.y,J=B;P>J;J++)S=J+1,D=J*k,j=S*k,v=r(D),y=h(D),d=r(j),V=h(j),K.push(v*m,A,-y*m,d*m,A,-V*m,0,A,0),e.push(.5-.5*v,.5-.5*y,.5-.5*d,.5-.5*V,.5,.5);for(T=0;L>T;T++){for(O=q[T],m=G.x,x=O.x,A=G.y,W=O.y,F=H/Q,H+=Qh(G,O),i=H/Q,J=B;P>J;J++)S=J+1,D=J*k,j=S*k,v=r(D),y=h(D),d=r(j),V=h(j),$.push(v*x,W,-y*x,d*x,W,-V*x,v*m,A,-y*m,d*x,W,-V*x,d*m,A,-V*m,v*m,A,-y*m),Y.push(J/l,i,S/l,i,J/l,F,S/l,i,S/l,F,J/l,F),c&&J===B&&(Z.push(0,A,0,0,W,0,v*x,W,-y*x,v*x,W,-y*x,v*m,A,-y*m,0,A,0),n.push(0,.5-A,0,.5-W,2*x,.5-W,2*x,.5-W,2*m,.5-A,0,.5-A)),a&&S===P&&(o.push(0,A,0,d*x,W,-V*x,0,W,0,d*x,W,-V*x,0,A,0,d*m,A,-V*m),R.push(1,.5-A,1-2*x,.5-W,1,.5-W,1-2*x,.5-W,1,.5-A,1-2*m,.5-A));G=O}if(u)for(m=G.x,A=G.y,J=B;P>J;J++)S=J+1,D=J*k,j=S*k,v=r(D),y=h(D),d=r(j),V=h(j),s.push(d*m,A,-V*m,v*m,A,-y*m,0,A,0),w.push(.5-.5*d,.5+.5*V,.5-.5*v,.5+.5*y,.5,.5)}}),{vs:$,uv:Y,bottom_vs:s,bottom_uv:w,top_vs:K,top_uv:e,from_vs:Z,from_uv:n,to_vs:o,to_uv:R}}},!0),pr(d,{"3d.move.mode":H,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":H,"edge.gradient.color":H,"edge.source.t3":H,"edge.target.t3":H,"light.type":zq,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":G/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":_d,"wf.short":!1,"wf.mat":H,batch:H,"transparent.mask":!1,brightness:H,"select.brightness":.7,"repeat.uv.length":H,"label.face":q,"label.t3":H,"label.r3":H,"label.texture.scale":2,"label.rotationMode":Ee,"label.light":!1,"label.blend":H,"label.reverse.flip":!1,"label.reverse.color":hn,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":q,"label2.t3":H,"label2.r3":H,"label2.texture.scale":2,"label2.rotationMode":Ee,"label2.light":!1,"label2.blend":H,"label2.reverse.flip":!1,"label2.reverse.color":hn,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":q,"note.t3":H,"note.r3":H,"note.texture.scale":2,"note.rotationMode":Ee,"note.light":!1,"note.blend":H,"note.reverse.flip":!1,"note.reverse.color":hn,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":q,"note2.t3":H,"note2.r3":H,"note2.texture.scale":2,"note2.rotationMode":Ee,"note2.light":!1,"note2.blend":H,"note2.reverse.flip":!1,"note2.reverse.color":hn,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:H,"shape3d.color":Ec,"shape3d.top.color":H,"shape3d.bottom.color":H,"shape3d.from.color":H,"shape3d.to.color":H,"shape3d.image":H,"shape3d.top.image":H,"shape3d.bottom.image":H,"shape3d.from.image":H,"shape3d.to.image":H,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":H,"shape3d.side.to":H,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":H,"shape3d.opacity":H,"shape3d.reverse.flip":!1,"shape3d.reverse.color":hn,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":H,"shape3d.uv.scale":H,"shape3d.top.uv.offset":H,"shape3d.top.uv.scale":H,"shape3d.bottom.uv.offset":H,"shape3d.bottom.uv.scale":H,"shape3d.from.uv.offset":H,"shape3d.from.uv.scale":H,"shape3d.to.uv.offset":H,"shape3d.to.uv.scale":H,"shape3d.top.cap":H,"shape3d.bottom.cap":H,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Ec,"all.image":H,"all.blend":H,"all.opacity":H,"all.reverse.flip":!1,"all.reverse.color":hn,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":H,"all.uv.offset":H,"all.uv.scale":H,"all.discard.selectable":!0,mat:H,"left.mat":H,"right.mat":H,"top.mat":H,"bottom.mat":H,"front.mat":H,"back.mat":H},!0);
var Xj,Fe=!1,kb=[0,0,0,1/255],Yi={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:nd,2:ib,3:ei,4:pd,5:q,6:Eg}},Tm=function(c,n,E,L){if(n.getFaceVisible(c,E)){xr(n,As(c,n.getFaceMat(c,E)||n.getMat(c)));var V=n._26I;n.getFaceReverseCull(c,E)?V.enable(V.CULL_FACE):V.disable(V.CULL_FACE),Xd(V,n._prg.uFixPickReverseColor,Yi[E]),fh(V),bc(V,L,6),Oi(V),Gr(n)}},Mj=function(y){return y instanceof sc},eq=function(C){return[C.x,C.e||0,C.y]},Bp=function(P,F,U){for(var F=$m(F),g=F[0],s=F[1],L=F[2];U--;)P.push(g,s,L)},Ze=function($,Q,A){for(var Q=$m(Q),y=Q[0],I=Q[1],_=Q[2],V=Q[3];A--;)$.push(y,I,_,V)},Kc=function(K,w,y){if(w)for(var M,P,l,c=w[0],G=w[1],Q=w[2],F=w[4],W=w[5],i=w[6],O=w[8],p=w[9],N=w[10],u=w[12],Z=w[13],r=w[14],C=y.length,L=0,L=0;C>L;L+=3)M=y[L],P=y[L+1],l=y[L+2],K.push(c*M+F*P+O*l+u,G*M+W*P+p*l+Z,Q*M+i*P+N*l+r);else _j(K,y)},Vm=function(y,G){var t=G.s("light.intensity"),x=$m(G.s(Ed)),E=x[0],F=x[1],Y=x[2];1!==t&&(E*=t,F*=t,Y*=t),y.push(E,F,Y,G.s("light.disabled")?1:0)},Ol=function(Q,k,B){Xd(k,B.uHeadlightRange,Q._headlightRange);var S=Q._headlightIntensity,E=$m(Q._headlightColor);1!==S&&(E=[E[0]*S,E[1]*S,E[2]*S]),Xd(k,B.uHeadlightColor,[E[0],E[1],E[2],Q._headlightDisabled?1:0]);var b=Q._59O,j=Q._spots,C=Q._dirs;if(b.length){var g=[],M=[],w=[];b.forEach(function(B){Vm(g,B),_j(M,B.p3()),w.push(B.s("light.range"))}),k.uniform4fv(B.uPointColor,g),k.uniform1fv(B.uPointRange,w),k.uniform3fv(B.uPointPosition,M)}if(j.length){var p=[],R=[],P=[],V=[],t=[],h=[];j.forEach(function(z){Vm(p,z),_j(R,z.p3()),_j(P,z.s("light.center")),V.push(z.s("light.range")),t.push(r(z.s("light.angle")/2)),h.push(z.s("light.exponent"))}),k.uniform4fv(B.uSpotColor,p),k.uniform1fv(B.uSpotRange,V),k.uniform1fv(B.uSpotAngle,t),k.uniform1fv(B.uSpotExponent,h),k.uniform3fv(B.uSpotPosition,R),k.uniform3fv(B.uSpotCenter,P)}if(C.length){var W=[],U=[];C.forEach(function(T){Vm(W,T),_j(U,T.p3())}),k.uniform4fv(B.uDirColor,W),k.uniform3fv(B.uDirPosition,U)}},vj=function(w){return w>0&&0===(w-1&w)},pi=function(k){return k=W(0,Y(G,k)),k=W(rg,Y(G-rg,k))},er=function(){return.05+l()/2},wc=function(U,d,c,o){var O,r=U.getEye();return U.isOrtho()?(O=kd(U.getCenter(),r),O[0]+=o[0],O[1]+=o[1],O[2]+=o[2]):O=r,zo(d,c,o,O)},zo=function(n,r,_,K){var G=$p(n,r),e=kd(K,_,!0),A=$p(e,r);if(g(A)<rg)return U;var D=(G-$p(_,r))/A;return[_[0]+e[0]*D,_[1]+e[1]*D,_[2]+e[2]*D]},je=function(q,F){return{x:2*q.x-F.x,y:2*q.y-F.y}},Wg=function(V,M,C,c){var u,D;if(!V)return u=v(M.y-C.y,C.x-M.x),{x:M.x+c*h(u),y:M.y+c*r(u)};if(!C)return u=v(V.y-M.y,M.x-V.x),{x:M.x+c*h(u),y:M.y+c*r(u)};var N=kd([V.x,V.y,0],[M.x,M.y,0],!0),s=kd([C.x,C.y,0],[M.x,M.y,0],!0),B=-(N[0]+s[0])/2,F=-(N[1]+s[1])/2,A=o(B*B+F*F);return rg>A?(u=v(V.y-M.y,M.x-V.x),{x:M.x+c*h(u),y:M.y+c*r(u)}):(u=p($p(N,s))/2,D=N[1]*s[0]-N[0]*s[1]>0?-1:1,B/=A,F/=A,A=c/h(u),{x:M.x+D*A*B,y:M.y+D*A*F})},wn=function(C){var E=C[1],R=C[2],d=C[3],s=C[6],S=C[7],H=C[11];C[1]=C[4],C[2]=C[8],C[3]=C[12],C[4]=E,C[6]=C[9],C[7]=C[13],C[8]=R,C[9]=s,C[11]=C[14],C[12]=d,C[13]=S,C[14]=H},Vb=function(Y){var S=Y[0],i=Y[1],b=Y[2],R=Y[3],L=Y[4],B=Y[5],C=Y[6],o=Y[7],k=Y[8],N=Y[9],V=Y[10],D=Y[11],G=Y[12],E=Y[13],m=Y[14],d=Y[15],t=S*B-i*L,K=S*C-b*L,l=S*o-R*L,p=i*C-b*B,j=i*o-R*B,y=b*o-R*C,F=k*E-N*G,s=k*m-V*G,Q=k*d-D*G,Z=N*m-V*E,H=N*d-D*E,g=V*d-D*m,r=t*g-K*H+l*Z+p*Q-j*s+y*F;return r?(r=1/r,Y[0]=(B*g-C*H+o*Z)*r,Y[1]=(b*H-i*g-R*Z)*r,Y[2]=(E*y-m*j+d*p)*r,Y[3]=(V*j-N*y-D*p)*r,Y[4]=(C*Q-L*g-o*s)*r,Y[5]=(S*g-b*Q+R*s)*r,Y[6]=(m*l-G*y-d*K)*r,Y[7]=(k*y-V*l+D*K)*r,Y[8]=(L*H-B*Q+o*F)*r,Y[9]=(i*Q-S*H-R*F)*r,Y[10]=(G*j-E*l+d*t)*r,Y[11]=(N*l-k*j-D*t)*r,Y[12]=(B*s-L*Z-C*F)*r,Y[13]=(S*Z-i*s+b*F)*r,Y[14]=(E*K-G*p-m*t)*r,Y[15]=(k*p-N*K+V*t)*r,void 0):U},nr=function(T,q){if(q){var C=q[0],J=q[1],W=q[2];T[12]=T[0]*C+T[4]*J+T[8]*W+T[12],T[13]=T[1]*C+T[5]*J+T[9]*W+T[13],T[14]=T[2]*C+T[6]*J+T[10]*W+T[14],T[15]=T[3]*C+T[7]*J+T[11]*W+T[15]}},Kk=function(k,x){if(x){var q=x[0],R=x[1],V=x[2];k[0]=k[0]*q,k[1]=k[1]*q,k[2]=k[2]*q,k[3]=k[3]*q,k[4]=k[4]*R,k[5]=k[5]*R,k[6]=k[6]*R,k[7]=k[7]*R,k[8]=k[8]*V,k[9]=k[9]*V,k[10]=k[10]*V,k[11]=k[11]*V}},kl=function(a,i,U){var Z=i[0],l=i[1],Q=i[2],O=i[3],G=i[4],o=i[5],C=i[6],m=i[7],s=i[8],d=i[9],g=i[10],B=i[11],q=i[12],j=i[13],L=i[14],V=i[15],Y=U[0],J=U[1],x=U[2],r=U[3];return a[0]=Y*Z+J*G+x*s+r*q,a[1]=Y*l+J*o+x*d+r*j,a[2]=Y*Q+J*C+x*g+r*L,a[3]=Y*O+J*m+x*B+r*V,Y=U[4],J=U[5],x=U[6],r=U[7],a[4]=Y*Z+J*G+x*s+r*q,a[5]=Y*l+J*o+x*d+r*j,a[6]=Y*Q+J*C+x*g+r*L,a[7]=Y*O+J*m+x*B+r*V,Y=U[8],J=U[9],x=U[10],r=U[11],a[8]=Y*Z+J*G+x*s+r*q,a[9]=Y*l+J*o+x*d+r*j,a[10]=Y*Q+J*C+x*g+r*L,a[11]=Y*O+J*m+x*B+r*V,Y=U[12],J=U[13],x=U[14],r=U[15],a[12]=Y*Z+J*G+x*s+r*q,a[13]=Y*l+J*o+x*d+r*j,a[14]=Y*Q+J*C+x*g+r*L,a[15]=Y*O+J*m+x*B+r*V,a},Hb=function(u,d,b,E){var _,M,h,G,X,i,R,J,x,z,Q=d[0],Z=d[1],F=d[2],m=E[0],t=E[1],H=E[2],c=b[0],N=b[1],l=b[2];return g(Q-c)<rg&&g(Z-N)<rg&&g(F-l)<rg?Il(u):(R=Q-c,J=Z-N,x=F-l,z=1/o(R*R+J*J+x*x),R*=z,J*=z,x*=z,_=t*x-H*J,M=H*R-m*x,h=m*J-t*R,z=o(_*_+M*M+h*h),z?(z=1/z,_*=z,M*=z,h*=z):(_=0,M=0,h=0),G=J*h-x*M,X=x*_-R*h,i=R*M-J*_,z=o(G*G+X*X+i*i),z?(z=1/z,G*=z,X*=z,i*=z):(G=0,X=0,i=0),u[0]=_,u[1]=G,u[2]=R,u[3]=0,u[4]=M,u[5]=X,u[6]=J,u[7]=0,u[8]=h,u[9]=i,u[10]=x,u[11]=0,u[12]=-(_*Q+M*Z+h*F),u[13]=-(G*Q+X*Z+i*F),u[14]=-(R*Q+J*Z+x*F),u[15]=1,u)},Te=function(I,D,v,R,k){var L=1/F(D/2),K=1/(R-k);return I[0]=L/v,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=L,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=(k+R)*K,I[11]=-1,I[12]=0,I[13]=0,I[14]=2*k*R*K,I[15]=0,I},tq=function(B,Z,o,S,j,y,t){var G=1/(Z-o),L=1/(S-j),h=1/(y-t);return B[0]=-2*G,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=-2*L,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=2*h,B[11]=0,B[12]=(Z+o)*G,B[13]=(j+S)*L,B[14]=(t+y)*h,B[15]=1,B},yd=function(G,$){var B=$[0],M=$[1],Y=$[2],O=$[3],_=B*B+M*M+Y*Y+O*O,u=_?1/_:0;return G[0]=-B*u,G[1]=-M*u,G[2]=-Y*u,G[3]=O*u,G},Tg=function(Y,r){var h=r[0]+r[5]+r[10],S=0;return h>0?(S=2*Math.sqrt(h+1),Y[3]=.25*S,Y[0]=(r[6]-r[9])/S,Y[1]=(r[8]-r[2])/S,Y[2]=(r[1]-r[4])/S):r[0]>r[5]&r[0]>r[10]?(S=2*Math.sqrt(1+r[0]-r[5]-r[10]),Y[3]=(r[6]-r[9])/S,Y[0]=.25*S,Y[1]=(r[1]+r[4])/S,Y[2]=(r[8]+r[2])/S):r[5]>r[10]?(S=2*Math.sqrt(1+r[5]-r[0]-r[10]),Y[3]=(r[8]-r[2])/S,Y[0]=(r[1]+r[4])/S,Y[1]=.25*S,Y[2]=(r[6]+r[9])/S):(S=2*Math.sqrt(1+r[10]-r[0]-r[5]),Y[3]=(r[1]-r[4])/S,Y[0]=(r[8]+r[2])/S,Y[1]=(r[6]+r[9])/S,Y[2]=.25*S),Y},Oj=function(j,o,V){var d=o[0],B=o[1],H=o[2],D=o[3],O=d+d,p=B+B,t=H+H,X=d*O,W=d*p,R=d*t,m=B*p,s=B*t,e=H*t,M=D*O,a=D*p,l=D*t;return j[0]=1-(m+e),j[1]=W+l,j[2]=R-a,j[3]=0,j[4]=W-l,j[5]=1-(X+e),j[6]=s+M,j[7]=0,j[8]=R+a,j[9]=s-M,j[10]=1-(X+m),j[11]=0,j[12]=V[0],j[13]=V[1],j[14]=V[2],j[15]=1,j},Kn=function(h,m){return Hb(m?m:pn(),h._eye,h._center,h._up)},ef=function(h){var T=h.getAspect(),A=h._near,X=h._far,m=pn();if(h._ortho){var Y=h._orthoWidth/2,E=Y/T;tq(m,-Y,Y,-E,E,A,X)}else Te(m,h._fovy,T,A,X);return m},Al=function(a,h){if(!a)return U;var z=0,R=1,j=2,S=[],G=0,r=a.length,O=r/3;if(h){for(;r>G;G++)S[G]=0;for(G=0;G<h.length;G+=3){var p=[],f=[],H=[];p[z]=a[3*h[G+1]+z]-a[3*h[G]+z],p[R]=a[3*h[G+1]+R]-a[3*h[G]+R],p[j]=a[3*h[G+1]+j]-a[3*h[G]+j],f[z]=a[3*h[G+2]+z]-a[3*h[G+1]+z],f[R]=a[3*h[G+2]+R]-a[3*h[G+1]+R],f[j]=a[3*h[G+2]+j]-a[3*h[G+1]+j],H[z]=p[R]*f[j]-p[j]*f[R],H[R]=p[j]*f[z]-p[z]*f[j],H[j]=p[z]*f[R]-p[R]*f[z];for(var Q=0;3>Q;Q++)S[3*h[G+Q]+z]+=H[z],S[3*h[G+Q]+R]+=H[R],S[3*h[G+Q]+j]+=H[j]}}else for(G=0;O>G;G+=3){var p=[],f=[],H=[];p[z]=a[3*(G+1)+z]-a[3*G+z],p[R]=a[3*(G+1)+R]-a[3*G+R],p[j]=a[3*(G+1)+j]-a[3*G+j],f[z]=a[3*(G+2)+z]-a[3*(G+1)+z],f[R]=a[3*(G+2)+R]-a[3*(G+1)+R],f[j]=a[3*(G+2)+j]-a[3*(G+1)+j],H[z]=p[R]*f[j]-p[j]*f[R],H[R]=p[j]*f[z]-p[z]*f[j],H[j]=p[z]*f[R]-p[R]*f[z];for(var Q=0;3>Q;Q++)S[3*(G+Q)+z]=H[z],S[3*(G+Q)+R]=H[R],S[3*(G+Q)+j]=H[j]}for(G=0;r>G;G+=3){var E=[];E[z]=S[G+z],E[R]=S[G+R],E[j]=S[G+j];var i=o(E[z]*E[z]+E[R]*E[R]+E[j]*E[j]);0===i&&(i=rg),E[z]=E[z]/i,E[R]=E[R]/i,E[j]=E[j]/i,S[G+z]=E[z],S[G+R]=E[R],S[G+j]=E[j]}return new sp(S)},Rj=function(K,o,y){if(y||(y=K.createTexture()),o){var H=K.TEXTURE_2D,i=K.LINEAR,Z=K.REPEAT,N=K.CLAMP_TO_EDGE,C=K.TEXTURE_MIN_FILTER;Ap(K,y),K.texImage2D(H,0,K.RGBA,K.RGBA,K.UNSIGNED_BYTE,o),Ub(K,K.TEXTURE_MAG_FILTER,i),vj(o.width)&&vj(o.height)?(Ub(K,K.TEXTURE_WRAP_S,Z),Ub(K,K.TEXTURE_WRAP_T,Z),Ub(K,C,K.LINEAR_MIPMAP_LINEAR),K.generateMipmap(H)):(Ub(K,K.TEXTURE_WRAP_S,N),Ub(K,K.TEXTURE_WRAP_T,N),Ub(K,C,i)),Ap(K,U)}return y},Eb=function(E,F){var L=new Uint8Array(3);return F=F||E.createTexture(),Ap(E,F),Ub(E,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texImage2D(E.TEXTURE_2D,0,E.RGB,1,1,0,E.RGB,E.UNSIGNED_BYTE,L),F},xh=function(e){e._26I&&e._prg&&(e._26I.deleteProgram(e._prg),e._prg=U)},Dd=function(k,H,v,b){var T=k.createShader(v);return k.shaderSource(T,b),k.compileShader(T),k.attachShader(H,T),T},Sr=function(L){return L.createBuffer()},Ap=function(t,m){t.bindTexture(t.TEXTURE_2D,m)},Po=function(a,J){a.bindFramebuffer(a.FRAMEBUFFER,J)},Ub=function(K,$,O){K.texParameteri(K.TEXTURE_2D,$,O)},Dn=function(b,Q){if(Q){var Q=$m(Q);b.clearColor(Q[0],Q[1],Q[2],Q[3])}},Bg=function(h,y){Xd(h,y.uFix,!0),Bd(h,y.aNormal)},hp=function(D,w){Xd(D,w.uFix,!1),hk(D,w.aNormal)},gj=function(n,W,R,N,r,e,Y,$){n._picking||(R?(Xd(n,W.uBlend,!0),Xd(n,W.uBlendColor,R)):Xd(n,W.uBlend,!1),Xd(n,W.uLight,N==U?!0:N),jr(r)&&1!==r&&Xd(n,W.uPartOpacity,r),Xd(n,W.uReverseFlip,e==U?!1:e),Xd(n,W.uFixPickReverseColor,Y||hn)),$?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE)},Rd=function(V,G){V._picking||Xd(V,G.uPartOpacity,1)},fh=function(R,j,i,f,z,y,n,M){if(!i)return Ap(R,R._emptyTexture),void 0;Xd(R,j.uTexture,!0),Xd(R,j.uDiscardSelectable,Mp(f)?f:!0),hk(R,j.aUv),mr(R,z,y,j.aUv,2),R.activeTexture(R.TEXTURE0),Ap(R,i),R.uniform1i(j.uSampler,0);var E=[0,0,1,1];n&&(E[0]=n[0],E[1]=n[1]),M&&(E[2]=M[0],E[3]=M[1]),Xd(R,j.uOffsetScale,E)},Oi=function($,C,i){Ap($,U),i&&(Bd($,C.aUv),Xd($,C.uTexture,!1))},yr=function(h,j,$,u,G,O){$&&!X&&h.lineWidth($),u&&!h._picking&&Xd(h,j.uFixPickReverseColor,u),G&&mr(h,G,O,j.aPosition)},ih=function(Q,S,M,j){Xj&&(j=Q[Xj]),Q.drawArrays(j==U?Q.TRIANGLES:j,S,M)},bc=function(F,c,s,C){Xj&&(C=F[Xj]),F.drawElements(C==U?F.TRIANGLES:C,s,F.UNSIGNED_SHORT,c==U?0:2*c)},mr=function(m,o,W,s,A){var l=m.ARRAY_BUFFER;m.bindBuffer(l,o),W&&m.bufferData(l,W,m.STATIC_DRAW),s!=U&&m.vertexAttribPointer(s,A?A:3,m.FLOAT,!1,0,0)},dr=function(T,N,A){var y=T.ELEMENT_ARRAY_BUFFER;T.bindBuffer(y,N),A&&T.bufferData(y,A,T.STATIC_DRAW)},Xd=function(P,C,e){if(e!=U&&C!=U){e=$m(e);var G=e.length;3===G?P.uniform3fv(C,e):4===G?P.uniform4fv(C,e):16===G?P.uniformMatrix4fv(C,!1,e):Mp(e)?P.uniform1i(C,e?1:0):2===G?P.uniform2fv(C,e):P.uniform1f(C,e)}},hk=function(u,Z){Z!=U&&Z>=0&&u.enableVertexAttribArray(Z)},Bd=function(S,z){z!=U&&z>=0&&S.disableVertexAttribArray(z)},Gr=function(K,R){var b=K.getGL(),T=K._prg;K._7O=K._8O.pop(),R&&(Xd(b,T.uMVMatrix,K._7O),K._6O=R,Xd(b,T.uNMatrix,R))},fr=function(L,V){return V||(V=pn()),Ei(V,L),Vb(V),wn(V),V},xr=function(z,L){var V=z.getGL(),D=z._prg,_=z._7O;L&&(z._8O.push(as(_)),kl(_,_,L)),Xd(V,D.uMVMatrix,_),Xd(V,D.uNMatrix,fr(_,z._6O))},ub=function(d,_,R,Y,V,X){if(R){if(Y){var e=R.value++,j=[(255&e>>24)/255,(255&e>>16)/255,(255&e>>8)/255,(255&e)/255];R[e]={data:V,part:X}}else j=kb;return Xd(d,_.uFixPickReverseColor,j),j}},Ek=function(){var k={center:function(X,O,A,R,B){var N=O[1]/2,q={x:-O[0]/2,y:N,width:O[0],height:O[1]},y=eg(X,q,A);return[y.x+R,2*N-y.y-B,er()]},front:function(G,A,O,z,q){var J=A[1]/2,v={x:-A[0]/2,y:J,width:A[0],height:A[1]},P=eg(G,v,O);return[P.x+z,2*J-P.y-q,A[2]/2+er()]},back:function($,F,e,N,f){var S=F[0]/2,V=F[1]/2,M={x:S,y:V,width:F[0],height:F[1]},j=eg($,M,e);return[2*S-j.x-N,2*V-j.y-f,-F[2]/2-er()]},left:function(I,u,H,X,q){var y=u[1]/2,T={x:-u[2]/2,y:y,width:u[2],height:u[1]},p=eg(I,T,H);return[-u[0]/2-er(),2*y-p.y-q,p.x+X]},right:function(U,z,w,J,W){var Z=z[2]/2,q=z[1]/2,s={x:Z,y:q,width:z[2],height:z[1]},j=eg(U,s,w);return[z[0]/2+er(),2*q-j.y-W,2*Z-j.x-J]},top:function(T,X,m,w,c){var R={x:-X[0]/2,y:-X[2]/2,width:X[0],height:X[2]},i=eg(T,R,m);return[i.x+w,X[1]/2+er(),i.y+c]},bottom:function(t,$,U,b,k){var M=$[2]/2,m={x:-$[0]/2,y:M,width:$[0],height:$[2]},J=eg(t,m,U);return[J.x+b,-$[1]/2-er(),2*M-J.y-k]}};return function(f,c,d,J,l,j){return k[J](f,c,d,l||0,j||0)}}(),Rk=function(y,F,p,b,f,E,l,k,h,K){if(f&&(F[0]+=f[0],F[1]+=f[1],F[2]+=f[2]),nr(y,p),k){var N=pn();if(qd(N,h,K),bi(F,N),nr(y,F),y.auto=k,y.pos=bi([0,0,0],y),E){var L=y.mat2=pn();qd(L,E,l)}}else qd(y,h,K),nr(y,F),b===nd?hb(y,-Q):b===ib?hb(y,Q):b===ei?zg(y,-Q):b===pd?zg(y,Q):b===Eg&&hb(y,G),qd(y,E,l);return y},Lm=function(F,J){var v=J.auto,o=J.mat2,Y=F.gv;if(v){var q=pn(),h=[0,0,0,0];Tg(h,Hb(pn(),Y._eye,Y._center,Y._up)),Oj(q,yd(h,h),J.pos),o&&kl(q,q,o),xr(Y,q)}else xr(Y,J)},Kd=function(d,a,V,L,A){var m=d.s,D=d.gv,e=D.getGL(),z=D._prg,B=D._buffer,n=D._1O;Rj(e,zr,n),Lm(d,V),gj(e,z,m(a+".blend"),m(a+".light"),m(a+".opacity"),m(a+".reverse.flip"),m(a+".reverse.color"),m(a+".reverse.cull")),fh(e,z,n,A,B.uv,Am),mr(e,B.vs,L,z.aPosition),mr(e,B.ns,Nq,z.aNormal),dr(e,B.is,Gl),bc(e,0,Gl.length),Oi(e,z,n),Rd(e,z),Gr(D)},zm=function(N,v,I){var j=N.gv,Y=N.data,U=N[v]={blend:j.getBodyColor(Y)||j.getFaceBlend(Y,v),light:j.getFaceLight(Y,v),color:j.getFaceColor(Y,v),opacity:j.getFaceOpacity(Y,v),transparent:j.getFaceTransparent(Y,v),reverseFlip:j.getFaceReverseFlip(Y,v),reverseColor:j.getFaceReverseColor(Y,v),reverseCull:j.getFaceReverseCull(Y,v),texture:j.getFaceImage(Y,v),discardSelectable:j.getFaceDiscardSelectable(Y,v)};if("csg"!==v){U.uv=j.getFaceUv(Y,v)||I&&I[v+"Uv"],U.uvScale=j.getFaceUvScale(Y,v)||I&&I[v+"UvScale"],U.uvOffset=j.getFaceUvOffset(Y,v)||I&&I[v+"UvOffset"];var Z=j.getFaceMat(Y,v);Z&&(U.mat=As(Y,Z))}return U},Mc=function(s,y,c,E,u){if(E){if(!u(E.transparent))return;var V=s.data,h=s.gv,$=h._buffer,k=h.getTexture(E.texture,V);fh(y,c,k,E.discardSelectable,$.uv,E.tuv,E.uvOffset,E.uvScale),gj(y,c,E.blend,E.light,E.opacity,E.reverseFlip,E.reverseColor,E.reverseCull),Xd(y,c.uDiffuse,E.color),mr(y,$.vs,E.vs,c.aPosition),mr(y,$.ns,E.ns,c.aNormal),ih(y,0,E.vs.length/3),Rd(y,c),Oi(y,c,k)}},Qo=function(S,P,F,J,A,R){var o,f,v,I,d,V,k,D,z,i,l,K=[J-P,A-F],t=S?S.length:0;for(v=0;t>v;v++){for(I=2,o=S[v],d=o[0],V=o[1];I+1<o.length;){if(k=o[I],D=o[I+1],f=$k(P,F,J,A,d,V,k,D,!0)){z=[k-d,D-V],i=Qh(z),z[0]/=i,z[1]/=i,i=$p(K,z),i=i>0?R:-R,l=[z[0]*i,z[1]*i];break}d=k,V=D,I+=2}if(l)break}if(l)for(J=P+l[0],A=F+l[1],v=0;t>v;v++)for(I=2,o=S[v],d=o[0],V=o[1];I+1<o.length;){if(k=o[I],D=o[I+1],f=$k(P,F,J,A,d,V,k,D,!0))return[0,0];d=k,V=D,I+=2}return l?l:[J-P,A-F]},wi=e.graph3d={},mj=function(u,x,D){ld($+".graph3d."+u,x,D)},Yp="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Ig="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";pr(C,{setBatchInfo:function(L,j){Ch[L]=j},getBatchInfo:function(K){return Ch[K]}},!0);var Be=[1,1,1],Qd=[1,0,0,0,0,1,0,1,1,1,1,0],$r=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Ge=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Ce=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],_b=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],ke=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],vr=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Dm=function(N,P){xf(N,P),Tp(N,P,"_wireframeModelMap","_wireframeIndexMap"),Tp(N,P,"_polylineModelMap","_polylineIndexMap")},xf=function(r,B){if(B){var l,G,I=B._id,V=r._33O,P=r._34O,L=P[I];if(L){G=L.batch,l=V[G];var d=L.begin,m=L.size,A=3*d,K=3*m,j=4*d,E=4*m,i=l.vs,f=l.uv,X=l.cs,t=l.bs,T=l.rs,e=l.ds,h=L.index;if(l.invalidate=!0,delete P[I],e.splice(h,1),ci(e))delete V[G];else{for(;h<e.length;h++)L=P[e[h]._id],L.index--,L.begin-=m;i.splice(A,K),l.ns.splice(A,K),l.ps.splice(j,E),f&&f.splice(2*d,2*m),X&&X.splice(j,E),t&&t.splice(A,K),T&&T.splice(d,m)}}}else r._34O={},r._33O={}},Tp=function(B,Q,h,q){if(Q){var P,v,b=Q._id,R=B[h],C=B[q],X=C[b];if(X){v=X.batch,P=R[v];var O=X.begin,z=X.size,K=3*O,E=3*z,o=4*O,G=4*z,x=P.ds,W=X.index;if(P.invalidate=!0,delete C[b],x.splice(W,1),ci(x))delete R[v];else{for(;W<x.length;W++)X=C[x[W]._id],X.index--,X.begin-=z;P.vs.splice(K,E),P.cs.splice(o,G),P.ps.splice(o,G),P.ls&&P.ls.splice(O,z)}}}else B[h]={},B[q]={}},Om=function(s,D,c,p){if(!p)return U;var J=D[p];if(!J){var S=Ch[p]||Wo,m=S.image?[]:U;J=D[p]={vs:[],ns:[],uv:m,cs:m?U:S.color?U:[],bs:S.blend?[]:U,ps:[],rs:S.brightness?[]:U,ds:[]}}return J.invalidate=!0,s[c._id]={index:J.ds.length,begin:J.vs.length/3,batch:p},J.ds.push(c),J},Pk=function(W,p){return p!=U&&1!==p?[W[0]*p,W[1]*p,W[2]*p,W[3]]:W},qe=function(R,a,K){var N=R.getBrightness(a),L=$m(K.color||"white"),g=L[3]<1,Q=Math.ceil(K.width)||1,C=(g?"T":"O")+Q,J=R._wireframeIndexMap,X=R._wireframeModelMap,t=X[C];t||(t=X[C]={vs:[],cs:[],ps:[],ds:[],T:g,W:Q}),t.invalidate=!0;var Z=t.vs,q=t.cs,E=t.ds,B=J[a._id]={index:E.length,begin:Z.length/3,batch:C};E.push(a),Kc(Z,As(a,K.mat),K.short?ni:Li);var m=B.size=Z.length/3-B.begin;Ze(q,Pk(L,N),m)},nf=function(r,h,z,T,f,P,V,p,s){var y=r.getBrightness(h);y==U&&(y=1);var l=Pk($m(T),y),Q=l[3]<1;P=Math.ceil(P)||1;var i=(Q?"T":"O")+P;if(V){var X=V[0],b=(V[1]||X)+X;i+="-"+X+"-"+b,s&&(i+="-"+lm(s)+"-"+y,s=Pk($m(s),y))}var j=r._polylineIndexMap,S=r._polylineModelMap,t=S[i];t||(t=S[i]={vs:[],cs:[],ps:[],ds:[],ls:V?[]:U,T:Q,W:P},V&&(t.D=X,t.G=b,t.A=s)),t.invalidate=!0;var R,Z=t.vs,C=t.cs,e=t.ds,I=t.ls,g=j[h._id]={index:e.length,begin:Z.length/3,batch:i};e.push(h),_j(Z,z);var _,G=g.size=Z.length/3-g.begin,c=z.length,W=0,w=[];if(V||f)for(R=0;c>R;R+=6)_=Qh([z[R],z[R+1],z[R+2]],[z[R+3],z[R+4],z[R+5]]),w.push(_),W+=_;if(W&&f){var E,B=Pk($m(f),y),n=[B[0]-l[0],B[1]-l[1],B[2]-l[2],B[3]-l[3]],v=0;for(R=0;c>R;R+=6)E=v/W,Ze(C,[l[0]+n[0]*E,l[1]+n[1]*E,l[2]+n[2]*E,l[3]+n[3]*E],1),v+=w[R/6],E=v/W,Ze(C,[l[0]+n[0]*E,l[1]+n[1]*E,l[2]+n[2]*E,l[3]+n[3]*E],1)}else Ze(C,l,G);if(V)for(v=p||0,R=0;c>R;R+=6)I.push(v),v+=w[R/6],I.push(v)},In=function(M,w,F){if(w)for(var K=4*w.begin,L=F[w.batch].ps,X=0;X<w.size;X++)L[K++]=M[0],L[K++]=M[1],L[K++]=M[2],L[K++]=M[3]},Zh=function(t,z){var W=z+["32"],w=t[z],L=t[W];w?L&&L.length===w.length?L.set(w):t[W]=new sp(w):delete t[W]},Vl=function(j,w,s,L,i,P,z,Q,Z){if(bf(s))s.forEach(function(c){Vl(j,w,c,L,i,P,z,Q,Z)});else if(re(s))Vl(j,w,Se(L,s),L,i,P,z,Q,Z);else if(ks(s)){var G,h=un(s.mat,w,j),f=un(s.s3,w,j),W=un(s.t3,w,j),n=un(s.r3,w,j);if((f||n||W||h)&&(G=oj(h,f,n,un(s.rotationMode,w,j),W),P.push(G)),s.shape3d)Vl(j,w,s.shape3d,L,i,P,z,Q,s);else{Z=Z||Wo;var T=P[0],$=P.length,V=L("shape3d.color",s.color,Z.color);if(i||(i=L("shape3d.blend",s.blend,Z.blend)),$>1){T=as(T);for(var x=1;$>x;x++)kl(T,T,P[x])}s.vs&&L(oh,s.visible,Z.visible)&&Nd(T,z,Q,s.vs,s.uv,s.is,i,V),s.top_vs&&L(qp,s.topVisible,Z.topVisible)&&Nd(T,z,Q,s.top_vs,s.top_uv,s.top_is,i,L("shape3d.top.color",s.topColor,Z.topColor)||V),s.bottom_vs&&L(th,s.bottomVisible,Z.bottomVisible)&&Nd(T,z,Q,s.bottom_vs,s.bottom_uv,s.bottom_is,i,L("shape3d.bottom.color",s.bottomColor,Z.bottomColor)||V),s.from_vs&&L(om,s.fromVisible,Z.fromVisible)&&Nd(T,z,Q,s.from_vs,s.from_uv,s.from_is,i,L("shape3d.from.color",s.fromColor,Z.fromColor)||V),s.to_vs&&L(be,s.toVisible,Z.toVisible)&&Nd(T,z,Q,s.to_vs,s.to_uv,s.to_is,i,L("shape3d.to.color",s.toColor,Z.toColor)||V)}G&&P.pop()}},Nd=function(N,j,m,v,C,K,d,s){var z,o=j.cs,Y=j.uv,r=j.bs;if(K){z=K.length;for(var p=0;z>p;p++){var I=K[p];Kc(m,N,[v[3*I],v[3*I+1],v[3*I+2]]),Y&&_j(Y,[C[2*I],C[2*I+1]])}}else z=v.length/3,Kc(m,N,v),Y&&_j(Y,C);o&&Ze(o,s,z),r&&(d?Bp(r,d,z):_j(r,Be,z))},Jr=function(p,N,C,x){var d=[];x?Vl(p.gv,p.data,x,p.s,p.getBodyColor(),[N],C,d):(Sc(p,nd,N,C,d),Sc(p,ib,N,C,d),Sc(p,q,N,C,d),Sc(p,Eg,N,C,d),Sc(p,ei,N,C,d),Sc(p,pd,N,C,d),Sc(p,"csg",N,C,d)),d.length&&(_j(C.vs,d),_j(C.ns,Al(d)))},Sc=function(j,m,w,V,g){var q=j[m];if(q){var v=q.tuv;if(v){var X,r,Q,u,N=q.uvScale,n=q.uvOffset;if(N)for(X=v.length,r=N[0],Q=N[1],u=0;X>u;u+=2)v[u]*=r,v[u+1]*=Q;if(n)for(X=v.length,r=n[0],Q=n[1],u=0;X>u;u+=2)v[u]+=r,v[u+1]+=Q}Nd(w,V,g,q.vs,v,U,q.blend,q.color)}},qm=function(v,f,C,r,H,Z,x,J){var p,o=C.cs,j=C.uv,W=C.bs;if(v.getFaceVisible(f,Z)){var S=v.getFaceMat(f,Z);if(S&&(H=As(f,S)),Kc(x,H,J),o&&Ze(o,v.getFaceColor(f,Z),6),j){var i=v.getFaceUv(f,Z)||r[Z+"Uv"],L=v.getFaceUvScale(f,Z)||r[Z+"UvScale"],h=v.getFaceUvOffset(f,Z)||r[Z+"UvOffset"];i=i?[i[6],i[7],i[0],i[1],i[2],i[3],i[2],i[3],i[4],i[5],i[6],i[7]]:Qd;var I=i[0],y=i[1],R=i[2],M=i[3],U=i[4],e=i[5],d=i[6],K=i[7],l=i[8],E=i[9],Q=i[10],g=i[11];if(L){var $=L[0],u=L[1];I*=$,y*=u,R*=$,M*=u,U*=$,e*=u,d*=$,K*=u,l*=$,E*=u,Q*=$,g*=u}if(h){var O=h[0],P=h[1];I+=O,y+=P,R+=O,M+=P,U+=O,e+=P,d+=O,K+=P,l+=O,E+=P,Q+=O,g+=P}j.push(I,y,R,M,U,e,d,K,l,E,Q,g)}W&&(p=v.getBodyColor(f)||v.getFaceBlend(f,Z),p?Bp(W,p,6):_j(W,Be,6))}},_n=function(r,i,k,T){var B=r.getGL(),m=r._prg,C=r._buffer;if(!Jl(i)){xr(r),Bg(B,m);for(var t in i){var G=i[t];if(!(T&&!G.T||!T&&G.T)){G.invalidate?(G.invalidate=!1,Zh(G,"vs"),Zh(G,"cs"),Zh(G,"ls"),Zh(G,"ps")):k&&Zh(G,"ps");var X=G.vs32,e=k?G.ps32:G.cs32;yr(B,m,G.W,U,C.vs,X);var A=G.D,o=!r._dashDisabled&&A;o&&(Xd(B,m.uDash,!0),Xd(B,m.uDashDistance,A),Xd(B,m.uDashGapDistance,G.G),hk(B,m.aLineDistance),mr(B,C.lineDistance,G.ls32,m.aLineDistance,1),Xd(B,m.uDiffuse,G.A||Di));var D=!r._batchColorDisabled;D&&(Xd(B,m.uBatchColor,!0),hk(B,m.aBatchColor),mr(B,C.batchColor,e,m.aBatchColor,4)),fh(B),ih(B,0,X.length/3,B.LINES),Oi(B),D&&(Xd(B,m.uBatchColor,!1),Bd(B,m.aBatchColor)),o&&(Xd(B,m.uDash,!1),Bd(B,m.aLineDistance))}}hp(B,m)}},uh=function(B,T,q){var H,n,t,R,K,g,A,o,V,Y,W,D=B.getGL(),k=B._prg,b=B._buffer,I=B._33O;if(!Jl(I)){xr(B);for(H in I)if(n=Ch[H]||Wo,!(q&&!n.transparent||!q&&n.transparent)&&(t=I[H],T||!n.transparentMask)){var s=q&&n.autoSort!==!1&&(B._33Q||t.invalidate);if(t.invalidate?(t.invalidate=!1,Zh(t,"vs"),Zh(t,"ns"),Zh(t,"cs"),Zh(t,"rs"),Zh(t,"ps"),Zh(t,"bs"),Zh(t,"uv")):T&&Zh(t,"ps"),K=t.vs32,g=T?t.ps32:t.cs32,V=t.uv32,A=t.bs32,o=t.rs32,W=K.length/3,s&&(t.is=pj(K,B.getEye())),W){R=n.light,Y=B.getTexture(n.image),gj(D,k,U,n.light,n.opacity,n.reverseFlip,n.reverseColor,n.reverseCull),g?B._batchColorDisabled||(Xd(D,k.uBatchColor,!0),hk(D,k.aBatchColor),mr(D,b.batchColor,g,k.aBatchColor,4)):Xd(D,k.uDiffuse,n.color);var E=A&&!B._batchBlendDisabled;E&&(Xd(D,k.uBatchBlend,!0),hk(D,k.aBatchBlend),mr(D,b.batchBlend,A,k.aBatchBlend));var z=o&&!B._batchBrightnessDisabled;z&&(Xd(D,k.uBatchBrightness,!0),hk(D,k.aBatchBrightness),mr(D,b.batchBrightness,o,k.aBatchBrightness,1)),V?fh(D,k,Y,n.discardSelectable,b.uv,V,n.uvOffset,n.uvScale):fh(D),mr(D,b.vs,K,k.aPosition),mr(D,b.ns,t.ns32,k.aNormal),t.is?(dr(D,b.is,t.is),bc(D,0,W)):ih(D,0,W),V?Oi(D,k,Y):Oi(D),g&&!B._batchColorDisabled&&(Xd(D,k.uBatchColor,!1),Bd(D,k.aBatchColor)),E&&(Xd(D,k.uBatchBlend,!1),Bd(D,k.aBatchBlend)),z&&(Xd(D,k.uBatchBrightness,!1),Bd(D,k.aBatchBrightness)),Rd(D,k)}}}},pj=function(r,m){for(var Y=r.length/3,V=new Array(Y),i=Y/3,w=new Array(i),x=0;i>x;x++)w[x]=x;w.sort(function(X,E){var A=9*X,q=[(r[A]+r[A+3]+2*r[A+6])/4,(r[A+1]+r[A+4]+2*r[A+7])/4,(r[A+2]+r[A+5]+2*r[A+8])/4];A=9*E;var v=[(r[A]+r[A+3]+2*r[A+6])/4,(r[A+1]+r[A+4]+2*r[A+7])/4,(r[A+2]+r[A+5]+2*r[A+8])/4],d=Qh(m,q)-Qh(m,v);return d>0?-1:0>d?1:0});for(var x=0;i>x;x++){var p=3*x,j=3*w[x];V[p]=j,V[p+1]=j+1,V[p+2]=j+2}return new Fi(V)},Am=new sp([0,0,0,1,1,1,1,0]),Nq=new sp([0,0,1,0,0,1,0,0,1,0,0,1]),Gl=new Fi([0,1,2,2,3,0]),Bs=new sp([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),ce=new Fi([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Hg=new sp([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),lk=new sp([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),ob=Al(Bs,ce),Li=(new sp([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Fi([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),ni=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],nc=function(x,Q,F,C,D,X){X=X||16,x=x||16,Q=Q||0,F=F||x;var s,v,j,O,T,J,n,L,b=.5,Z=[],M=[],e=_/x,d=G/X;for(s=0;X>s;s++)for(T=s+1,O=s*d,L=T*d,v=Q;F>v;v++)J=v+1,j=v*e,n=J*e,Z.push(b*h(O)*r(j),b*r(O),-b*h(O)*h(j),b*h(L)*r(n),b*r(L),-b*h(L)*h(n),b*h(O)*r(n),b*r(O),-b*h(O)*h(n),b*h(O)*r(j),b*r(O),-b*h(O)*h(j),b*h(L)*r(j),b*r(L),-b*h(L)*h(j),b*h(L)*r(n),b*r(L),-b*h(L)*h(n)),M.push(v/x,s/X,J/x,T/X,J/x,s/X,v/x,s/X,v/x,T/X,J/x,T/X);
if(C)for(j=Q*e,s=0;X>s;s++)T=s+1,O=s*d,L=T*d,Z.push(0,0,0,b*h(L)*r(j),b*r(L),-b*h(L)*h(j),b*h(O)*r(j),b*r(O),-b*h(O)*h(j)),M.push(0,.5,Q/x,T/X,Q/x,s/X);if(D)for(j=F*e,s=0;X>s;s++)T=s+1,O=s*d,L=T*d,Z.push(0,0,0,b*h(O)*r(j),b*r(O),-b*h(O)*h(j),b*h(L)*r(j),b*r(L),-b*h(L)*h(j)),M.push(1,.5,F/x,s/X,F/x,T/X);return{vs:Z,uv:M}},Oc=function(y,k,d){y=y||.17,k=k||12,d=d||18,0>y?y=0:y>.25&&(y=.25);var S,t,R,q,m,L,s,c=.5,Y=[],N=[],Z=[],A=_/d,l=_/k,o=c-y;for(t=0;k>=t;t++)for(q=-G+t*l,L=r(q),m=h(q),S=0;d>=S;S++)R=S*A,s=o+y*L,Y.push(r(R)*s,m*y,-h(R)*s),N.push(S/d,1-t/k);for(t=0;k>t;t++){var O=t*(d+1),D=(t+1)*(d+1);for(S=0;d>S;S++)Z.push(O+S,D+S+1,D+S,O+S,O+S+1,D+S+1)}return{vs:Y,uv:N,is:Z}},ur=function(M,n,x,j,R,p,o){o=o||12,M=M||18,n=n||0,x=x||M,p=p||.17,0>p?p=0:p>.25&&(p=.25);var A,N,c,V,U,D,K,X,b,z,d=.5,E=[],a=[],$=_/M,f=_/o,m=d-p;for(c=0;o>c;c++)for(V=c+1,K=-G+c*f,X=-G+V*f,A=n;x>A;A++)N=A+1,U=A*$,D=N*$,b=m+p*r(K),z=m+p*r(X),E.push(r(U)*b,h(K)*p,-h(U)*b,r(D)*b,h(K)*p,-h(D)*b,r(D)*z,h(X)*p,-h(D)*z,r(U)*b,h(K)*p,-h(U)*b,r(D)*z,h(X)*p,-h(D)*z,r(U)*z,h(X)*p,-h(U)*z),a.push(A/M,1-c/o,N/M,1-c/o,N/M,1-V/o,A/M,1-c/o,N/M,1-V/o,A/M,1-V/o);if(j){var q=[],P=[];for(c=0;o>c;c++)V=c+1,K=-G+c*f,X=-G+V*f,U=n*$,b=m+p*r(K),z=m+p*r(X),q.push(r(U)*b,h(K)*p,-h(U)*b,r(U)*z,h(X)*p,-h(U)*z,r(U)*m,0,-h(U)*m),P.push(.5+.5*r(K),.5-.5*h(K),.5+.5*r(X),.5-.5*h(X),.5,.5)}if(R){var i=[],W=[];for(c=0;o>c;c++)V=c+1,K=-G+c*f,X=-G+V*f,U=x*$,b=m+p*r(K),z=m+p*r(X),i.push(r(U)*b,h(K)*p,-h(U)*b,r(U)*m,0,-h(U)*m,r(U)*z,h(X)*p,-h(U)*z),W.push(.5-.5*r(K),.5-.5*h(K),.5,.5,.5-.5*r(X),.5-.5*h(X))}return{vs:E,uv:a,from_vs:q,from_uv:P,to_vs:i,to_uv:W}},Gp=function(m,I){for(var X,H,o,N=.5,f=16,u=[],A=[],w=[],z=_/f,M=0;f>=M;M++)X=M*z,H=r(X)*N,o=h(X)*N,u.push(H,-N,o,H,N,o),A.push(1-M/f,1,1-M/f,0);for(M=0;f>M;M++)w.push(2*M,2*M+1,2*M+3,2*M,2*M+3,2*M+2);if(I){var R=[],l=[],C=[];for(R.push(0,-N,0),l.push(.5,.5),M=0;f>=M;M++)X=M*z,H=r(X),o=h(X),R.push(H*N,-N,-o*N),l.push(.5+.5*H,.5+.5*o);for(M=0;f>M;M++)C.push(0,M+2,M+1)}if(m){var e=[],x=[],b=[];for(e.push(0,N,0),x.push(.5,.5),M=0;f>=M;M++)X=M*z,H=r(X),o=h(X),e.push(H*N,N,-o*N),x.push(.5+.5*H,.5-.5*o);for(M=0;f>M;M++)b.push(0,M+1,M+2)}return{vs:u,uv:A,is:w,bottom_vs:R,bottom_uv:l,bottom_is:C,top_vs:e,top_uv:x,top_is:b}},Ok=function(K,w,e,V,s,F,C){K=K||12,w=w||0,e=e||K;for(var y,R,Z,z,b,g,H,a,v=.5,Q=[],L=[],P=_/K,S=w;e>S;S++)y=S+1,R=S*P,Z=y*P,z=r(R)*v,b=h(R)*v,g=r(Z)*v,H=h(Z)*v,Q.push(z,-v,-b,g,-v,-H,z,v,-b,g,-v,-H,g,v,-H,z,v,-b),L.push(S/K,1,y/K,1,S/K,0,y/K,1,y/K,0,S/K,0);if(C){var D=[],Y=[];for(S=w;e>S;S++)R=P*S,Z=P*(S+1),z=r(R),b=h(R),g=r(Z),H=h(Z),D.push(z*v,-v,-b*v,0,-v,0,g*v,-v,-H*v),Y.push(.5+.5*z,.5+.5*b,.5,.5,.5+.5*g,.5+.5*H)}if(F){var x=[],U=[];for(S=w;e>S;S++)R=P*S,Z=P*(S+1),z=r(R),b=h(R),g=r(Z),H=h(Z),x.push(z*v,v,-b*v,g*v,v,-H*v,0,v,0),U.push(.5+.5*z,.5-.5*b,.5+.5*g,.5-.5*H,.5,.5)}return V&&(R=P*w,z=r(R)*v,b=h(R)*v,a=w/K,Q.push(0,v,0,0,-v,0,z,-v,-b,z,-v,-b,z,v,-b,0,v,0),L.push(0,0,0,1,a,1,a,1,a,0,0,0)),s&&(R=P*e,z=r(R)*v,b=h(R)*v,a=e/K,Q.push(0,-v,0,0,v,0,z,v,-b,z,v,-b,z,-v,-b,0,-v,0),L.push(1,1,1,0,a,0,a,0,a,1,1,1)),{vs:Q,uv:L,bottom_vs:D,bottom_uv:Y,top_vs:x,top_uv:U}},On=function(s,L,E,l,D){L=L||18,E=E||0,l=l==U?_:l,D=D==U?.5:D;for(var f,N,O,g,S,p,j=[0,.5,.75,.875,.9375],e=[],b=[],C=[],y=l/L,B=0;B<j.length;B++){var v=0===B%2?0:.5;for(f=0;L>=f;f++)N=(f+v)*y+E,O=1-j[B],e.push(r(N)*D*O,-D+2*j[B]*D,-h(N)*D*O),b.push((f+v)/L,O)}for(B=0;B<j.length-1;B++){var J=B*(L+1),T=(B+1)*(L+1);for(f=0;L>f;f++)C.push(J+f,T+f+1,T+f,J+f,J+f+1,T+f+1)}for(p=e.length/3-(L+1),f=0;L>f;f++)e.push(0,D,0),b.push((f+.5)/L,0);for(f=0;L>f;f++)C.push(p+f,p+f+1,p+(L+1)+f);if(s){var w=[],G=[],c=[];for(w.push(0,-D,0),G.push(.5,.5),f=0;L>=f;f++)N=f*y+E,g=r(N),S=h(N),w.push(g*D,-D,-S*D),G.push(.5+.5*g,.5+.5*S);for(f=0;L>f;f++)c.push(0,f+2,f+1)}return{vs:e,uv:b,is:C,bottom_vs:w,bottom_uv:G,bottom_is:c}},wp=function(F,b,p,e,Z,H){F=F||16,b=b||0,p=p||F;for(var R=.5,K=[],N=[],u=_/F,a=b;p>a;a++){var o=a+1,M=u*a,Q=u*o;K.push(r(M)*R,-R,-h(M)*R,r(Q)*R,-R,-h(Q)*R,0,R,0),N.push(a/F,1,o/F,1,(a+o)/2/F,0)}if(H){var d=[],L=[];for(a=b;p>a;a++){M=u*a,Q=u*(a+1);var n=r(M),z=h(M),c=r(Q),E=h(Q);d.push(n*R,-R,-z*R,0,-R,0,c*R,-R,-E*R),L.push(.5+.5*n,.5+.5*z,.5,.5,.5+.5*c,.5+.5*E)}}return e&&(M=u*b,K.push(0,R,0,0,-R,0,r(M)*R,-R,-h(M)*R),N.push(0,0,0,1,b/F,1)),Z&&(M=u*p,K.push(0,-R,0,0,R,0,r(M)*R,-R,-h(M)*R),N.push(1,1,1,0,p/F,1)),{vs:K,uv:N,bottom_vs:d,bottom_uv:L}},hd=function(l,f,o,Y,e,t,v,H){for(var R=[],u=0;u<l.length-1;u+=2)R.push({x:l[u],y:l[u+1]});return Ef(R,f,o,Y,e,t,v,H,!1)},jh={roundRect:function(H,K){return hd([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],H,K,3)},star:function(A,Y){return hd([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],A,Y)},rect:function(b,M){return hd([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],b,M)},triangle:function(o,a){return hd([0,-.5,.5,.5,-.5,.5],[1,2,2,5],o,a)},rightTriangle:function(m,Q){return hd([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],m,Q)},parallelogram:function(F,k){return hd([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],F,k)},trapezoid:function(x,A){return hd([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],x,A)}},mn={sphere:1,cylinder:1,cone:1,torus:1},Ue={torus:1,sphere:1},ji=pr(Ji(jh),{cylinder:1}),Gf=pr(Ji(jh),{cylinder:1,cone:1}),zi=function(V,O,D){var u,e=un(V.mat,D,O),F=un(V.s3,D,O),I=un(V.t3,D,O),M=un(V.r3,D,O);return(F||M||I||e)&&(u=as(O._6O),xr(O,oj(e,F,M,un(V.rotationMode,D,O),I))),u},ne=function(Y,E,H,e,Z,b,G){if(bf(H))H.forEach(function(l){ne(Y,E,l,e,Z,b,G)});else if(re(H))ne(Y,E,Se(e,H),e,Z,b,G);else if(ks(H))if(H.shape3d){var n=zi(H,Y,E);ne(Y,E,H.shape3d,e,Z,b,H),n&&Gr(Y,n)}else xe(Y,E,H,e,Z,b,G)},xe=function(p,U,n,R,J,u,I){if(I=I||Wo,!u||u(R("shape3d.transparent",n.transparent,I.transparent))){var P=zi(n,p,U);Xk(n);var Q=p._26I,e=p._prg,s=p._buffer,g=R("shape3d.color",n.color,I.color);J||(J=R("shape3d.blend",n.blend,I.blend)),gj(Q,e,J,R("shape3d.light",n.light,I.light),R("shape3d.opacity",n.opacity,I.opacity),R("shape3d.reverse.flip",n.reverseFlip,I.reverseFlip),R("shape3d.reverse.color",n.reverseColor,I.reverseColor),R("shape3d.reverse.cull",n.reverseCull,I.reverseCull)),n.vs&&R(oh,n.visible,I.visible)&&wq(Q,e,s,g,p.getTexture(R("shape3d.image",n.image,I.image),U),R("shape3d.discard.selectable",n.discardSelectable,I.discardSelectable),n.vs,n.uv,n.ns,n.is,R("shape3d.uv.offset",n.uvOffset,I.uvOffset),R("shape3d.uv.scale",n.uvScale,I.uvScale)),n.top_vs&&R(qp,n.topVisible,I.topVisible)&&wq(Q,e,s,R("shape3d.top.color",n.topColor,I.topColor)||g,p.getTexture(R("shape3d.top.image",n.topImage,I.topImage),U),R("shape3d.top.discard.selectable",n.topDiscardSelectable,I.topDiscardSelectable),n.top_vs,n.top_uv,n.top_ns,n.top_is,R("shape3d.top.uv.offset",n.topUvOffset,I.topUvOffset),R("shape3d.top.uv.scale",n.topUvScale,I.topUvScale)),n.bottom_vs&&R(th,n.bottomVisible,I.bottomVisible)&&wq(Q,e,s,R("shape3d.bottom.color",n.bottomColor,I.bottomColor)||g,p.getTexture(R("shape3d.bottom.image",n.bottomImage,I.bottomImage),U),R("shape3d.bottom.discard.selectable",n.bottomDiscardSelectable,I.bottomDiscardSelectable),n.bottom_vs,n.bottom_uv,n.bottom_ns,n.bottom_is,R("shape3d.bottom.uv.offset",n.bottomUvOffset,I.bottomUvOffset),R("shape3d.bottom.uv.scale",n.bottomUvScale,I.bottomUvScale)),n.from_vs&&R(om,n.fromVisible,I.fromVisible)&&wq(Q,e,s,R("shape3d.from.color",n.fromColor,I.fromColor)||g,p.getTexture(R("shape3d.from.image",n.fromImage,I.fromImage),U),R("shape3d.from.discard.selectable",n.fromDiscardSelectable,I.fromDiscardSelectable),n.from_vs,n.from_uv,n.from_ns,n.from_is,R("shape3d.from.uv.offset",n.fromUvOffset,I.fromUvOffset),R("shape3d.from.uv.scale",n.fromUvScale,I.fromUvScale)),n.to_vs&&R(be,n.toVisible,I.toVisible)&&wq(Q,e,s,R("shape3d.to.color",n.toColor,I.toColor)||g,p.getTexture(R("shape3d.to.image",n.toImage,I.toImage),U),R("shape3d.to.discard.selectable",n.toDiscardSelectable,I.toDiscardSelectable),n.to_vs,n.to_uv,n.to_ns,n.to_is,R("shape3d.to.uv.offset",n.toUvOffset,I.toUvOffset),R("shape3d.to.uv.scale",n.toUvScale,I.toUvScale)),Rd(Q,e),P&&Gr(p,P)}},wq=function(p,S,D,d,H,$,y,h,B,n,w,f){y&&(Xd(p,S.uDiffuse,d),h?fh(p,S,H,$,D.uv,h,w,f):fh(p),mr(p,D.vs,y,S.aPosition),mr(p,D.ns,B,S.aNormal),n?(dr(p,D.is,n),bc(p,0,n.length)):ih(p,0,y.length/3),h?Oi(p,S,H):Oi(p))},Se=function(s,v){if(v||(v=s(tc)),!v)return U;if(ks(v))return v;var k=Fd[v];if(k)return k;var i=v;if(mn[v]){var X=s("shape3d.side"),u=s("shape3d.side.from"),V=s("shape3d.side.to"),$=s(om),b=s(be);3>X?(X=0,u=0,V=0,$=!1,b=!1):((u==U||0>u)&&(u=0),(V==U||V>X)&&(V=X),0===u&&V===X&&($=!1,b=!1)),i+="-"+X+"-"+u+"-"+V+"-"+$+"-"+b}if(ji[v]){var M=s(qp);i+="-"+M}if(Gf[v]){var A=s(th);i+="-"+A}if("torus"===v){var E=s("shape3d.torus.radius");0>E?E=0:E>.25&&(E=.25),i+="-"+E}if(Ue[v]){var y=s(Xl);i+="-"+y}return k=is[i],k||("box"===v?k=C.createBoxModel():jh[v]?k=jh[v](M,A):"sphere"===v?k=C.createSphereModel(X,u,V,$,b,y):v===fb?k=C.createCylinderModel(X,u,V,$,b,M,A):"cone"===v?k=C.createConeModel(X,u,V,$,b,A):"torus"===v&&(k=C.createTorusModel(X,u,V,$,b,E,y)),is[i]=k),k},Xk=function(){var a=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],o=["is","top_is","bottom_is","from_is","to_is"];return P=tp(Yp.substr(Yp.indexOf("^#")+2)),wl(C[gf(km+a[15]+"n"+a[16])]())&&Yh()?function(r){r&&!r._complete_&&(r._complete_=!0,r.vs&&ci(r.ns)&&(r.ns=Al(r.vs,r.is)),r.top_vs&&ci(r.top_ns)&&(r.top_ns=Al(r.top_vs,r.top_is)),r.bottom_vs&&ci(r.bottom_ns)&&(r.bottom_ns=Al(r.bottom_vs,r.bottom_is)),r.from_vs&&ci(r.from_ns)&&(r.from_ns=Al(r.from_vs,r.from_is)),r.to_vs&&ci(r.to_ns)&&(r.to_ns=Al(r.to_vs,r.to_is)),a.forEach(function(c){var V=r[c];bf(V)&&(r[c]=new sp(V))}),o.forEach(function(i){var A=r[i];bf(A)&&(r[i]=new Fi(A))}))}:void 0}(),kf=function(s,R){var d=s[R];bf(d)&&(s[R]=new sp(d))};pr(Cj,{_25Q:function(y){y._16O=function(j,p,L,O,B,o,K,M,F){var a=this.info;if(a){var c,P,x,G,r,i,f=pn();if(Vo[p]?(c=a.p3,P=a.c1,x=a.c2):xq[p]?(P=a.s1||a.c1,x=a.s2||a.c2):(P=a.t1||a.c1,x=a.t2||a.c2),c)i=Ek(p,Qm,L,O,M,F);else{var J=kd(x,P),n=Qh(P,x);G=[0,-v(J[2],J[0]),N(J[1]/n)],r="zyx",c=[(P[0]+x[0])/2,(P[1]+x[1])/2,(P[2]+x[2])/2],i=Ek(p,[n,0,0],L,O,M,F)}return Rk(f,i,c,O,B,o,K,j,G,r)}return Rp},y._80o=function(q,$,C){var x=this,F=x.shapeModel;if(F){var M=x.gv;xr(M),ne(M,x.data,F,x.s,x.getBodyColor(),C)}},y.createLineModel=function(X,x,V,D,L){for(var Q=this,s=Q.s,W=Td(X,x,s(Xl)),G=[],C=0;C<W.length;C++){var J=W[C],h=J.length;if(h>1){var u=J[0];G.push(u.x,u.y,u.z);for(var z=1;h-1>z;z++)u=J[z],G.push(u.x,u.y,u.z),G.push(u.x,u.y,u.z);u=J[h-1],G.push(u.x,u.y,u.z)}}var o,_,t,S=s(D+".color"),H=s(L),d=0;return H&&(_=s(L+".color"),o=s(L+".pattern"),d=s(L+".offset"),t=S),nf(Q.gv,Q.data,G,_||S,t?U:s(D+".gradient.color"),V,o||s(D+".pattern"),d,t),W},y.createTubeModel=function(q,n,p,d){for(var e=this,b=e.s,J=b("shape3d.side")||yq,O=b("shape3d.start.angle"),j=b(qp)?b("shape3d.top.cap"):U,G=b(th)?b("shape3d.bottom.cap"):U,i="flat"===j,a="flat"===G,y=i&&(d?d.uv:b("shape3d.top.image")),W=a&&(d?d.uv:b("shape3d.bottom.image")),v=d?d.uv:b("shape3d.image"),Y={vs:[],uv:v?[]:U,top_vs:i?[]:U,top_uv:y?[]:U,bottom_vs:a?[]:U,bottom_uv:W?[]:U},s=Td(q,n,b(Xl),p),Z=0,A=s.length;A>Z;Z++)Rb(Y,s[Z],b(jj),p,J,O,j,G);if(d){var x=[];Vl(e.gv,e.data,Y,b,e.getBodyColor(),[],d,x),x.length&&(_j(d.vs,x),_j(d.ns,Al(x)))}else e.shapeModel=Y;return s},y.getCache=function(){var H=this.info;if(H){var q=H.list;if(q){var j=H.cache;return j||(j=H.cache=Ng(q)),j}}return U}}});var fe=function(b,S){for(var I,_=0,c=b.length,u=0,i=c-1;i>=u;)if(_=Z(u+(i-u)/2),I=b[_].length-S,0>I)u=_+1;else{if(!(I>0)){i=_;break}i=_-1}_=i;var Y=b[_],w=Y.point;return _===c-1||Y.length===S||(w=(new gs).subVectors(b[_+1].point,w).normalize().multiplyScalar(S-Y.length).add(w)),{point:w,tangent:Y.tangent}},Ng=function(n){for(var Z,z,X=[],v=0,w=0;w<n.length;w++){for(var t=n[w],J=0;J<t.length;J++){Z=t[J],z&&(v+=z.distanceTo(Z));var e=new gs,D=t[J+1];D?e.subVectors(D,Z):z?e.subVectors(Z,z):e.x=1,e.normalize(),X.push({point:Z,length:v,tangent:e}),z=Z}z=null}return X},Td=function(w,M,r,$){r=r||te;for(var L=[],s=0,P=w.size();P>s;s++){var g=w.get(s);L.push(new gs(g.x,g.e||0,g.y))}Ni(M)&&(M=M._as);for(var z,x,C,o,e,R=[],i=0,O=0,V=M?M.length:P;V>O;O++)if(e=M?M[O]:0===O?1:2,1===e)R.push(C=[]),C.push(L[i++]);else if(2===e||5===e)if(o=2===e?L[i++]:C[0],$){var N=M?M[O+1]:V>O+1?2:U;if(2===N||5===N){var u=C[C.length-1],t=2===N?L[i]:C[0],b=(new gs).subVectors(u,o),k=(new gs).subVectors(t,o),X=b.length(),v=k.length();if($>X/2&&$>v/2)C.push(o);else for(b.multiplyScalar(Y($,X/2)/X).add(o),k.multiplyScalar(Y($,v/2)/v).add(o),z=new cl(b,o,k).getPoints(r),x=0;r>=x;x++)C.push(z[x])}else C.push(o)}else C.push(o);else if(3===e)for(z=new cl(C[C.length-1],L[i++],L[i++]).getPoints(r),x=1;r>=x;x++)C.push(z[x]);else if(4===e)for(z=new Aq(C[C.length-1],L[i++],L[i++],L[i++]).getPoints(r),x=1;r>=x;x++)C.push(z[x]);return R},Zc=function(Y){for(var w,k,J=new gs,P=[],B=[],Q=[],s=0,V=Y.length;V>s;s++)w=Y[s],k=Y[s+1],k?J.subVectors(k,w):J.subVectors(w,Y[s-1]),P.push(J.normalize().clone());var O,y,U,G,X=new gs,T=new gs,n=new ss,j=1e-4,r=Number.MAX_VALUE,W=P[0],H=B[0]=new gs,_=Q[0]=new gs;for(y=g(W.x),U=g(W.y),G=g(W.z),r>=y&&(r=y,X.set(1,0,0)),r>=U&&(r=U,X.set(0,1,0)),r>=G&&X.set(0,0,1),T.crossVectors(W,X).normalize(),H.crossVectors(W,T),_.crossVectors(W,H),s=1;V>s;s++)B[s]=B[s-1].clone(),Q[s]=Q[s-1].clone(),T.crossVectors(P[s-1],P[s]),T.length()>j&&(T.normalize(),O=p(ls(P[s-1].dot(P[s]),-1,1)),B[s].applyMatrix4(n.makeRotationAxis(T,O))),Q[s].crossVectors(P[s],B[s]);return{B:Q,T:P,N:B}},Rb=function(){var t=function(k){for(var l=1;l<arguments.length;l++){var U=arguments[l];k.push(U.x,U.y,U.z)}},a=function(_){for(var J=1;J<arguments.length;J++){var u=arguments[J].uv;_.push(u[0],u[1])}},F=function(i,O,K,V,T){var c=-V*r(T),Y=V*h(T);return new gs(i.x+c*K.x+Y*O.x,i.y+c*K.y+Y*O.y,i.z+c*K.z+Y*O.z)},l=function($,n,e,b,t,u,z){for(var q=[],a=_/t,Q=0;t>=Q;Q++){var E=F($,n,e,b,Q*a+u);q.push(E),z!=U&&(E.uv=[z,Q/t])}return q},i=function(o,B,a,M,j,J,G,W){var g=B?o.top_vs:o.bottom_vs;if(g)for(var L=B?o.top_uv:o.bottom_uv,V=_/G,R=0;G>R;R++){var u,s;B?(u=R*V+W,s=(R+1)*V+W):(s=R*V+W,u=(R+1)*V+W),t(g,F(a,M,j,J,u),F(a,M,j,J,s),a),L&&L.push(.5-.5*r(u),.5-.5*h(u),.5-.5*r(s),.5-.5*h(s),.5,.5)}};return function(h,z,L,N,K,V,J,s){var m=z.length;if(m>1){var w,Z,p,C,B,e,E,R=Zc(z),c=R.T,k=R.N,d=R.B;"flat"===J&&i(h,!0,z[0],d[0],k[0],N,K,V),"flat"===s&&i(h,!1,z[m-1],d[m-1],k[m-1],N,K,V);var X,y,_=[],q=S(K/2),A="round"===J,Q="round"===s,f=z[0],b=c[0],$=d[0],D=k[0],v=z[m-1],g=c[m-1],I=d[m-1],T=k[m-1];if(A){for(p=1;q>=p;p++)k.splice(0,0,D),d.splice(0,0,$),c.splice(0,0,b),y=-p/q*N,z.splice(0,0,b.clone().multiplyScalar(y).add(f)),_[q-p]=o(N*N-y*y);m+=q}if(Q){for(p=1;q>=p;p++)k.push(T),d.push(I),c.push(g),y=p/q*N,z.push(g.clone().multiplyScalar(y).add(v)),_[z.length-1]=o(N*N-y*y);m+=q}if(h.uv){var u=0,O=0,M=[];for(L&&(u=L),B=z[0],M[0]=0,p=1;m>p;p++)C=z[p],M[p]=B.distanceTo(C),B=C,L||(u+=M[p]);for(X=[],p=0;m>p;p++)O+=M[p],X[p]=u?O/u:0}for(p=0;m>p;p++){if(C=z[p],e=d[p],E=k[p],w=l(C,e,E,_[p]===H?N:_[p],K,V,X?X[p]:U),Z)for(var r=0;K>r;r++){var x=Z[r],n=Z[r+1]||Z[0],P=w[r],Y=w[r+1]||w[0];t(h.vs,n,x,P,P,Y,n),h.uv&&a(h.uv,n,x,P,P,Y,n)}Z=w}}}}();pr(C,{getLineLength:function($){return $[$.length-1].length},getLineOffset:function(l,d){return fe(l,d)},getLineCacheInfo:function(s,Z,x,u){return Ng(Td(s,Z,x,u))}});var sc=e.Light=function(){si(sc,this),this.s(Ed,d[Ed]),this.s(tc,"sphere"),this.s3(20,20,20)};Oo("Light",yh,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(_,W,v){sc.superClass.onStyleChanged.apply(this,arguments),_===Ed&&this.s("shape3d.color",v)}});var db=wi.Graph3dView=function(k,u){var f=this;f._attributes=u||C.graph3dViewAttributes,f._25I={},f._view=Jp(1,f);var H=f._canvas=Kh(f._view);H.addEventListener("webglcontextlost",function(v){v.preventDefault(),xh(f),f._26I=U,f._1o.texture=U,f._35O=!0},!1),H.addEventListener("webglcontextrestored",function(){f._35O=!1,f.iv()},!1),f._34O={},f._33O={},f._wireframeIndexMap={},f._wireframeModelMap={},f._polylineIndexMap={},f._polylineIndexMap={},f._8O=[],f._7O=pn(),f._6O=pn(),f._1o=new Vn(f),f._30O=new yl(f),f._31O=new ym(f),f._32O=new Qq(f),f._33Q=!0,f._eye=Ji(C.graph3dViewEye),f._center=Ji(C.graph3dViewCenter),f._up=Ji(C.graph3dViewUp),f._lightChanged=!1,f._59O=[],f._spots=[],f._dirs=[],f.dm(k?k:new Br),f.setInteractors([new tn(f)])},$i={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};mj("Graph3dView",O,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",lf,Kp,"firstPersonMode",mg,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",Gm,cr,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:H,_boundaries:H,_moveStep:C.graph3dViewMoveStep,_rotateStep:C.graph3dViewRotateStep,_pannable:C.graph3dViewPannable,_rotatable:C.graph3dViewRotatable,_walkable:C.graph3dViewWalkable,_resettable:C.graph3dViewResettable,_zoomable:C.graph3dViewZoomable,_firstPersonMode:C.graph3dViewFirstPersonMode,_mouseRoamable:C.graph3dViewMouseRoamable,_gridVisible:C.graph3dViewGridVisible,_gridSize:C.graph3dViewGridSize,_gridGap:C.graph3dViewGridGap,_gridColor:C.graph3dViewGridColor,_originAxisVisible:C.graph3dViewOriginAxisVisible,_centerAxisVisible:C.graph3dViewCenterAxisVisible,_axisXColor:C.graph3dViewAxisXColor,_axisYColor:C.graph3dViewAxisYColor,_axisZColor:C.graph3dViewAxisZColor,_ortho:C.graph3dViewOrtho,_orthoWidth:C.graph3dViewOrthoWidth,_fovy:C.graph3dViewFovy,_near:C.graph3dViewNear,_far:C.graph3dViewFar,_headlightColor:C.graph3dViewHeadlightColor,_headlightIntensity:C.graph3dViewHeadlightIntensity,_headlightRange:C.graph3dViewHeadlightRange,_headlightDisabled:C.graph3dViewHeadlightDisabled,_rectSelectable:C.graph3dViewRectSelectable,_rectSelectBackground:C.graph3dViewRectSelectBackground,_editSizeColor:C.graph3dViewEditSizeColor,_autoMakeVisible:sg,_fogDisabled:C.graph3dViewFogDisabled,_fogColor:C.graph3dViewFogColor,_fogNear:C.graph3dViewFogNear,_fogFar:C.graph3dViewFogFar,_dashDisabled:C.graph3dViewDashDisabled,_batchColorDisabled:C.graph3dViewBatchColorDisabled,_batchBlendDisabled:C.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:C.graph3dViewBatchBrightnessDisabled,setEye:function(C,J,m){1===arguments.length&&(J=C[1],m=C[2],C=C[0]);var B=this._eye;B[0]=C,B[1]=J,B[2]=m,this.fp(Gm,U,B)},setCenter:function(_,z,h){1===arguments.length&&(z=_[1],h=_[2],_=_[0]);var D=this._center;D[0]=_,D[1]=z,D[2]=h,this.fp(cr,U,D)},setUp:function(Y,o,e){1===arguments.length&&(o=Y[1],e=Y[2],Y=Y[0]);var c=this._up;c[0]=Y,c[1]=o,c[2]=e,this.fp("up",U,c)},isTransparentMask:function(S){return S.s("transparent.mask")},getAspect:function(){var a=this,c=a._aspect;return c?c:a.getWidth()/a.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(O){var a=this,S=a._dataModel,j=a._3o;S!==O&&(S&&(S.umm(a.handleDataModelChange,a),S.umd(a.handleDataPropertyChange,a),j||S.sm().ums(a._16o,a)),a._dataModel=O,O.mm(a.handleDataModelChange,a),O.md(a.handleDataPropertyChange,a),j?j._21I(O):O.sm().ms(a._16o,a),a.invalidateAll(!0),a.invalidateLight(),a.fp(Pn,S,O))},handleDataPropertyChange:function(N){var r=N.data;this.invalidateData(r),Mj(r)&&"s:light.type"===N.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(f){var o=this,d=f.property;o.iv(),o._18Q=U,"eye"===d?o._33Q=!0:"devicePixelRatio"===d?o._42(U,o._devicePixelRatio||Yr):$i[d]&&xh(o)},_5O:function(u){var a=u._22Q();return a?new a(this,u):U},getData3dUI:function(L){var _=this._25I[L._id];return _===H&&(_=this._5O(L),this._25I[L._id]=_),_},invalidateAll:function(Y){var e=this;if(Y){for(var t in e._25I){var l=e._25I[t];l&&l.dispose()}e._25I={},e.iv(),Dm(e)}else e.dm().each(function(X){e.invalidateData(X)})},invalidateSelection:function(){var m=this;m.sm().each(function(c){m.invalidateData(c)})},invalidateData:function(s){var w=this,O=w.getData3dUI(s);O&&(O.iv(),w.iv()),Dm(w,s)},invalidateBatch:function(f){var F=this,T=F._33O,O=T[f];O&&(O.ds.forEach(function(b){var c=F.getData3dUI(b);c&&c.iv(),delete F._34O[b._id]}),delete T[f],F.iv())},handleDataModelChange:function(T){var I=this,t=T.kind,F=T.data;if("add"===t)I.invalidateData(F),ns(F)&&F.getEdgeGroup()&&F.getEdgeGroup().eachSiblingEdge(I.invalidateData,I),Mj(F)&&I.invalidateLight();else if(t===fo){var N=F._id,f=I._25I[N];f&&(f.dispose(),delete I._25I[N],I.iv()),F===I._currentSubGraph&&I.setCurrentSubGraph(U),Dm(I,F),Mj(F)&&I.invalidateLight()}else t===eh&&(I.invalidateAll(!0),I.setCurrentSubGraph(U),Dm(I),I.invalidateLight())},toCanvas:function(C){var y=this,X=y.getGL();if(y.validate(),C){var V=X.getParameter(X.COLOR_CLEAR_VALUE);Dn(X,C)}y._42(U,1);var W=y.getWidth(),c=y.getHeight(),s=new Uint8Array(4*W*c),u=Kh(),e=u.getContext("2d");X.readPixels(0,0,W,c,X.RGBA,X.UNSIGNED_BYTE,s),kr(u,W,c,1);for(var $=e.getImageData(0,0,W,c),g=$.data,M=0;M<g.length;M+=4){var K=M/4,r=Z(K/W),j=K-r*W;K=4*((c-1-r)*W+j),g[K]=s[M],g[K+1]=s[M+1],g[K+2]=s[M+2],g[K+3]=s[M+3]}return e.putImageData($,0,0),C&&Dn(X,V),y._42(U,y._devicePixelRatio||Yr),u},toDataURL:function(u,b){var h=this,F=h.getGL();if(h.validate(),u){var i=F.getParameter(F.COLOR_CLEAR_VALUE);Dn(F,u)}h._42(U,1);var c=h._canvas.toDataURL(b||"image/png",1);return u&&Dn(F,i),h._42(U,h._devicePixelRatio||Yr),c},getGL:function(){var O=this,R=O._26I,S=O._prg;if(!R)try{O._2O={},R=O._26I=O._canvas.getContext("webgl",O._attributes)||O._canvas.getContext("experimental-webgl",O._attributes),R._emptyTexture=Eb(R),O._buffer={vs:Sr(R),ns:Sr(R),is:Sr(R),uv:Sr(R),batchColor:Sr(R),batchBlend:Sr(R),batchBrightness:Sr(R),lineDistance:Sr(R)},O._1O=Rj(R);var s=O._cube={vs:Sr(R),ns:Sr(R),is:Sr(R),uv:Sr(R)};mr(R,s.vs,Bs),mr(R,s.ns,ob),mr(R,s.uv,Hg),dr(R,s.is,ce)}catch(x){}if(R&&!S){if(S=O._prg=R.createProgram(),!S)return U;var P=O._dirs.length,V=O._spots.length,u=O._59O.length,T=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];P&&T.push("uDirColor","uDirPosition"),V&&T.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),u&&T.push("uPointColor","uPointRange","uPointPosition"),Dn(R,[0,0,0,0]),R.clearDepth(1),R.enable(R.DEPTH_TEST),R.depthFunc(R.LEQUAL),R.enable(R.BLEND),R.blendFunc(R.SRC_ALPHA,R.ONE_MINUS_SRC_ALPHA),Fe||(Yp=tp(Yp.substring(0,Yp.indexOf("^#"))),Ig=tp(Ig),Fe=!0);var G=["#define MAX_DIR "+P,"#define MAX_SPOT "+V,"#define MAX_POINT "+u,O._fogDisabled?"":"#define FOG",O._dashDisabled?"":"#define DASH",O._batchColorDisabled?"":"#define BATCHCOLOR",O._batchBlendDisabled?"":"#define BATCHBLEND",O._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),k=Dd(R,S,R.VERTEX_SHADER,Yp.replace("PREFIX",G)),I=Dd(R,S,R.FRAGMENT_SHADER,Ig.replace("PREFIX",G));X?T.push("aPosition"):(S.aPosition=0,R.bindAttribLocation(S,0,"aPosition")),R.linkProgram(S),T.forEach(function(s){S[s]=/^u/.test(s)?R.getUniformLocation(S,s):R.getAttribLocation(S,s)}),R.useProgram(S),R.deleteShader(k),R.deleteShader(I)}return R},getBrightness:function(m){var V=m.s("brightness"),K=this.isSelected(m)?m.s("select.brightness"):U;return V==U?K:K==U?V:V*K},getWireframe:function(m){var C=m.s("wf.visible"),i=m.s("wf.width");return C===!0||i>0&&"selected"===C&&this.isSelected(m)?{color:m.s("wf.color"),width:i,"short":m.s("wf.short"),mat:m.s("wf.mat")}:void 0},getBodyColor:function(I){return I.s("body.color")},getMat:function(Y){return Y.getMat?Y.getMat():Y.s("mat")},getFaceMat:function(Y,F){return Y.getFaceMat?Y.getFaceMat(F):Y.s(F+".mat")},getFaceBlend:function(T,L){return T.s(L+".blend")||T.s("all.blend")},getFaceColor:function(w,r){return w.s(r+".color")||w.s("all.color")},getFaceImage:function(G,l){return G.s(l+".image")||G.s("all.image")},getFaceDiscardSelectable:function(w,J){var m=w.s(J+".discard.selectable");return m==U?w.s("all.discard.selectable"):m},getFaceUv:function(y,R){return y.s(R+".uv")||y.s("all.uv")},getFaceUvOffset:function(M,v){return M.s(v+".uv.offset")||M.s("all.uv.offset")},getFaceUvScale:function(e,c){return e.s(c+".uv.scale")||e.s("all.uv.scale")},getFaceLight:function(z,X){var a=z.s(X+".light");return a==U?z.s("all.light"):a},getFaceVisible:function(o,j){var C=o.s(j+".visible");return C==U?o.s("all.visible"):C},getFaceOpacity:function(l,f){var r=l.s(f+".opacity");return r==U?l.s("all.opacity"):r},getFaceTransparent:function(n,k){var u=n.s(k+".transparent");return u==U?n.s("all.transparent"):u},getFaceReverseColor:function(g,d){return g.s(d+".reverse.color")||g.s("all.reverse.color")},getFaceReverseFlip:function(M,l){var A=M.s(l+".reverse.flip");return A==U?M.s("all.reverse.flip"):A},getFaceReverseCull:function(q,s){var i=q.s(s+".reverse.cull");return i==U?q.s("all.reverse.cull"):i},getTextureMap:function(){return this._2O},deleteTexture:function(f){var F=this,q=F._2O[f];q&&(delete F._2O[f],F.getGL().deleteTexture(q))},getTexture:function(l,o){if(!l)return U;var p=this,H=p.getGL(),L=p._2O[l];if(!L){var $=Kf(l);if($)if($.tagName){if($.dynamic)return Rj(H,$,p._1O);L=p._2O[l]=Rj(H,$)}else{var g=Sb($,o),I=sd($,o);if(g>=1&&I>=1){var d=Bj(g,I);return np(d,$,0,0,g,I,o,p),d.restore(),Rj(H,zr,p._1O)}}}return L},redraw:function(){this.iv()},validateImpl:function(){var L=this;if(L._lightChanged){L._lightChanged=!1;var A=[],j=[],d=[];L.dm().each(function(V){if(Mj(V)){var K=V.s("light.type");K===zq?A.push(V):K===Fc?j.push(V):K===Ad&&d.push(V)}}),(A.length!==L._59O.length||j.length!==L._spots.length||d.length!==L._dirs.length)&&xh(L),L._59O=A,L._spots=j,L._dirs=d}L._42(),L._1o.iv()},_42:function(i,K){var E=this;if(!E._35O&&(!Xh||hh(Xh))){var n,R;i&&(i instanceof yh?R=i:n=i);var I=E._canvas,$=E.getWidth(),T=E.getHeight(),H=E.getGL(),M=E._prg;if(H){if(K?i||kr(I,$,T,K):(K=E._devicePixelRatio||Yr,i||$===I.clientWidth&&T===I.clientHeight||kr(I,$,T,K)),H.viewport(0,0,$*K,T*K),E._81O=U,H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT),Xd(H,M.uBrightness,1),Xd(H,M.uOpacity,1),Xd(H,M.uPartOpacity,1),H._picking=!!i,Xd(H,M.uPick,!!i),Xd(H,M.uTexture,!1),Xd(H,M.uFix,!1),Xd(H,M.uTransparent,!1),Xd(H,M.uBatchColor,!1),Xd(H,M.uBatchBlend,!1),Xd(H,M.uBatchBrightness,!1),i||(Ol(E,H,M),E._fogDisabled||(Xd(H,M.uFogColor,E._fogColor),Xd(H,M.uFogNear,E._fogNear),Xd(H,M.uFogFar,E._fogFar))),hk(H,M.aPosition),hk(H,M.aNormal),Bd(H,M.aUv),Bd(H,M.aBatchColor),Bd(H,M.aBatchBlend),Bd(H,M.aBatchBrightness),Bd(H,M.aLineDistance),Xd(H,M.uPMatrix,ef(E)),Xd(H,M.uViewMatrix,Kn(E,E._7O)),R){var w=H.getParameter(H.COLOR_CLEAR_VALUE);H.clearColor(0,0,0,0),H.disable(H.BLEND),Bd(H,M.aNormal),mr(H,E._cube.vs,U,M.aPosition),dr(H,E._cube.is),Tm(R,E,nd,0),Tm(R,E,q,6),Tm(R,E,ib,12),Tm(R,E,Eg,18),Tm(R,E,ei,24),Tm(R,E,pd,30),hk(H,M.aNormal),Dn(H,w)}else if(n){n.value=2;var w=H.getParameter(H.COLOR_CLEAR_VALUE);H.clearColor(0,0,0,0),H.disable(H.BLEND),E._95I(H,M,n),uh(E,n),_n(E,E._polylineModelMap,n),_n(E,E._wireframeModelMap,n),Xd(H,M.uTransparent,!0),E._95I(H,M,n,!0),uh(E,n,!0),_n(E,E._polylineModelMap,n,!0),_n(E,E._wireframeModelMap,n,!0),Xd(H,M.uTransparent,!1),H.disable(H.DEPTH_TEST),E._30O._42(H,M,n),H.enable(H.DEPTH_TEST),Dn(H,w)}else H.disable(H.BLEND),E._31O._42(H,M),E._95I(H,M),uh(E),_n(E,E._polylineModelMap),_n(E,E._wireframeModelMap),H.enable(H.BLEND),H.depthMask(!1),Xd(H,M.uTransparent,!0),E._95I(H,M,U,!0),uh(E,U,!0),_n(E,E._polylineModelMap,U,!0),_n(E,E._wireframeModelMap,U,!0),Xd(H,M.uTransparent,!1),H.depthMask(!0),H.disable(H.BLEND),H.disable(H.DEPTH_TEST),E._32O._42(H,M),E._30O._42(H,M),H.enable(H.DEPTH_TEST);mr(H,U),dr(H,U),E._33Q=!1}}},_95I:function(X,p,y,k){var $=this,e=function(l){return k?l:!l};$.dm().each(function(d){if($.isVisible(d)&&(!R||n)){if(!y&&$.isTransparentMask(d))return;var D=$.getData3dUI(d);D&&D._42(X,p,y,e)}})},getLogicalPoint:function(Y){return Ah(Y,this._canvas)},getHitFaceInfo:function(P){P.target&&(P=this.lp(P));var f=this.getDataInfoAt(P);if(f){var b=this._1o.face(f.data,Vj(P.x,P.y));if(b)return{data:f.data,face:b}}return U},getDataAt:function(r){var w=this.getDataInfoAt(r);return w?w.data:U},getDataInfoAt:function(o,D){return o.target&&(o=this.lp(o)),this._1o.get(Vj(o.x,o.y,D),!0)},getDatasInRect:function(z){return this._1o.get(z)},setEditable:function(M){var t=this,n=t._editable;t._editable=M,this.fp(Fo,n,M)},isEditable:function(p){var M=this;return M._editable?Fm(p)?p.s("3d.editable")?M._editableFunc?M._editableFunc(p):!0:!1:!1:!1},isSelectable:function(n){return n.s("3d.selectable")&&this.sm().isSelectable(n)},isMovable:function(I){var m=this;return ns(I)&&I.getStyle(Dp)!==Sq?!1:I.s("3d.movable")?m._movableFunc?m._movableFunc(I):!0:!1},isSizeEditable:function(x){return Fm(x)?this._sizeEditableFunc?this._sizeEditableFunc(x):!0:!1},isRotationEditable:function(t){return Fm(t)&&t.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(t):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(n){this.setZoom(Nm,n)},zoomOut:function(t){this.setZoom(1/Nm,t)},setZoom:function(q,I){if(1!==q){var H=this;if(H._ortho)return H.setOrthoZoom(q,I),void 0;H._14o&&H._14o.stop(!0);var m=1/q,$=H._eye,K=H._center,O=K[0]+($[0]-K[0])*m-$[0],f=K[1]+($[1]-K[1])*m-$[1],Z=K[2]+($[2]-K[2])*m-$[2];if(!(Qh($,K)<H._moveStep&&1>m)){if(I=Pg(I)){var E=Ji($);return I.action=function(l){H.fi({kind:H._zooming?"betweenZoom":"beginZoom"}),H._zooming=1,$[0]=E[0]+O*l,$[1]=E[1]+f*l,$[2]=E[2]+Z*l,H.fp(Gm,U,$)},I._37o=function(){delete H._14o,delete H._zooming,H.fi({kind:"endZoom"}),H.onZoomEnded()},H._14o=Lc(I)}$[0]+=O,$[1]+=f,$[2]+=Z,H.fp(Gm,U,$)}}},setOrthoZoom:function(I,M){if(1!==I){var b=this;b._14o&&b._14o.stop(!0);var p=b._orthoWidth,t=p/I-p;if(!(p<b._moveStep&&I>1))return(M=Pg(M))?(M.action=function(I){b.fi({kind:b._zooming?"betweenZoom":"beginZoom"}),b._zooming=1,b.setOrthoWidth(p+t*I)},M._37o=function(){delete b._14o,delete b._zooming,b.fi({kind:"endZoom"}),b.onZoomEnded()},b._14o=Lc(M)):(b.setOrthoWidth(p/I),void 0)}},getPositionInfo:function(k){var x=this,r=x._eye,P=x._center,Y=x.getAspect(),R=k?$p(kd(P,r,!0),kd(k,r)):Qh(r,P);if(x._ortho){var s=x._orthoWidth;return{length:R,height:s/Y,width:s}}var S=2*F(x._fovy/2)*R;return{length:R,height:S,width:S*Y}},getCenterInfo:function(){var n=this;return n._81O||(n._81O=n.getPositionInfo()),Ji(n._81O)},rotate:function(j,i,C,P){var s=this;if(j||i){P==U&&(P=s._firstPersonMode),s._88O&&s._88O.stop(!0);var c=s._center,G=s._eye,K=s.getCenterInfo().length,T=P?c:G,R=P?G:c,m=kd(T,R),B=v(m[0],m[2]),Z=v(o(m[0]*m[0]+m[2]*m[2]),m[1]),y=P?cr:Gm;return P&&(i=-i),(C=Pg(C))?(C.action=function(p){s.fi({kind:s._rotating?"betweenRotate":"beginRotate"}),s._rotating=1;var F=B+j*p,q=Z+i*p;q=pi(q),m[0]=K*h(q)*h(F),m[1]=K*r(q),m[2]=K*h(q)*r(F),T[0]=R[0]+m[0],T[1]=R[1]+m[1],T[2]=R[2]+m[2],s.fp(y,U,T)},C._37o=function(){delete s._88O,delete s._rotating,s.fi({kind:"endRotate"}),s.onRotateEnded()},s._88O=Lc(C)):(B+=j,Z+=i,Z=pi(Z),m[0]=K*h(Z)*h(B),m[1]=K*r(Z),m[2]=K*h(Z)*r(B),T[0]=R[0]+m[0],T[1]=R[1]+m[1],T[2]=R[2]+m[2],s.fp(y,U,T),void 0)
}},pan:function(j,Z,k,h){if(j||Z){var H=this;h==U&&(h=H._firstPersonMode),H._89O&&H._89O.stop(!0);var d=Kn(H),l=[d[0]*j,d[4]*j,d[8]*j],Y=[d[1]*Z,d[5]*Z,d[9]*Z],f=l[0]+Y[0],b=l[1]+Y[1],O=l[2]+Y[2],n=H._center,R=H._eye;if(h){var M=Qo(H.getBoundaries(),R[0],R[2],R[0]+f,R[2]+O,o(f*f+O*O));f=M[0],O=M[1]}if(k=Pg(k)){var L=Ji(R),$=Ji(n);return k.action=function(N){H.fi({kind:H._panning?"betweenPan":"beginPan"}),H._panning=1,n[0]=$[0]+f*N,n[1]=$[1]+b*N,n[2]=$[2]+O*N,R[0]=L[0]+f*N,R[1]=L[1]+b*N,R[2]=L[2]+O*N,H.fp(Gm,U,R),H.fp(cr,U,n)},k._37o=function(){delete H._89O,delete H._panning,H.fi({kind:"endPan"}),H.onPanEnded()},H._89O=Lc(k)}n[0]+=f,n[1]+=b,n[2]+=O,R[0]+=f,R[1]+=b,R[2]+=O,H.fp(Gm,U,R),H.fp(cr,U,n)}},walk:function(W,X,z){if(W){var C=this;z==U&&(z=C._firstPersonMode),C._90O&&C._90O.stop(!0);var J=C._center,$=C._eye,V=kd(J,$,!0);if(z){var M=Qo(C.getBoundaries(),$[0],$[2],$[0]+V[0]*W,$[2]+V[2]*W,g(W));if(W=Qh(M),!W)return;V=[M[0]/W,0,M[1]/W]}if(X=Pg(X)){var D=Ji($),y=Ji(J);return X.action=function(k){C.fi({kind:C._walking?"betweenWalk":"beginWalk"}),C._walking=1;var H=W*k;$[0]=D[0]+V[0]*H,$[1]=D[1]+V[1]*H,$[2]=D[2]+V[2]*H,J[0]=y[0]+V[0]*H,J[1]=y[1]+V[1]*H,J[2]=y[2]+V[2]*H,C.fp(Gm,U,$),C.fp(cr,U,J)},X._37o=function(){delete C._90O,delete C._walking,C.fi({kind:"endWalk"}),C.onWalkEnded()},C._90O=Lc(X)}$[0]+=V[0]*W,$[1]+=V[1]*W,$[2]+=V[2]*W,J[0]+=V[0]*W,J[1]+=V[1]*W,J[2]+=V[2]*W,C.fp(Gm,U,$),C.fp(cr,U,J)}},handleScroll:function(J,h){J.preventDefault();var m=this,O=m._moveStep;m.isFirstPersonMode()?m.isPannable()&&m.pan(0,h>0?O:-O):m.isZoomable()&&m.setZoom(0>h?1/he:he)},handlePinch:function(W,j){this.isZoomable()&&this.setZoom(j>W?1/on:on)},reset:function(){this.setCenter(C.graph3dViewCenter),this.setEye(C.graph3dViewEye),this.setUp(C.graph3dViewUp)},moveSelection:function(v,_,F){var n,u=this,R=u.dm();R&&(n=R.getHistoryManager()),n&&n.beginInteraction(),fs(this.sm().toSelection(this.isMovable,this),v,_,F),n&&n.endInteraction()},getMoveMode:function(L,U){var G=U.s("3d.move.mode");if(G)return G;var e="88",w="89",Z="90";return ng(L)||Mq[e]&&Mq[w]&&Mq[Z]?"xyz":Mq[e]&&Mq[w]?"xy":Mq[e]&&Mq[Z]?"xz":Mq[w]&&Mq[Z]?"yz":Mq[e]?"x":Mq[w]?"y":Mq[Z]?"z":"xz"},handleTick:function(){var T=this,m=!1,f=T._moveStep,D=f,G=!1,k=!0,e=T._rotateStep*(k?-1:1);if(T.isWalkable()||(D=0),T.isPannable()||(f=0),T.isRotatable()||(e=0),T._32Q){var u=(vk()-T._32Q)/50;D*=u,f*=u,e*=u}T._31Q&&(bk(T._31Q),delete T._31Q,delete T._32Q),ul()&&(m=!0,T.pan(-f,0,G,k)),bo()&&(m=!0,T.pan(f,0,G,k)),ck()&&(m=!0,ng()?T.pan(0,f,G,k):T.walk(D,G,k)),of()&&(m=!0,ng()?T.pan(0,-f,G,k):T.walk(-D,G,k)),kn()&&(m=!0,T.rotate(-e,0,G,k)),Hf()&&(m=!0,T.rotate(e,0,G,k)),pb()&&(m=!0,T.rotate(0,-e/2,G,k)),Sf()&&(m=!0,T.rotate(0,e/2,G,k)),m&&(T._32Q=vk(),T._31Q=Fp(T.handleTick,T))},handleKeyDown:function(c){var q=this;!Op(c)&&Le[c.keyCode]?q.handleTick():Wi(c)?q.selectAll():Xr(c)?q.handleDelete(c):Jq(c)&&this.isResettable()&&q.reset()},checkDoubleClickOnNote:function(_,C,L){var H=this;if(L===yc){if(C.s("note.toggleable"))return C.s(pf,!C.s(pf)),H.fi({kind:"toggleNote",event:_,data:C,part:L}),!0}else if(L===Lr&&C.s("note2.toggleable"))return C.s(Gd,!C.s(Gd)),H.fi({kind:"toggleNote2",event:_,data:C,part:L}),!0;return!1},checkDoubleClickOnRotation:function(I,J,n){return n===mp?(J.setRotationX(0),!0):n===Rl?(J.setRotationY(0),!0):n===Ak?(J.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(o){var v=this,_=v.getWidth()/2,g=v.getHeight()/2,E=v._18Q;return E||(E=ef(v),v._18Q=kl(E,E,Kn(v))),o=qf([o[0],o[1],o[2],1],E),{x:_+_*o[0]/o[3],y:g-g*o[1]/o[3]}},getHitPosition:function(G,$,o){var Q=this,b=Q.getWidth(),L=Q.getHeight(),N=G.target?Q.lp(G):G,B=N.x-b/2,g=N.y-L/2,u=Q.getCenterInfo(),h=Kn(Q);$=$?$:[0,0,0],o=o?o:[0,1,0],B=B/b*u.width,g=-1*g/L*u.height;var T=[h[0]*B,h[4]*B,h[8]*B],f=[h[1]*g,h[5]*g,h[9]*g],i=[T[0]+f[0],T[1]+f[1],T[2]+f[2]],A=Q.getCenter(),M=wc(Q,$,o,[i[0]+A[0],i[1]+A[1],i[2]+A[2]]);return M?M:[0,0,0]},getLineLength:function(p){this.validate();var x=this.getData3dUI(p);if(x&&x.getCache){var d=x.getCache();if(d)return d[d.length-1].length}return 0},getLineOffset:function(G,h){this.validate();var p=this.getData3dUI(G);if(p&&p.getCache){var W=p.getCache();if(W)return fe(W,h)}return U}});var Ml=wi.Interactor=function(m){this.gv=m};mj("Interactor",O,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var tn=wi.DefaultInteractor=function(g){si(tn,this,[g])};mj("DefaultInteractor",Ml,{handle_contextmenu:function(p){cj(p)},handle_mousewheel:function(D){this.gv.handleScroll(D,D.wheelDelta/40)},handle_DOMMouseScroll:function(f){2===f.axis&&this.gv.handleScroll(f,-f.detail)},handle_keydown:function(m){this.gv.handleKeyDown(m)},handle_mousedown:function(D){this.handle_touchstart(D)},handle_touchstart:function(Z){cj(Z);var I=this,p=I.gv,T=cf(Z),X=p.getDataInfoAt(Z),a=X?X.data:U,j=X?X.part:U,v=p.sm(),c=Jj(Z),V=Nn(Z);p.setFocus(Z)&&(I._62O=U,I._57I=U,a?Op(Z)?v.co(a)?v.rs(a):v.as(a):v.co(a)||v.ss(a):T&&(Op(Z)?p.isRectSelectable()&&(I._62O=Vc):I._57I=yf(Z)),I._31Q&&(bk(I._31Q),delete I._31Q,delete I._32Q),I._62O||(p.isFirstPersonMode()&&(ng(Z)||V>2?I._62O="pan":p.isMouseRoamable()||K?(I._62O="roaming",I.foward=c&&cf(Z),I._32Q=vk(),I._31Q=Fp(I.tick,I)):T||(I._62O="roaming")),I._62O||(T&&c&&_g[j]?(I._62O=j,I.p3=a.p3()):T&&c&&Fm(a)&&p.isSelected(a)&&p.isMovable(a)?(I._62O="move",I.p3=a.p3(),I.movedata=a):K&&(V>2?I._62O="pan":2===V&&(I.dist=Rn(Z),I._62O="pinch")))),I.point=p.lp(Z),ds(I,Z),Bm(Z)?p.handleDoubleClick(Z,a,j):p.handleClick(Z,a,j))},tick:function(){var S=this,I=S.gv,p=I._moveStep;S.point&&I.isWalkable()&&(S._32Q&&(p*=(vk()-S._32Q)/50),I.walk(S.foward?p:-p),S._32Q=vk(),S._31Q=Fp(S.tick,S))},handle_mouseup:function(U){this.handle_touchend(U)},handle_touchend:function(l){var E=this._57I;E&&(Qh(E,yf(l))<=1&&this.gv.sm().cs(),this._57I=U)},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(V){var $,Y,U=this,b=U.gv,P=U._62O,X=U.point,e=b.dm(),A=e.getHistoryManager(),n=b.lp(V),f=n.x-X.x,E=n.y-X.y,o=-_*f/b.getWidth(),C=-_*E/b.getHeight();if("roaming"===P)U.rotate(V,o/2,C/2);else if(P===mp||P===Rl||P===Ak)A&&!b._86O&&A.beginInteraction(),b.fi({kind:b._86O?"betweenEditRotation":"beginEditRotation",event:V}),b._86O=1,b.sm().each(function(e){if(Fm(e)&&b.isRotationEditable(e)){var K=g(o)>g(C)?o:C;P===mp?e.setRotationX(e.getRotationX()+K):P===Rl?e.setRotationY(e.getRotationY()+K):P===Ak&&e.setRotationZ(e.getRotationZ()+K)}});else if("move"===P||_g[P]){P===Hd||P===Ud||P===Xb?(A&&!b._87O&&A.beginInteraction(),b.fi({kind:b._87O?"betweenEditSize":"beginEditSize",event:V}),b._87O=1):(A&&!b._moving&&A.beginInteraction(),b.fi({kind:b._moving?"betweenMove":"beginMove",event:V}),b._moving=1);var d,G=U.p3,T=b.getPositionInfo(G),L=Kn(b);d=P===Vf?"x":P===pq?"y":P===fg?"z":P===Hd?"sx":P===Ud?"sy":P===Xb?"sz":b.getMoveMode(V,U.movedata),f=f/b.getWidth()*T.width,E=-1*E/b.getHeight()*T.height;var u,O,w=[L[0]*f,L[4]*f,L[8]*f],p=[L[1]*E,L[5]*E,L[9]*E],Z=w[0]+p[0],l=w[1]+p[1],R=w[2]+p[2],z=[G[0]+Z,G[1]+l,G[2]+R],v=kd(b.getEye(),z,!0);if("xyz"===d?(u=z,b.moveSelection(Z,l,R)):"xz"===d?(u=wc(b,G,[0,1,0],z),u&&b.moveSelection(u[0]-G[0],0,u[2]-G[2])):"xy"===d?(u=wc(b,G,[0,0,1],z),u&&b.moveSelection(u[0]-G[0],u[1]-G[1],0)):"yz"===d?(u=wc(b,G,[1,0,0],z),u&&b.moveSelection(0,u[1]-G[1],u[2]-G[2])):"x"===d||"sx"===d?(v[0]=0,u=wc(b,G,v,z),u&&(O=u[0]-G[0],"x"===d?b.moveSelection(O,0,0):b.sm().each(function(N){Fm(N)&&b.isSizeEditable(N)&&($=W(rg,N.getWidth()+O),Y=$/N.getWidth(),N.setWidth($),ng(V)&&(N.setHeight(N.getHeight()*Y),N.setTall(N.getTall()*Y)))}))):"y"===d||"sy"===d?(v[1]=0,u=wc(b,G,v,z),u&&(O=u[1]-G[1],"y"===d?b.moveSelection(0,O,0):b.sm().each(function(r){Fm(r)&&b.isSizeEditable(r)&&($=W(rg,r.getTall()+O),Y=$/r.getTall(),r.setTall($),ng(V)&&(r.setHeight(r.getHeight()*Y),r.setWidth(r.getWidth()*Y)))}))):("z"===d||"sz"===d)&&(v[2]=0,u=wc(b,G,v,z),u&&(O=u[2]-G[2],"z"===d?b.moveSelection(0,0,O):b.sm().each(function(Q){Fm(Q)&&b.isSizeEditable(Q)&&($=W(rg,Q.getHeight()+O),Y=$/Q.getHeight(),Q.setHeight($),ng(V)&&(Q.setTall(Q.getTall()*Y),Q.setWidth(Q.getWidth()*Y)))}))),!u)return;U.p3=u}else if(P===Vc){var B=U.div;B||(B=U.div=xk(),sk(U.getView(),B),B.op=X,B.style.background=b.getRectSelectBackground()),b.fi({kind:b._rectSelecting?"betweenRectSelect":"beginRectSelect",event:V}),b._rectSelecting=1,B.rect=xd(B.op,n),bb(B,B.rect)}else if("pinch"===P&&2===Nn(V)){b.fi({kind:b._pinching?"betweenPinch":"beginPinch",event:V}),b._pinching=1;var O=Rn(V);b.handlePinch(O,U.dist),U.dist=O}else"pan"===P||ng(V)?U.pan(V,f,E):b.isFirstPersonMode()||(cf(V)?U.rotate(V,o,C):(U.pan(V,f,0),b.isWalkable()&&(b.fi({kind:b._walking?"betweenWalk":"beginWalk",event:V}),b._walking=1,b.walk(E/b.getHeight()*b.getCenterInfo().height))));U.point=n},pan:function(C,n,Q){var u=this.gv;if(u.isPannable()){var P=u.getCenterInfo(),M=n/u.getWidth()*P.width,D=-1*Q/u.getHeight()*P.height;u.fi({kind:u._panning?"betweenPan":"beginPan",event:C}),u._panning=1,u.pan(-M,-D)}},rotate:function(c,W,Y){var k=this.gv;k.isRotatable()&&(k.fi({kind:k._rotating?"betweenRotate":"beginRotate",event:c}),k._rotating=1,k.rotate(W,Y))},handleWindowMouseUp:function(C){this.handleWindowTouchEnd(C)},handleWindowTouchEnd:function(n){var H=this,k=H.gv,s=k.dm(),q=s.getHistoryManager(),m=H.div;if(m){var o=k.getDatasInRect(m.rect);if(!o.isEmpty()){var C=k.sm(),W=C.toSelection();o.each(function(K){C.co(K)?W.remove(K):W.add(K)}),C.ss(W)}xc(m)}k._moving&&(delete k._moving,k.fi({kind:"endMove",event:n}),k.onMoveEnded(),q&&q.endInteraction()),k._panning&&(delete k._panning,k.fi({kind:"endPan",event:n}),k.onPanEnded()),k._rotating&&(delete k._rotating,k.fi({kind:"endRotate",event:n}),k.onRotateEnded()),k._86O&&(delete k._86O,k.fi({kind:"endEditRotation",event:n}),q&&q.endInteraction()),k._87O&&(delete k._87O,k.fi({kind:"endEditSize",event:n}),q&&q.endInteraction()),k._pinching&&(delete k._pinching,k.fi({kind:"endPinch",event:n}),k.onPinchEnded()),k._rectSelecting&&(delete k._rectSelecting,k.fi({kind:"endRectSelect",event:n}),k.onRectSelectEnded()),k._walking&&(delete k._walking,k.fi({kind:"endWalk",event:n}),k.onWalkEnded()),H.dist=H.point=H._62O=H.p3=H.movedata=H.div=H._57I=H._32Q=H._31Q=H.foward=U}});var Vn=function(u){this.gv=u};ld(Vn,O,{_iv:!0,iv:function(){this._iv=!0},face:function(t,F){var P=this,B=P.gv.getGL();if(!B||!Fm(t))return U;var S=F.x,A=F.width,v=F.height,e=P.height-F.y-v,W=Z(A/2),C=new Uint8Array(4*A*v),R=0;for(P.iv(),P.validate(t),Po(B,P.frame),B.readPixels(S,e,A,v,B.RGBA,B.UNSIGNED_BYTE,C),Po(B,U),P.iv();W>=R;R++)for(var p=W-R,O=W+R,Q=p;O>=Q;Q++)for(var n=p;O>=n;n++)if(Q===p||Q===O||n===p||n===O){var i=Yi.m[C[4*(Q*A+n)]];if(i)return i}},get:function(b,N){this.validate();var P=this,h=P.gv.getGL();if(!h)return U;var z,B,Q=b.x,$=b.width,w=b.height,D=P.height-b.y-w,E=Z($/2),o=new Uint8Array(4*$*w),m=0,p=o.length,k=N?U:new rn,T=N?U:{};if(Po(h,P.frame),h.readPixels(Q,D,$,w,h.RGBA,h.UNSIGNED_BYTE,o),Po(h,U),N){for(;E>=m;m++)for(var _=E-m,f=E+m,S=_;f>=S;S++)for(var M=_;f>=M;M++)if((S===_||S===f||M===_||M===f)&&(z=P.info(o,4*(S*$+M))))return z}else for(;p>m;m+=4)z=P.info(o,m),z&&(B=z.data,T[B._id]||(k.add(B),T[B._id]=B));return k},info:function(c,l){return this.colorMap[(c[l]<<24)+(c[l+1]<<16)+(c[l+2]<<8)+c[l+3]]},validate:function(v){var B=this,s=B.gv,y=s.getGL();if(y){var Q=s.getWidth(),E=s.getHeight(),n=y.RGBA,Z=y.TEXTURE_2D,f=y.RENDERBUFFER,M=y.FRAMEBUFFER;B.texture||(B.texture=Rj(y),B.render=y.createRenderbuffer(),B.frame=y.createFramebuffer()),(B.width!==Q||B.height!==E)&&(Ap(y,B.texture),y.texImage2D(Z,0,n,Q,E,0,n,y.UNSIGNED_BYTE,U),Ub(y,y.TEXTURE_MIN_FILTER,y.LINEAR),y.bindRenderbuffer(f,B.render),y.renderbufferStorage(f,y.DEPTH_COMPONENT16,Q,E),Po(y,B.frame),y.framebufferTexture2D(M,y.COLOR_ATTACHMENT0,Z,B.texture,0),y.framebufferRenderbuffer(M,y.DEPTH_ATTACHMENT,f,B.render),Ap(y,U),y.bindRenderbuffer(f,U),Po(y,U),B.width=Q,B.height=E),B._iv&&(B._iv=!1,Po(y,B.frame),s._42(v||(B.colorMap={}),1),Po(y,U))}}});var ym=function(Q){this.gv=Q};ld(ym,O,{gap:0,size:0,_42:function(u,Y){var A=this,g=A.gv,b=g._gridGap,j=g._gridSize;if(g._gridVisible){if(A.gap!==b||A.size!==j){for(var B=[],W=g._gridSize/2,S=b*W,r=0;2*W+1>r;r++){var X=6*r,F=6*(2*W+1)+X;B[X]=-S,B[X+1]=0,B[X+2]=-S+r*b,B[X+3]=S,B[X+4]=0,B[X+5]=-S+r*b,B[F]=-S+r*b,B[F+1]=0,B[F+2]=-S,B[F+3]=-S+r*b,B[F+4]=0,B[F+5]=S}A.vs=new sp(B),A.gap=b,A.size=j}xr(g),Bg(u,Y),fh(u),yr(u,Y,1,g._gridColor,g._buffer.vs,A.vs),ih(u,0,A.vs.length/3,u.LINES),Oi(u),hp(u,Y)}else A.vs=A.gap=A.size=U}});var Qq=function(N){this.gv=N};ld(Qq,O,{_42:function(A,N){var H=this.gv,J=H._buffer.vs,u=H._axisXColor,b=H._axisYColor,T=H._axisZColor,Z=H._originAxisVisible,O=H._centerAxisVisible;if(Z||O){var L=X?A.TRIANGLES:A.TRIANGLE_FAN,P=A.LINES;if(xr(H),Bg(A,N),fh(A),Z){var c=H.getCenterInfo(),y=Y(c.width,c.height)/5,r=.8*y,B=.05*y;yr(A,N,1.5,u,J,new sp([0,0,0,y,0,0,r,B,0,r,0,B,r,-B,0,r,0,-B,r,B,0,0,0,0,0,y,0,B,r,0,0,r,B,-B,r,0,0,r,-B,B,r,0,0,0,0,0,0,y,B,0,r,0,B,r,-B,0,r,0,-B,r,B,0,r])),ih(A,0,2,P),ih(A,1,6,L),yr(A,N,U,b),ih(A,7,2,P),ih(A,8,6,L),yr(A,N,U,T),ih(A,14,2,P),ih(A,15,6,L)}if(O){var M=H._center,S=M[0],I=M[1],V=M[2],c=H.getPositionInfo(M);y=Y(c.width,c.height)/20,yr(A,N,1.5,u,J,new sp([S,I,V,S+y,I,V,S,I,V,S,I+y,V,S,I,V,S,I,V+y])),ih(A,0,2,P),yr(A,N,U,b),ih(A,2,2,P),yr(A,N,U,T),ih(A,4,2,P)}Oi(A),hp(A,N)}}});var yl=function(U){this.gv=U},Vf="edit_tx",pq="edit_ty",fg="edit_tz",mp="edit_rx",Rl="edit_ry",Ak="edit_rz",Hd="edit_sx",Ud="edit_sy",Xb="edit_sz",_g={};_g[Vf]=1,_g[pq]=1,_g[fg]=1,_g[mp]=1,_g[Rl]=1,_g[Ak]=1,_g[Hd]=1,_g[Ud]=1,_g[Xb]=1,ld(yl,O,{_42:function(o,G,e){var r=this,D=r.gv,_=D.sm().ld();if(D.isEditable(_)&&Fm(_)&&(!D.isFirstPersonMode()||!D.isMouseRoamable()&&!K)){xr(D);var Z,J,z=D.isMovable(_),t=D.isRotationEditable(_),g=D.isSizeEditable(_),M=D._axisXColor,I=D._axisYColor,v=D._axisZColor,n=D._editSizeColor,h=D.getCenterInfo(),w=Y(h.width,h.height)/10,F=w/(e?5:10),y=.7*w,R=.4*y,c=_.p3(),b=c[0],W=c[1],q=c[2];Z=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],z&&r._17O(o,G,_,e,Vf,M,Z,[b,W-F,q,b+y,W-F,q,b+y,W,q,b+y,W,q,b,W,q,b,W-F,q,b,W-F,q+F,b+y,W-F,q+F,b+y,W-F,q,b+y,W-F,q,b,W-F,q,b,W-F,q+F]),J=b+y,g&&r._17O(o,G,_,e,Hd,n,Z,[J,W-F,q,J+R,W-F,q,J+R,W,q,J+R,W,q,J,W,q,J,W-F,q,J,W-F,q+F,J+R,W-F,q+F,J+R,W-F,q,J+R,W-F,q,J,W-F,q,J,W-F,q+F]),J+=R,t&&r._17O(o,G,_,e,mp,M,Z,[J,W-F,q,J+R,W-F,q,J+R,W,q,J+R,W,q,J,W,q,J,W-F,q,J,W-F,q+F,J+R,W-F,q+F,J+R,W-F,q,J+R,W-F,q,J,W-F,q,J,W-F,q+F]),Z=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],z&&r._17O(o,G,_,e,pq,I,Z,[b,W,q,b,W+y,q,b-F,W+y,q,b-F,W+y,q,b-F,W,q,b,W,q,b,W,q,b,W,q-F,b,W+y,q-F,b,W+y,q-F,b,W+y,q,b,W,q]),J=W+y,g&&r._17O(o,G,_,e,Ud,n,Z,[b,J,q,b,J+R,q,b-F,J+R,q,b-F,J+R,q,b-F,J,q,b,J,q,b,J,q,b,J,q-F,b,J+R,q-F,b,J+R,q-F,b,J+R,q,b,J,q]),J+=R,t&&r._17O(o,G,_,e,Rl,I,Z,[b,J,q,b,J+R,q,b-F,J+R,q,b-F,J+R,q,b-F,J,q,b,J,q,b,J,q,b,J,q-F,b,J+R,q-F,b,J+R,q-F,b,J+R,q,b,J,q]),Z=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],z&&r._17O(o,G,_,e,fg,v,Z,[b,W,q,b,W,q+y,b,W-F,q+y,b,W-F,q+y,b,W-F,q,b,W,q,b,W-F,q,b-F,W-F,q,b-F,W-F,q+y,b-F,W-F,q+y,b,W-F,q+y,b,W-F,q]),J=q+y,g&&r._17O(o,G,_,e,Xb,n,Z,[b,W,J,b,W,J+R,b,W-F,J+R,b,W-F,J+R,b,W-F,J,b,W,J,b,W-F,J,b-F,W-F,J,b-F,W-F,J+R,b-F,W-F,J+R,b,W-F,J+R,b,W-F,J]),J+=R,t&&r._17O(o,G,_,e,Ak,v,Z,[b,W,J,b,W,J+R,b,W-F,J+R,b,W-F,J+R,b,W-F,J,b,W,J,b,W-F,J,b-F,W-F,J,b-F,W-F,J+R,b-F,W-F,J+R,b,W-F,J+R,b,W-F,J])}},_17O:function(B,b,g,n,e,a,l,m){var H=this.gv._buffer;ub(B,b,n,!0,g,e),gj(B,b,U,!0,U,!0,U,!1),Xd(B,b.uDiffuse,a),mr(B,H.vs,new sp(m),b.aPosition),mr(B,H.ns,new sp(l),b.aNormal),fh(B),ih(B,0,12),Oi(B),Rd(B,b)}});var sj=function(M,Z){this.gv=M,this.s=function(q,u,r){return u==U&&(u=r),u==U?Z.getStyle(q):un(u,Z,M)},this.data=Z};ld(sj,O,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(d,J,j,K){var q,k,x,m,z,W,$,_=this,B=_.gv,y=_.data,D=y._id,N=_.s("batch"),l=B._34O,b=B._33O,V=B.isSelectable(y),f=B.getBrightness(y),C=f!=U&&1!==f;if(_._iv){if(x=Om(l,b,y,N),_.validate(x,N?Ch[N]||Wo:U),x&&(m=l[D],z=m.size=x.vs.length/3-m.begin,$=x.rs))for(f=C?f:1,W=0;z>W;W++)$.push(f);if(Fm(y)){var g=B.getWireframe(y);g&&qe(B,y,g)}_.labelInfo=_.label2Info=_.noteInfo=_.note2Info=_._38o=U,_._24O(Cl,"getLabel"),_._24O(Zp,"getLabel2"),_._26O(yc,"getNote"),_._26O(Lr,"getNote2"),_._15O(),_._iv=!1}C&&Xd(d,J.uBrightness,f),k=ub(d,J,j,V,y,Dh),k&&(In(k,l[D],b),In(k,B._polylineIndexMap[D],B._polylineModelMap),In(k,B._wireframeIndexMap[D],B._wireframeModelMap)),l[D]||_._80o(d,J,K),(q=_.labelInfo)&&(ub(d,J,j,V,y,Cl),_._28O(q,Cl,K)),(q=_.label2Info)&&(ub(d,J,j,V,y,Zp),_._28O(q,Zp,K)),(q=_.noteInfo)&&(ub(d,J,j,V,y,yc),_._29O(q,yc,K)),(q=_.note2Info)&&(ub(d,J,j,V,y,Lr),_._29O(q,Lr,K)),(q=_._38o)&&_._99O(d,J,q,j,V,K),C&&Xd(d,J.uBrightness,1)},validate:function(){},_16O:function(){return Rp},_80o:function(){},dispose:function(){},getBodyColor:function(Q){var g=this.data,T=this.gv.getBodyColor(g);return T?T:Q?g.getStyle(Q):U},_24O:function(M,D){var $=this,s=$.data,f=$.gv,r=$.s,c=f[D](s);if(c!=U){var t=r(M+".scale"),w=r(M+".max"),y=$[M+"Info"]={label:c,textureScale:r(M+".texture.scale"),color:f[D+"Color"](s),font:r(M+".font"),align:r(M+".align"),background:f[D+"Background"](s)},z=y.rect=Fg(y,c);w>0&&w<z.width&&(y.labelWidth=z.width,z.width=w),z.x=z.y=0,z.width*=t,z.height*=t,y.mat=$._16O(r(M+".autorotate"),r(M+".position"),z,r(M+".face"),r(M+".t3"),r(M+".r3"),r(M+".rotationMode"));var G=z.width/2,Y=z.height/2;y.vs=new sp([-G,Y,0,-G,-Y,0,G,-Y,0,G,Y,0]),z.width/=t,z.height/=t}},_26O:function(i,X){var $=this,B=$.data,A=$.gv,o=$.s,h=A[X](B);if(h!=U){var G=o(i+".scale"),y=this[i+"Info"]={note:h,textureScale:o(i+".texture.scale"),expanded:o(i+".expanded"),font:o(i+".font"),color:o(i+".color"),align:o(i+".align"),borderWidth:o(i+".border.width"),borderColor:o(i+".border.color"),background:A[X+"Background"](B)};if(y.expanded){var g=o(i+".max"),_=Fg(y,h);_.width+=6,_.height+=2,g>0&&g<_.width&&(y.labelWidth=_.width,_.width=g);var m={x:-_.width/2,y:-8-_.height,width:_.width,height:_.height+8}}else m={x:-6,y:-18,width:12,height:18};y.mat=$._16O(o(i+".autorotate"),o(i+".position"),U,o(i+".face"),o(i+".t3"),o(i+".r3"),o(i+".rotationMode")),y.rect=m,1!==G&&(m=Ji(m),m.x*=G,m.height*=G,m.y=-m.height,m.width*=G);var E=m.x,x=m.y,f=m.width,F=m.height;y.vs=new sp([E,-x,0,E,-x-F,0,E+f,-x-F,0,E+f,-x,0])}},_28O:function(O,d,l){if(l(this.s(d+".transparent"))){var u=O.rect,S=O.textureScale,U=u.width*S,m=u.height*S;if(U>=1&&m>=1){var k=Bj(U,m);1!==S&&(k.translate(k,u.x,u.y),k.scale(S,S),k.translate(k,-u.x,-u.y)),Mn(k,O),k.restore(),Kd(this,d,O.mat,O.vs,!0)}}},_29O:function(B,E,h){if(h(this.s(E+".transparent"))){var V=B.rect,O=B.textureScale,J=V.x,C=V.y,P=V.width*O,M=V.height*O;if(P>=1&&M>=1){V.x=V.y=0;var I=Bj(P,M);1!==O&&I.scale(O,O),Jh(I,B),I.restore(),V.x=J,V.y=C,Kd(this,E,B.mat,B.vs,!1)}}},_99O:function(s,q,$,B,r,P){if($){var d=this,g=d.gv,e=d.data,x=g._buffer,c=g._1O,v=$.icons;for(var h in v){var N=v[h],m=$.rects[h];if(m&&P(un(N.transparent,e,g))){ub(s,q,B,r,e,h);var M=un(N.shape3d,e,g),O=M?[M]:un(N.names,e,g),F=O?O.length:0,D=un(N.textureScale,e,g)||1,p=un(N.light,e,g);p==U&&(p=M?!0:!1),gj(s,q,un(N.blend,e,g),p,un(N.opacity,e,g),un(N.reverseFlip,e,g),un(N.reverseColor,e,g),un(N.reverseCull,e,g));for(var k=0;F>k;k++){var y=O[k],J=m[k];if(Lm(d,J.mat),M)ne(g,e,Se(d.s,M),d.s);else{var S=Kf(y);if(S){var z=J.width*D,W=J.height*D;if(z>=1&&W>=1){var j=Bj(z,W);Wc(j,S,un(N.stretch,e,g),0,0,z,W,e,g),j.restore(),Rj(s,zr,c),fh(s,q,c,un(N.discardSelectable,e,g),x.uv,Am),mr(s,x.vs,J.vs,q.aPosition),mr(s,x.ns,Nq,q.aNormal),dr(s,x.is,Gl),bc(s,0,Gl.length),Oi(s,q,c)}}}Gr(g)}Rd(s,q)}}}}});var $f=function($,H){si($f,this,[$,H])};ld($f,sj,{_16O:function(h,H,m,l,L,W,g,e,w){var Q=this.data,n=Ek(H,Q.s3(),m,l,e,w);return Rk(pn(),n,Q.p3(),l,L,W,g,h,Q.r3(),Q.getRotationMode())},clear:function(){var A=this;A.faceMat=A.mat=A.shapeModel=A.left=A.right=A.front=A.back=A.top=A.bottom=A.csg=U},validate:function(d,s){var m=this,h=m.gv,n=m.data,R=Se(m.s),A=As(n,h.getMat(n),R?m.s("shape3d.scaleable"):!0);if(m.clear(),d){var D=[];R?Vl(h,n,R,m.s,m.getBodyColor(),[A],d,D):(qm(h,n,d,s,A,nd,D,$r),qm(h,n,d,s,A,ib,D,Ge),qm(h,n,d,s,A,ei,D,Ce),qm(h,n,d,s,A,pd,D,_b),qm(h,n,d,s,A,q,D,ke),qm(h,n,d,s,A,Eg,D,vr)),D.length&&(_j(d.vs,D),_j(d.ns,Al(D)))}else m.mat=A,(m.shapeModel=R)||(m.vf(nd),m.vf(ib),m.vf(q),m.vf(Eg),m.vf(ei),m.vf(pd))},vf:function(O){var R=this;if(R.gv.getFaceVisible(R.data,O)){var f=zm(R,O);return f.mat&&(R.faceMat=!0),f}},_80o:function(v,H,$){var d=this,Y=d.gv,Q=d.data,s=Y._cube,E=d.shapeModel;xr(Y,d.mat),E?ne(Y,Q,E,d.s,d.getBodyColor(),$):(mr(v,s.vs,U,H.aPosition),mr(v,s.ns,U,H.aNormal),dr(v,s.is),d._18O(v,H,d.left,0,$),d._18O(v,H,d.front,6,$),d._18O(v,H,d.right,12,$),d._18O(v,H,d.back,18,$),d._18O(v,H,d.top,24,$),d._18O(v,H,d.bottom,30,$)),Gr(Y),d.faceMat&&(d._18O(v,H,d.left,0,$,!0),d._18O(v,H,d.front,6,$,!0),d._18O(v,H,d.right,12,$,!0),d._18O(v,H,d.back,18,$,!0),d._18O(v,H,d.top,24,$,!0),d._18O(v,H,d.bottom,30,$,!0))},_18O:function($,m,G,c,D,I){if(G){if(!D(G.transparent))return;if(I&&!G.mat||!I&&G.mat)return;I&&xr(this.gv,G.mat);var F=this,A=F.data,s=F.gv,g=s.getTexture(G.texture,A),L=G.uv,C=G.uvScale,n=G.uvOffset,l=G.discardSelectable;if(g)if(L){for(var o=8*(c/6),J=0;8>J;J++)lk[o+J]=L[J];fh($,m,g,l,s._buffer.uv,lk,n,C)}else fh($,m,g,l,s._cube.uv,U,n,C);else fh($);gj($,m,G.blend,G.light,G.opacity,G.reverseFlip,G.reverseColor,G.reverseCull),Xd($,m.uDiffuse,G.color),bc($,c,6),Rd($,m),Oi($,m,g),I&&Gr(s)}}});var tj=function(o,W){si(tj,this,[o,W])};ld(tj,sj,{_25Q:1,validate:function(O){var R=this,s=R.gv,_=R.data,H=R.s,Q=H("edge.width"),i=_._40I,z=_._41I;if(R.shapeModel=R.info=U,i&&z){var c,G,Z,b,r,M,o,n,I,V,d=_.isLooped(),L=H(Dp),h=C.getEdgeType(L);if(h){var e=h(_,ig(R,s,_,d,L),s,R._19Q);if(!e.points||e.points.isEmpty())return;M=R.info={},o=e.segments,r=e.points,n=r.size();for(var T=i.getElevation(),P=z.getElevation(),N=0;n>N;N++){var u=r.get(N);u.e==U&&(u.e=T+(P-T)*N/(n-1))}I=eq(r.get(0)),V=eq(r.get(n-1));var j=n%2;0===j?(M.c1=eq(r.get(n/2-1)),M.c2=eq(r.get(n/2))):M.p3=eq(r.get((n-j)/2)),M.s1=I,M.s2=eq(r.get(1)),M.t1=eq(r.get(n-2)),M.t2=V}else{r=new rn,M=R.info={};var D=H("edge.offset"),p=H("edge.center"),J=H("edge.source.t3"),x=H("edge.target.t3"),K=i.p3(),X=z.p3();if(J&&(K[0]+=J[0],K[1]+=J[1],K[2]+=J[2]),x&&(X[0]+=x[0],X[1]+=x[1],X[2]+=x[2]),L===Sq){o=H("edge.segments");var k=M.points=H(lp)||po;if(n=k.size()){I=eq(k.get(0)),V=eq(k.get(n-1)),!p&&D&&(Z=kd(I,K,!0),D=Y(D,Qh(K,I)),K=[K[0]+Z[0]*D,K[1]+Z[1]*D,K[2]+Z[2]*D],Z=kd(X,V,!0),D=Y(D,Qh(V,X)),X=[X[0]-Z[0]*D,X[1]-Z[1]*D,X[2]-Z[2]*D]);var j=n%2;0===j?(c=eq(k.get(n/2-1)),G=eq(k.get(n/2))):M.p3=eq(k.get((n-j)/2)),M.s1=K,M.s2=I,M.t1=V,M.t2=X}else!p&&D&&(Z=kd(X,K,!0),b=Qh(K,X),D=ph(D,b),K=[K[0]+Z[0]*D,K[1]+Z[1]*D,K[2]+Z[2]*D],X=[X[0]-Z[0]*D,X[1]-Z[1]*D,X[2]-Z[2]*D]),c=K,G=X;r.add({x:K[0],y:K[2],e:K[1]}),r.addAll(k),r.add({x:X[0],y:X[2],e:X[1]})}else{var l=ig(R,s,_,d,L);if(R._19Q||(l=-l),d){var B=K[0],v=K[1],m=K[2],f=i.getTall()/2+l;c=[B-l,v+f,m],G=[B+l,v+f,m],r.add({x:B-l,y:m,e:v}),r.add({x:B-l,y:m,e:v+f}),r.add({x:B+l,y:m,e:v+f}),r.add({x:B+l,y:m,e:v})}else{Z=kd(X,K,!0),b=Qh(K,X);var a={x:K[0],y:K[2]},q={x:X[0],y:X[2]},y=Wg(U,a,q,l),A=y.x-a.x,W=y.y-a.y;D=ph(D,b),Z[0]*=D,Z[1]*=D,Z[2]*=D,c=[K[0]+Z[0]+A,K[1]+Z[1],K[2]+Z[2]+W],G=[X[0]-Z[0]+A,X[1]-Z[1],X[2]-Z[2]+W],p?(r.add({x:K[0],y:K[2],e:K[1]}),r.add({x:c[0],y:c[2],e:c[1]}),r.add({x:G[0],y:G[2],e:G[1]}),r.add({x:X[0],y:X[2],e:X[1]})):(r.add({x:c[0],y:c[2],e:c[1]}),r.add({x:G[0],y:G[2],e:G[1]}))}}M.c1=c,M.c2=G}M.list=H(tc)===fb?R.createTubeModel(r,o,Q/2,O):R.createLineModel(r,o,Q,"edge","edge.dash")}}});var ag=function(b,A){si(ag,this,[b,A])};ld(ag,$f,{_80o:function(a,r,N){var f=this,e=f.gv,g=f.shapeModel;xr(e,f.mat),g?ne(e,f.data,g,f.s,f.getBodyColor(),N):(Mc(f,a,r,f.left,N),Mc(f,a,r,f.front,N),Mc(f,a,r,f.right,N),Mc(f,a,r,f.back,N),Mc(f,a,r,f.top,N),Mc(f,a,r,f.bottom,N)),Gr(e)},validate:function(h,y){var Q,r,A=this,J=A.s,j=A.data,D=j.p3(),f=j._thickness/2,N=j.isClosePath(),I=j.getPoints(),c=j.getSegments(),E=J(Xl),P=h&&h.uv;if(A.clear(),0>f)r=A.shapeModel=Ef(I,c,J(qp),J(th),E,J(jj),j.getTall(),j.getElevation(),N),J(oh)?J("shape3d.image")||delete r.uv:(delete r.vs,delete r.ns,delete r.uv),J("shape3d.top.image")||delete r.top_uv,J("shape3d.bottom.image")||delete r.bottom_uv;else if(J(tc)===fb)Q=qq(I,c,E,N),r=A.shapeModel={vs:[]},J("shape3d.image")&&(r.uv=[],r.sum=J(jj)||Gq(Q)||1,r.len=0),J(qp)&&!N&&(r.top_vs=[],J("shape3d.top.image")&&(r.top_uv=[])),J(th)&&!N&&(r.bottom_vs=[],J("shape3d.bottom.image")&&(r.bottom_uv=[])),A._12O(Q,f);else{var i,K,p,z,V,R,b,d,g,x;Q=qq(I,c,E,N),V=A.vf(q,P,!1,y),f&&(R=A.vf(Eg,P,!1,y),b=N?U:A.vf(nd,P,!1,y),d=N?U:A.vf(ib,P,!1,y),g=A.vf(ei,P,!1,y),x=A.vf(pd,P,!1,y)),f?A._12O(Q,f):V&&Q.forEach(function(J){if(z=J.length,z>0)for(i=J[0],p=1;z>p;p++)K=J[p],A.addV(V.vs,i,K),i=K}),A._20Q(Q),h||(V&&(V.ns=Al(V.vs),kf(V,"vs"),kf(V,$d)),f&&(R&&(R.ns=Al(R.vs),kf(R,"vs"),kf(R,$d)),b&&(b.ns=Al(b.vs),kf(b,"vs"),kf(b,$d)),d&&(d.ns=Al(d.vs),kf(d,"vs"),kf(d,$d)),g&&(g.ns=Al(g.vs),kf(g,"vs"),kf(g,$d)),x&&(x.ns=Al(x.vs),kf(x,"vs"),kf(x,$d))))}var o=A.mat=pn();nr(o,D),qd(o,j.r3(),j.getRotationMode()),nr(o,Zm(D)),h&&(Jr(A,o,h,r),A.clear())},_20Q:function(X){var x,Z,K,G,w,k,n,N=this,d=N.front,i=N.back,h=N.top,R=N.bottom,L=d?d.tuv:U,l=i?i.tuv:U,o=h?h.tuv:U,Q=R?R.tuv:U,C=0;(L||l||o||Q)&&(x=N.s(jj)||Gq(X)||1,X.forEach(function($){if(Z=$.length,Z>0)for(k=$[0],K=1;Z>K;K++)n=$[K],G=C/x,C+=Qh(k,n),w=C/x,N._14O(d,G,w),N._14O(i,1-w,1-G),N._14O(h,G,w),N._14O(R,G,w),k=n}))},_14O:function(R,J,t){if(R){var N=R.uv,H=R.tuv;if(H){if(N)var G=N[0]+(N[6]-N[0])*J,W=N[1]+(N[7]-N[1])*J,u=N[2]+(N[4]-N[2])*J,Z=N[3]+(N[5]-N[3])*J,C=N[2]+(N[4]-N[2])*t,M=N[3]+(N[5]-N[3])*t,Y=N[0]+(N[6]-N[0])*t,g=N[1]+(N[7]-N[1])*t;else G=J,W=0,u=J,Z=1,C=t,M=1,Y=t,g=0;H.push(u,Z,C,M,Y,g,Y,g,G,W,u,Z)}}},_13O:function(f){var F=f.uv,K=f.tuv;K&&(F?K.push(F[2],F[3],F[4],F[5],F[6],F[7],F[6],F[7],F[0],F[1],F[2],F[3]):K.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(d,W){var w,e,J,R,E,T=this;d.forEach(function(S){if(E=S.length,E>0)for(w={p:S[0],n:!0},R=1;E>R;R++)e=S[R],J=E-1>R?S[R+1]:U,T.addPoint(w,e,J,W,S)})},addPoint:function($,E,L,p,y){var d,e,b,T,j,w,u,F,X,S=this,h=$.p,W=$.f,H=$.b,f=S.s("shape3d.side")||yq,g=S.s("shape3d.start.angle"),a=S.shapeModel,o=S.data.isClosePath();if($.n&&($.n=!1,W=o&&y.length>2?Wg(y[y.length-2],h,E,p):Wg(U,h,E,p),H=je(h,W),a?a.top_vs&&S._10O(H,W,f,g,a.top_vs,a.top_uv):(d=S.left)&&(S.addV(d.vs,H,W),S._13O(d))),e=L?Wg(h,E,L,p):o&&y.length>2?Wg(h,E,y[1],p):Wg(h,E,U,p),b=je(E,e),a){var O,c,s=a.vs,I=a.uv,Y=a.sum;for(I&&(O=a.len/Y,a.len+=Qh(h,E),c=a.len/Y),w=S._9O(H,W,f,g),u=S._9O(b,e,f,g),F=0;f>F;F++)X=F+1,_j(s,w[X]),_j(s,u[F]),_j(s,w[F]),_j(s,u[F]),_j(s,w[X]),_j(s,u[X]),I&&(T=F/f,j=X/f,I.push(O,j,c,T,O,T,c,T,O,j,c,j));!L&&a.bottom_vs&&S._10O(b,e,f,g,a.bottom_vs,a.bottom_uv,!0)}else!L&&(d=S.right)&&(S.addV(d.vs,e,b),S._13O(d)),(d=S.front)&&S.addV(d.vs,W,e),(d=S.back)&&S.addV(d.vs,b,H),(d=S.top)&&S.addH(d.vs,W,e,b,H,!0),(d=S.bottom)&&S.addH(d.vs,H,b,e,W);$.p=E,$.f=e,$.b=b},_10O:function(T,c,A,L,b,G,B){var w,C,m=this,t=m.data,W=m._9O(T,c,A,L),F=(T.x+c.x)/2,P=(T.y+c.y)/2,U=t.getElevation(),p=0;for(p=0;A>p;p++)B?(_j(b,W[p]),_j(b,W[p+1])):(_j(b,W[p+1]),_j(b,W[p])),_j(b,[F,U,P]),G&&(B?(w=_*(p+1)/A+L,C=_*p/A+L):(w=_*p/A+L,C=_*(p+1)/A+L),G.push(.5-.5*r(C),.5-.5*h(C),.5-.5*r(w),.5-.5*h(w),.5,.5))},_9O:function(k,I,l,B){for(var Q,f,c=this,a=c.data,T=[],G=(k.x+I.x)/2,m=(k.y+I.y)/2,t=a.getTall()/2,j=a.getElevation(),z=0;l>=z;z++)Q=_*z/l+B,f=r(Q),T.push([G+(k.x-G)*f,j+t*h(Q),m+(k.y-m)*f]);return T},addV:function(x,c,T){var X=c.x,M=c.y,s=T.x,u=T.y,C=this.data,W=C.getElevation(),R=C.getTall()/2;x.push(X,W-R,M,s,W-R,u,s,W+R,u,s,W+R,u,X,W+R,M,X,W-R,M)},addH:function(A,q,N,Y,w,K){var C=this.data,G=C.getTall()/2,B=C.getElevation()+(K?G:-G);A.push(q.x,B,q.y,N.x,B,N.y,Y.x,B,Y.y,Y.x,B,Y.y,w.x,B,w.y,q.x,B,q.y)},vf:function(N,h,z,Y){var e,P=this,m=P.gv.getFaceVisible(P.data,N);return(z||m)&&(e=zm(P,N,Y),e.vs=[],e.tuv=m&&(e.texture||h)?[]:U,e.visible=m),e}});var ho=function(z,R){si(ho,this,[z,R])};ld(ho,sj,{_25Q:1,validate:function(G){var y=this,n=y.data,A=y.s,u=n.getPoints(),Q=u.size();if(y.shapeModel=y.info=U,Q>1){var F=y.info={},E=n.getSegments(),d=n.getThickness(),O=eq(u.get(0)),W=eq(u.get(Q-1)),L=Q%2;0===L?(F.c1=eq(u.get(Q/2-1)),F.c2=eq(u.get(Q/2))):F.p3=eq(u.get((Q-L)/2)),F.s1=O,F.s2=eq(u.get(1)),F.t1=eq(u.get(Q-2)),F.t2=W,F.list=A(tc)===fb?y.createTubeModel(u,E,d/2,G):y.createLineModel(u,E,d,"shape.border","shape.dash")}}}),pr(C,{accordionViewExpandIcon:ps(Rh),accordionViewCollapseIcon:ps(Rh,!0),accordionViewLabelColor:Hc,accordionViewLabelFont:fc,accordionViewTitleBackground:ip,accordionViewSelectBackground:_d,accordionViewSelectWidth:3,accordionViewSeparatorColor:H,splitViewDividerSize:1,splitViewDividerBackground:ip,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:jb,rect:[2,2,12,12],background:Rh}]},propertyViewLabelColor:fj,propertyViewLabelSelectColor:Hc,propertyViewLabelFont:fc,propertyViewExpandIcon:ps(me),propertyViewCollapseIcon:ps(me,!0),propertyViewBackground:gb,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:gl,propertyViewColumnLineColor:gl,propertyViewSelectBackground:_d,listViewLabelColor:fj,listViewLabelSelectColor:Hc,listViewLabelFont:fc,listViewRowLineVisible:!1,listViewRowLineColor:gl,listViewSelectBackground:_d,treeViewLabelColor:fj,treeViewLabelSelectColor:Hc,treeViewLabelFont:fc,treeViewExpandIcon:ps(Ac),treeViewCollapseIcon:ps(Ac,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:gl,treeViewSelectBackground:_d,tableViewLabelColor:fj,tableViewLabelSelectColor:Hc,tableViewLabelFont:fc,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:gl,tableViewColumnLineColor:gl,tableViewSelectBackground:_d,treeTableViewLabelColor:fj,treeTableViewLabelSelectColor:Hc,treeTableViewLabelFont:fc,treeTableViewExpandIcon:ps(Ac),treeTableViewCollapseIcon:ps(Ac,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:gl,treeTableViewColumnLineColor:gl,treeTableViewSelectBackground:_d,tableHeaderLabelColor:fj,tableHeaderLabelFont:fc,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:qs,tableHeaderBackground:gb,tableHeaderMoveBackground:Wr,tableHeaderInsertColor:_d,tableHeaderSortDescIcon:ik(me,!0),tableHeaderSortAscIcon:ik(me),tabViewTabGap:1,tabViewLabelColor:Hc,tabViewLabelFont:fc,tabViewTabBackground:ip,tabViewSelectWidth:3,tabViewSelectBackground:_d,tabViewMoveBackground:Wr,tabViewInsertColor:_d,toolbarLabelColor:fj,toolbarLabelSelectColor:Hc,toolbarLabelFont:fc,toolbarBackground:gb,toolbarSelectBackground:_d,toolbarItemGap:8,toolbarSeparatorColor:Oh},!0);var Uh={translateX:1,sortColumn:1},bn={sortable:1,sortOrder:1,sortFunc:1},sh={focusData:1},$o={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},zh={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},el=function(X,a){a.add(X),X.hasChildren()&&X.eachChild(function(C){el(C,a)})},Uq=function(i,W,e,o,b,l,d,X,S,H,v){var B,z=e.getValueType(),Y=e.getAlign();if(e.getEnumValues()){var u=e.toEnumLabel(W),h=Go||0,p=0,A=l,N=C.getTextSize(o,u).width;return B=Kf(e.toEnumIcon(W)),B&&(p=l+Go/2,"center"===Y?p+=(X-(h+N))/2:"right"===Y&&(p=p+X-(h+N)),mm(i,B,p,d+S/2),A=p+Go/2),u!=U&&(B?vs(i,u,o,b,A,d,X-(A-l),S):vs(i,u,o,b,l,d,X,S,Y)),void 0}return W=e.formatValue(W),W!=U?z===Og?(rf(i,l,d,X,S,W),void 0):z===gr||!z&&Mp(W)?(B=Kf(W?wr:Ph),mm(i,B,l+X/2,d+S/2,H,v),void 0):(vs(i,W,o,b,l,d,X,S,Y),void 0):void 0},fn=function(v,H){var y=H.view,S=y.getDataModel().getHistoryManager(),I=ge(v),Y=H.column||H.property;S&&S.beginInteraction(),H.editor=v,v.info=H,y.setCurrentEditor(v),y.getView().insertBefore(I,y._79O),bb(v,H.editorRect),v.setFocus?v.setFocus():nk(v),v.commitValue=function(){v._17Q&&(v=v._17Q),y.setValue(H.data,Y,v.getValue?v.getValue():v.value),v.close&&v.close(),xc(I)},Y.onEditorCreated&&Y.onEditorCreated(H)},Mh=function(j,x,b,f,m){var h=qr(j,b),P=x.value,z=x.view,c=m.getValueType();
return h.onblur=h.onchange=function(){z.endEditing()},"input"===j?(P=m.formatValue(P),P!=U&&(h.value=P),h.onkeydown=function(B){Bn(B)&&z.endEditing()},(c===km||c===kj)&&h.addEventListener(Mi,C.numberListener,!1)):j===Vc&&f.forEach(function(p){var d=I.createElement("option");d.innerHTML=m.toEnumLabel(p),d.value=p,m.isEnumEqual(P,p)&&(d.selected=!0),sk(h,d)}),fn(h,x),h},Oq=e.widget={},Bh=function(I,M,d){ld($+".widget."+I,M,d)};pr(Cj,{ms_value:function(I){I.getValue=function(O){var S=this.getItemById(O),I=S.element;return I?I.getValue?I.getValue():I.value:S.selected},I.setValue=function(d,b){var V=this.getItemById(d),r=V.element;r?r.setValue?r.setValue(b):r.value=b:(V.selected=b,this.iv())},I.v=function(O,b){var d=this;if(2===arguments.length)d.setValue(O,b);else{if(!ks(O))return d.getValue(O);for(var g in O)d.setValue(g,O[g])}return d}},_46o:function(v){v._icon=U,v._accessType=U,v._valueType=U,v._editable=!1,v._batchEditable=!0,v._align=nd,v._nullable=!0,v._emptiable=!1,v.setParent=Kg,v.formatValue=function(N){var E=this,Y=E._valueType;if(E.getEnumValues())return E.toEnumLabel(N);if(Y===gr)return!!N;if(N!=U){if(Y===km)return M(N);if(jr(N))return Hr(N)}return N},v.setEnum=function(y,i,_,n,o,r){var d=this;y&&y.values&&(n=y.editable,_=y.icons,i=y.labels,o=y.strict,r=y.maxHeight,y=y.values),Ni(y)&&(y=y._as),Ni(i)&&(i=i._as),Ni(_)&&(_=_._as),d._enumValues=y,d._enumLabels=i,d._enumIcons=_,d._enumEditable=n,d._enumStrict=o==U?!0:o,d._enumMaxHeight=r,y&&y.length&&jr(y[0])&&(d._valueType=kj),d.fp("enum",!1,!0)},v.getEnumMaxHeight=function(){return this._enumMaxHeight},v.isEnumEditable=function(){return this._enumEditable},v.getEnumValues=function(){return this._enumValues},v.getEnumLabels=function(){return this._enumLabels},v.getEnumIcons=function(){return this._enumIcons},v.isEnumStrict=function(){return this._enumStrict},v.isEnumEqual=function(V,G){return this._enumStrict?V===G:V==G},v.toEnumLabel=function(N){var T=this,b=T._enumValues,P=T._enumLabels;if(b&&P)for(var $=0;$<b.length;$++)if(T.isEnumEqual(N,b[$]))return P[$];return N},v.toEnumIcon=function(a){var W=this,s=W._enumValues,R=W._enumIcons;if(s&&R)for(var Z=0;Z<s.length;Z++)if(W.isEnumEqual(a,s[Z]))return R[Z];return H}},_45o:function(c){c._87o=function(X,V,E,u,w,k){if(X){var o=this,Z=o._90I,t=xk(1);o._columnLineVisible&&(w-=1),o._rowLineVisible&&(k-=1),0>=w||0>=k||(o._90I||(Z=o._90I={}),Z[V]||(Z[V]=new rn),bb(t,o.tx()+E,o.ty()+u,w,k),sk(t,X),o._view.insertBefore(t,o._79O),X.onParentAdded&&X.onParentAdded(t),Z[V].add(t))}},c._76o=function(){var z=this,J=z._90I;if(J){for(var X in J)J[X].each(function(G){xc(G)});delete z._90I}},c._77o=function(Q){var j=this;if(j._90I){var u=j._90I[Q];u&&(u.each(function(S){xc(S)}),delete j._90I[Q])}}},_47o:function(P){P.getValue=function(j,h){return h.getValue?h.getValue(j,h,this):Dk(j,h.getAccessType(),h.getName())},P.setValue=function(C,R,z){if(R.isEmptiable()||""!==z||(z=H),R.isNullable()||z!=U){var $=this,S=R.getName(),d=R.getAccessType(),L=R.getValueType();L===km&&re(z)?z=D(z):L===kj&&re(z)?z=parseFloat(z):L===gr&&re(z)&&(z="true"===z),$._batchEditable&&R._batchEditable&&$.isSelected(C)?$.sm().each(function(r){R.setValue?R.setValue(r,R,z,$):en(r,d,S,z)}):R.setValue?R.setValue(C,R,z,$):en(C,d,S,z)}},P.setCurrentEditor=function(Z){this.endEditing(),this._currentEditor=Z,this.redraw()},P.isEditing=function(Q,F){var C=this,W=C._currentEditor;if(!W)return!1;if(F){var e=W.info;return e?(e.column||e.property)===F&&e.data===Q:!1}return!0},P.endEditing=function(){var d=this,Z=d._currentEditor,p=d.getDataModel().getHistoryManager();Z&&(delete d._currentEditor,Z.commitValue&&Z.commitValue(Z.info),d.redraw(),p&&p.endInteraction())},P.beginEditing=function(b){this.endEditing();var a=this,c=b.column||b.property;if(c.beginEditing)c.beginEditing(b);else{var B=b.data,C=b.value,Q=a.getSelectBackground(B),e=c.getEnumValues(),n=c.getSlider(),t=c.getColorPicker();if(n){var O=He(Oq.Slider,n);return O.setValue(C),O.getView().onblur=function(){a.endEditing()},O.isInstant()&&(O.onValueChanged=function(){a.setValue(B,c,O.getValue())}),fn(O,b),void 0}if(t||c.getValueType()===Og){var j=He(Oq.ColorPicker,t);return j.setValue(C),j.onClosed=function(){a.endEditing()},j.isInstant()&&(j.onValueChanged=function(W,$){a.setValue(B,c,$)}),fn(j,b),j.open(),void 0}if(e){if(Oq.ComboBox){var r=new Oq.ComboBox;r.setValue(C),r.setValues(e),r.setLabels(c.getEnumLabels()),r.setIcons(c.getEnumIcons()),r.setEditable(c.isEnumEditable()),r.setStrict(c.isEnumStrict()),r.setMaxHeight(c.getEnumMaxHeight()),r.onClosed=function(){a.endEditing()},fn(r,b),r.open()}else Mh(Vc,b,Q,e,c);return}var J=c.getValueType();if(J===gr||Mp(C))return a.setValue(B,c,!C),void 0;if(c.getItemEditor()){var z=xl(c.getItemEditor()),L=new z(B,c,a,b),H=L.getView();return H._17Q=L,L.setValue(C),En(H),fn(H,b),L.editBeginning&&L.editBeginning(),void 0}Mh("input",b,Q,U,c)}}},_44o:function(C){C.init=function(D){var X=this,I=X.th=new Xo(D),z=X._view=Jp(1,X);X.tv=X._tableView=D,sk(z,I.getView()),sk(z,D.getView()),I.mp(function(C){C.property===Cn&&X.iv()}),X.iv()},C.getTableView=function(){return this.tv},C.getTableHeader=function(){return this.th},C.getDataModel=function(){return this.tv.dm()},C.getColumnModel=function(){return this.tv.getColumnModel()},C.setColumns=function(y){this.tv.setColumns(y)},C.addColumns=function(V){this.tv.addColumns(V)},C.endEditing=function(){this.tv.endEditing()},C.validateImpl=function(){var I=this,d=I.th,L=md(d),x={x:0,y:0,width:I.getWidth(),height:L};bb(d,x),x.y=L,x.height=W(0,I.getHeight()-L),bb(I.tv,x)}},ms_vs:function(K){K._41o=function(){return this._29I.height<this._59I},K._43o=function(){var V=this;V._41o()&&(V._58I||(T(function(){V._94O()},Oe),V.iv()),V._58I=new Date)},K._94O=function(){var f=this;if(f._58I){var p=new Date;p.getTime()-f._58I.getTime()>=Oe?(delete f._58I,f.iv()):T(function(){f._94O()},Oe)}},K._93I=function(){var d=this,j=d._27I;if(d._58I||!d._autoHideScrollBar){j||sk(d._79O,j=d._27I=xk());var _=d._29I,$=_.height,G=d._59I,f=d.getScrollBarSize(),r=_.width-f-2,V=$*(-d.ty()/G),n=$*($/G),i=j.style;G>$?(Wk>n&&(V=V+n/2-Wk/2,0>V&&(V=0),V+Wk>$&&(V=$-Wk),n=Wk),i.visibility=rq,i.background=d.getScrollBarColor(),i.borderRadius=f/2+kp,bb(j,r,V,f,n)):i.visibility=Vd}else j&&(j.style.visibility=Vd)}},ms_hs:function(H){H._40o=function(){return this._29I.width<this._91I},H._42o=function(){var r=this;r._40o()&&(r._95O||(T(function(){r._94I()},Oe),r.iv()),r._95O=new Date)},H._94I=function(){var O=this;if(O._95O){var Z=new Date;Z.getTime()-O._95O.getTime()>=Oe?(delete O._95O,O.iv()):T(function(){O._94I()},Oe)}},H._92I=function(){var N=this,F=N._28I;if(N._95O||!N._autoHideScrollBar){F||sk(N._79O,F=N._28I=xk());var e=N._29I,M=e.width,b=N._91I,V=N.getScrollBarSize(),T=e.height-V-2,Y=M*(-N.tx()/b),d=M*(M/b),X=F.style;b>M?(Wk>d&&(Y=Y+d/2-Wk/2,0>Y&&(Y=0),Y+Wk>M&&(Y=M-Wk),d=Wk),X.visibility=rq,X.background=N.getScrollBarColor(),X.borderRadius=V/2+kp,bb(F,Y,T,d,V)):X.visibility=Vd}else F&&(F.style.visibility=Vd)}}}),Si(wr,yk(16,16,[{type:Zo,rect:[1,1,14,14],background:_d},{type:Cr,rect:[1,1,14,14],width:1,color:se},{type:rb,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Si(Ph,yk(16,16,{type:Cr,rect:[1,1,14,14],width:1,color:se})),Si(yn,yk(16,16,[{type:yp,rect:[2,2,12,12],borderWidth:1,borderColor:se,background:"#FFF"},{type:yp,rect:[4,4,8,8],background:_d}])),Si(mc,yk(16,16,{type:yp,rect:[2,2,12,12],borderWidth:1,borderColor:se})),Cj._15Q=function(d){d._29I=fl,d._59I=0,d._91I=0,d._5o=function(w){var W=this;W._30I=new rn,W._rows=new rn,W._rowMap={},W._31I=0,W._14I=0,W._view=Jp(1,W),W._canvas=Kh(W._view),sk(W._view,W._79O=xk()),W.dm(w?w:new Br)},d.getCheckIcon=function(q){var I=this.sm(),D=I.co(q);return I.sg()?Kf(D?yn:mc):Kf(D?wr:Ph)},d.checkData=function(a){var N=this.sm(),d=N.co(a);N.sg()&&d||(this._32o=1,d?N.rs(a):N.as(a),delete this._32o)},d.getDataAt=function(i){i.target&&(i=this.lp(i));var D=Z(i.y/this._rowHeight),$=this._rows;return 0>D||D>=$.size()?U:$.get(D)},d.onDataDoubleClicked=function(){},d.onDataClicked=function(){},d.adjustTranslateX=function(){return 0},d.adjustTranslateY=function(L){var F=this.getHeight()-this._59I;return F>L&&(L=F),L>0?0:M(L)},d.onPropertyChanged=function(x){var K=this,Q=x.property;$o[Q]?K.ivm():sh[Q]||K.redraw(),Q===bl?K._42o():Q===Yc&&K._43o()},d.getLabel=function(z){return z.toLabel()},d.getLabelFont=function(){return this._labelFont},d.getLabelColor=function(h){var U=this;if(U.isCheckMode()){if(U._focusData===h)return U._labelSelectColor}else if(U.isSelected(h))return U._labelSelectColor;return U._labelColor},d.getStartRowIndex=function(){return this._31I},d.getEndRowIndex=function(){return this._14I},d.getRowDatas=function(){return this._rows},d.getRowIndex=function(f){return this._rowMap[f._id]},d.getRowSize=function(){return this._rows.size()},d.getViewRect=function(){return Ji(this._29I)},d.isVisible=function(s){return this._visibleFunc?this._visibleFunc(s):!0},d.getCurrentSortFunc=function(){return this._sortFunc},d.setDataModel=function(o){var O=this,X=O._dataModel,T=O._3o;X!==o&&(X&&(X.umm(O.handleDataModelChange,O),X.umd(O.handleDataPropertyChange,O),X.umh(O._15o,O),T||X.sm().ums(O._16o,O)),O._dataModel=o,o.mm(O.handleDataModelChange,O),o.md(O.handleDataPropertyChange,O),o.mh(O._15o,O),T?T._21I(o):o.sm().ms(O._16o,O),O.fp("dataModel",X,o))},d.validateModel=function(){var N=this;N._rows.clear(),N._rowMap={},N.buildChildren(N._dataModel._roots);var T=N._rows=N._rows.toList(N.isVisible,N),$=0,a=N.getCurrentSortFunc(),c=T.size();for(a&&T.sort(a);c>$;$++)N._rowMap[T.get($)._id]=$},d.buildChildren=function(h){var $=this;h.each(function(y){$._rows.add(y),$.buildChildren(y._children)})},d.handleDataModelChange=function(){this.ivm()},d.handleDataPropertyChange=function(d){"parent"===d.property?this.ivm():this.invalidateData(d.data)},d._15o=function(){this.ivm()},d._16o=function(g){g.datas.each(this.invalidateData,this),this.onSelectionChanged(g)},d.onSelectionChanged=function(S){var c=this,Y=c.sm();!c.isAutoMakeVisible()||1!==Y.size()||"set"!==S.kind&&"append"!==S.kind||c._32o||c.makeVisible(Y.ld())},d.makeVisible=function(c){c&&(this._23I=c,this.iv())},d.scrollToIndex=function(C){var R=this,y=R._29I,X=y.height,J=R._rowHeight,G=J*C;C>=0&&C<R._rows.size()&&X>0&&(G+J>y.y+X?R.ty(-G+X-J):G<y.y&&R.ty(-G))},d.ivm=function(){this.invalidateModel()},d.invalidateModel=function(){var Y=this;Y._96I||(Y._96I=1,Y._32I=1,delete Y._24I,Y.iv())},d.redraw=function(){var s=this;s._32I||(s._32I=1,delete s._24I,s.iv())},d.invalidateData=function(G){var m=this;i?m.redraw():m._32I||(m._24I||(m._24I={}),m._24I[G._id]=G,m.iv())},d.getFocusData=function(){return this._focusData},d.setFocusDataById=function(l){this.setFocusData(this.dm().getDataById(l))},d.setFocusData=function(S){var G=this,T=G._focusData;T!==S&&(G._focusData=S,G.fp("focusData",T,S),T&&G.invalidateData(T),S&&(G.invalidateData(S),G.isAutoMakeVisible()&&G.makeVisible(S)))},d.drawRowBackground=function(g,M,v,O,N,G,f){var e=this,t=e.isCheckMode();(M===e._focusData&&t||v&&!t)&&rf(g,O,N,G,f,e.getSelectBackground(M))},d.drawData=function(q,L,j){var N=this,b=N._rowHeight,r=b*j,D=N._29I,v=D.x,k=D.width;q.save(),q.beginPath(),q.rect(v,r,k,b),q.clip(),N._87o(N.drawRow(q,L,N.isSelected(L),v,r,k,b),j,v,r,k,b),q.restore(),N._rowLineVisible&&rf(q,v,r+b-1,k,1,N._rowLineColor)},d._12I=function(n){var t=this,w=t._31I,K=t._29I,I=K.x,h=K.y,Z=K.width,b=K.height;for(n.beginPath(),n.rect(I,h,Z,b),n.clip(),n.clearRect(I,h,Z,b),t._76o(),t._93db(n);w<t._14I;w++)t.drawData(n,t._rows.get(w),w);t._92db(n)},d._13I=function(w){for(var s,U=this,j=U._rowHeight,g=U._29I,K=g.x,y=g.width,o=U._31I,H=U._30I;o<U._14I;o++)s=U._rows.get(o),U._24I[s._id]&&H.add({data:s,index:o});H.isEmpty()||(w.beginPath(),H.each(function(M){w.rect(K,M.index*j,y,j)}),w.clip(),H.each(function($){w.clearRect(K,$.index*j,y,j)}),H.each(function(v){U._77o(v.index)}),U._93db(w),H.each(function(p){U.drawData(w,p.data,p.index)}),U._92db(w),H.clear())},d.validateImpl=function(){var D=this,m=D._canvas,M=D.getWidth(),q=D.getHeight(),F=D._rowHeight,u=D._32I;(M!==m.clientWidth||q!==m.clientHeight)&&(kr(m,M,q),u=1);var C=R&&!n;D._96I&&!C&&D.validateModel();var J=D._29I,c={x:-D.tx(),y:-D.ty(),width:M,height:q},W=D._rows.size(),v=os(m),s=D._23I;u||ve(c,J)||(u=1),D._29I=c,D._59I=W*F,D._31I=Z(c.y/F),D._14I=S((c.y+c.height)/F),D._31I<0&&(D._31I=0),D._14I>W&&(D._14I=W),D._99I&&u&&D._99I(),gp(v,D.tx(),D.ty(),1),u?D._12I(v):D._24I&&D._13I(v),D._93I(),D._92I(),v.restore(),D._32I=D._24I=D._96I=U,s&&(D.scrollToIndex(D.getRowIndex(s)),delete D._23I),D.tx(D.tx()),D.ty(D.ty())}},Cj._48o=function(k){k._rootVisible=!0,k._rootData=U,k._35o=function(){this._expandMap={},this._levelMap={}},k.validateModel=function(){var z=this,k=z._rootData;z._rows.clear(),z._levelMap={},z._rowMap={},z._currentLevel=0,k?z._rootVisible?z.isVisible(k)&&z.buildData(k):z.buildChildren(k):z.buildChildren(),delete z._currentLevel},k.buildData=function(L){var x=this,U=L._id,k=x._rows;x._rowMap[U]=k.size(),k.add(L),x._levelMap[U]=x._currentLevel,x.isExpanded(L)&&(x._currentLevel++,x.buildChildren(L),x._currentLevel--)},k.buildChildren=function(B){var w=this,Y=B?B._children:w._dataModel._roots,c=w.getCurrentSortFunc();c&&w.isChildrenSortable(B)?Y.toList(w.isVisible,w).sort(c).each(w.buildData,w):Y.each(function(c){w.isVisible(c)&&w.buildData(c)})},k.getLevel=function(F){return this._levelMap[F._id]},k.getToggleIcon=function(q){var K=this,V=K._loader,Z=K._collapseIcon;return V&&!V.isLoaded(q)?Z:q.hasChildren()?K.isExpanded(q)?K._expandIcon:Z:U},k.isCheckMode=function(){return this._checkMode!=U},k.isChildrenSortable=function(){return!0},k.handleDataModelChange=function(N){var G=this;N.kind===fo?delete G._expandMap[N.data._id]:N.kind===eh&&(G._expandMap={}),G.ivm()},k.toggle=function(K){var N=this;N.isExpanded(K)?N.collapse(K):N.expand(K)},k.isExpanded=function(O){return 1===this._expandMap[O._id]},k.expand=function(q){var F=this,M=F._loader;F.isExpanded(q)||(M&&!M.isLoaded(q)&&M.load(q),F._expandMap[q._id]=1,F.ivm(),F.onExpanded(q))},k.onExpanded=function(){},k.collapse=function(M){var j=this;j.isExpanded(M)&&(delete j._expandMap[M._id],j.ivm(),j.onCollapsed(M))},k.onCollapsed=function(){},k.expandAll=function(){var S=this;S._dataModel.each(function(J){J.hasChildren()&&(S._expandMap[J._id]=1)}),S.ivm()},k.collapseAll=function(){this._expandMap={},this.ivm()},k.makeVisible=function(t){if(t){var S=this;if(!S._rootData||t.isDescendantOf(S._rootData)){for(var E=t._parent;E;)S.expand(E),E=E._parent;S._23I=t,S.iv()}}},k.checkData=function(U){var d,Z=this,I=Z._checkMode,p=Z.sm(),z=p.co(U);if(!p.sg()||!z){if(Z._32o=1,I===s)z?p.rs(U):p.as(U);else if(I===Vp)d=new rn(U),d.addAll(U._children);else if("descendant"===I)d=new rn,el(U,d);else if("all"===I&&(d=new rn,el(U,d),!z))for(var o=U._parent;o;)d.add(o),o=o._parent;d&&(z?p.rs(d):p.as(d)),delete Z._32o}},k._97I=function(K,$,G,p,U,Y,n){var j=this,X=j._indent,E=j._levelMap[$._id],H=j.getIconWidth($),R=Kf(j.getToggleIcon($));R?(p+=X*E,mm(K,R,p+X/2,U+n/2,$,j),p+=X):p+=X*(E+1),j._checkMode&&(mm(K,j.getCheckIcon($),p+X/2,U+n/2,$,j),p+=X),j.drawIcon(K,$,p,U,H,n),j.drawLabel(K,$,p+H,U,n)}},Cj._14Q=function(l){l.getIcon=function(N){return N.getIcon()},l.getIconWidth=function(c){return this.getIcon(c)?this._indent:0},l.drawIcon=function(T,D,$,i,K,N){if(K){var Q=this,J=Q.getBodyColor(D),y=Kf(Q.getIcon(D),J);y&&(N-=Q.isRowLineVisible()?1:0,Wc(T,y,ir,$,i,K,N,D,Q,J),zn(T,Q.getBorderColor(D),$,i,K,N))}},l.drawLabel=function(J,K,t,C,h){var F=this;vs(J,F.getLabel(K),F.getLabelFont(K),F.getLabelColor(K),t,C,0,h)}},Cj._50o=function(Q){Q._98I=function(){var D=this,C=D._39o=new Br;D._60I=new rn,C.mm(D._17o,D),C.md(D._18o,D),C.mh(D._19o,D)},Q.setColumns=function(E){this._39o.clear(),this.addColumns(E)},Q.addColumns=function(R){var S=this._39o;R.forEach(function(l){if(!(l instanceof xp)){var g=xl(l.className);l=He(g?g:xp,l)}S.add(l)})},Q.onColumnClicked=function(){},Q.onCheckColumnClicked=function(){},Q._3Q=function(b){for(var E,N=0,h=this._60I,k=h.size();k>N;N++)if(E=h.get(N),E.column===b)return E;return U},Q.getColumnAt=function(u){var d=this._4Q(u);return d?d.column:U},Q._4Q=function(d){for(var x=this,z=d.target?x.lp(d).x:d.x,c=x._60I,E=0;E<c.size();E++){var K=c.get(E),P=K.startX;if(z>=P&&z<P+K.column.getWidth())return K}return U},Q.getToolTip=function(h){var L=this,p=L.getDataAt(h),K=L.getColumnAt(h);return p&&K?K.getToolTip(p,L):U},Q.adjustTranslateX=function(E){var d=this.getWidth()-this._91I;return d>E&&(E=d),E>0?0:M(E)},Q._99I=function(){var X=this,f=X._29I,U=X._60I;U.clear(),X._91I=0,X._39o._roots.each(function(D){if(D.isVisible()){var W=X._91I+D.getWidth();X._91I<=f.x+f.width&&W>=f.x&&U.add({column:D,startX:X._91I}),X._91I=W}})},Q.drawData=function(_,C,Q){var F=this,p=F._rowHeight,U=p*Q,V=F.isSelected(C),n=F._29I,A=n.x,D=n.width;F.drawRowBackground(_,C,V,A,U,D,p),F._60I.each(function(L){var B=L.column,u=L.startX,Y=B.getWidth();Y>0&&!F.isEditing(C,B)&&(_.save(),_.beginPath(),_.rect(u,U,Y,p),_.clip(),F._87o(F.drawCell(_,C,V,B,u,U,Y,p),Q,u,U,Y,p),F._columnLineVisible&&rf(_,u+Y-1,U,1,p,F._columnLineColor),_.restore())}),F._rowLineVisible&&rf(_,A,U+p-1,D,1,F._rowLineColor)},Q.drawCell=function(r,V,b,M,z,q,S,a){var l=this;if(M.drawCell)return M.drawCell(r,V,b,M,z,q,S,a,l);var e=l.getValue(V,M);Uq(r,e,M,l.getLabelFont(V,M,e),l.getLabelColor(V,M,e),z,q,S,a,V,l)},Q.getColumnModel=function(){return this._39o},Q._17o=function(){this.redraw()},Q._18o=function(r){var W=this;r.data===W._sortColumn&&bn[r.property]?W.ivm():(W._42o(),W.redraw())},Q._19o=function(){this.redraw()},Q.getCurrentSortFunc=function(){var S=this,c=S._sortColumn;if(c&&c.isSortable()){var x=c.getSortFunc(),B=ln===c.getSortOrder()?1:-1;return x||(x=ki),function(V,J){return x.call(S,S.getValue(V,c),S.getValue(J,c),V,J)*B}}return S._sortFunc},Q.isCellEditable=function(I,V){return V.isEditable()&&this.isEditable()},Q._37O=function(K,z){if(cf(z))for(var P=this,W=P.lp(z),u=P._60I,D=P._rowHeight,t=P._29I,F=t.x,e=t.y,o=t.width,c=t.height,B=0;B<u.size();B++){var w=u.get(B),Y=w.startX,V=w.column,H=V.getWidth();if(V!==P._31o&&V!==P._4o&&P.isCellEditable(K,V)&&W.x>=Y&&W.x<Y+H){var U={x:Y,y:P.getRowIndex(K)*D,width:H,height:D},m={x:U.x+P.tx(),y:U.y+P.ty(),width:U.width,height:U.height},G=0,T=0;return U.x<F?G=U.x-F:U.x+U.width>F+o&&(G=U.x+U.width-F-o),G&&(P.tx(P.tx()-G),m.x-=G),U.y<e?T=U.y-e:U.y+D>e+c&&(T=U.y+D-e-c),T&&(P.ty(P.ty()-T),m.y-=T),P.beginEditing({data:K,column:V,value:P.getValue(K,V),event:z,rect:U,editorRect:m,view:P}),void 0}}}},Oq.BaseItemEditor=function(S,l,O,L){this._data=S,this._column=l,this._master=O,this._editInfo=L},Bh("BaseItemEditor",O,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Nc=e.Tab=function(){si(Nc,this)};Oo("Tab",Tn,{ms_ac:["view","closable","disabled"],_icon:U,_closable:!1,_disabled:!1,setParent:Kg});var xp=e.Column=function(){si(xp,this)};Oo("Column",Tn,{_46o:1,ms_ac:["accessType","valueType",rq,Fo,Wl,zl,"align",Og,"sortOrder",us,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:ln,_sortFunc:U,_sortable:!0,setWidth:function(W){16>W&&(W=16);var k=this._width;this._width=W,this.fp(zl,k,W)},getToolTip:function(Q,y){return this.formatValue(y.getValue(Q,this))}});var Np=e.Property=function(){si(Np,this)};Oo("Property",Tn,{_46o:1,ms_ac:["accessType","valueType",Fo,Wl,"categoryName",Og,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:U,getToolTip:function(R,X,g){var F=this;return X?F.formatValue(g.getValue(R,F)):g.getPropertyName(F)}}),Oq.AccordionView=function(){var M=this;M._20o={},M._21o=new rn,M._10o=U,M._9o=U,M._11o=U,M._view=Jp(0,M),M.iv()},Bh("AccordionView",O,{ms_v:1,ms_fire:1,ms_ac:[Qg,bm,"titleHeight",Kj,wm,"titleBackground","selectWidth",Bk,"orientation","separatorColor"],_expandIcon:C.accordionViewExpandIcon,_collapseIcon:C.accordionViewCollapseIcon,_titleHeight:Jd,_labelColor:C.accordionViewLabelColor,_labelFont:C.accordionViewLabelFont,_titleBackground:C.accordionViewTitleBackground,_selectBackground:C.accordionViewSelectBackground,_selectWidth:C.accordionViewSelectWidth,_orientation:"v",_separatorColor:C.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(C,X,H,I){var N=this,T=xk();if(N._20o[C])throw C+" already exists";T.onmousedown=cj,T.style.cursor=Ie,T.addEventListener(K?vo:vf,function(H){cj(H)},!1),T.addEventListener(K?Cc:Ag,function(r){cj(r),cf(r)&&(N._10o===C?N.collapse():N.expand(C))},!1),sk(N._view,T),N._20o[C]={content:X,div:T,canvas:Kh(T),icon:I},N._21o.add(C),H&&N.expand(C),N.iv()},remove:function(n){var q=this,_=q._20o[n];_&&(xc(_.div),delete q._20o[n],q._21o.remove(n),q.iv())},clear:function(){var y=this;y._20o={},y._21o.clear(),y.iv()},isExpanded:function(P){return this._10o===P},expand:function(Y){var h=this;h._20o[Y]&&h._10o!==Y&&(h._10o=Y,h.onExpanded(Y),h.iv())},onExpanded:function(){},collapse:function(){var Y=this;Y._10o&&(Y.onCollapsed(Y._10o),delete Y._10o,Y.iv())},onCollapsed:function(){},initCanvas:function(Z,j,u){kr(Z,j,u);var G=os(Z);return gp(G,0,0,1),G.clearRect(0,0,j,u),G},drawTitle:function(C,K,W,Y,a){var N=this,F=Kf(a.icon),k=N.isExpanded(K),I=N._titleHeight,A=N._titleBackground,m=N._selectWidth,R=N._separatorColor,l=Kf(k?N._expandIcon:N._collapseIcon),G=m+4;rf(C,0,0,W,Y,A),k&&m&&rf(C,0,0,m,Y,N._selectBackground),(k||N._21o.get(N._21o.size()-1)!==K)&&rf(C,0,Y-1,W,1,R?R:_l(A)),F&&(mm(C,F,G+Sb(F)/2,I/2),G+=Sb(F)+2),vs(C,K,N.getLabelFont(K),N.getLabelColor(K),G,0,0,I),l&&mm(C,l,W-Sb(l)/2-4,I/2)},validateImpl:function(){var D=this,y=D._view,F=0,m=0,U=D.getWidth(),G=D.getHeight(),L=D._titleHeight,R=D._21o.size()*L,B=D._11o,b=D._9o;delete D._11o,delete D._9o,D._21o.each(function(i){var J,y,e=D._20o[i],b=e.content,S=D._10o===i;fp(D)?(bb(e.div,F,0,L,G),J=D.initCanvas(e.canvas,L,G),kk(J,0,G),_f(J,-Q),D.drawTitle(J,i,G,L,e),J.restore(),S?(y=W(0,U-R),b&&(D._11o=b,D._9o=ge(b),bb(b,F+L,0,y,G)),F+=L+y):F+=L):(bb(e.div,0,m,U,L),J=D.initCanvas(e.canvas,U,L),D.drawTitle(J,i,U,L,e),J.restore(),S?(y=W(0,G-R),b&&(D._11o=b,D._9o=ge(b),bb(b,0,m+L,U,y)),m+=L+y):m+=L)});var H=D._9o;B&&B!==D._11o&&B.endEditing&&B.endEditing(),H&&H!==b&&sk(y,H),b&&b!==H&&xc(b)}}),Oq.SplitView=function(q,K,Z,C){var Q=this,y=Q._dividerDiv=xk(),I=Q._60O=Kh(),Y=Q._61O=Kh(),N=I.style,o=Y.style;Q._view=Jp(1,Q),sk(Q._view,y),N.msTouchAction=Wp,N.pointerEvents=Wp,N.cursor=Ie,o.msTouchAction=Wp,o.pointerEvents=Wp,o.cursor=Ie,q&&Q.setLeftView(q),K&&Q.setRightView(K),Z&&Q.setOrientation(Z),C!=U&&Q.setPosition(C),Q.setStatus(yi),new oc(Q)},Bh("SplitView",O,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:C.splitViewDividerSize,_dividerBackground:C.splitViewDividerBackground,_dragOpacity:C.splitViewDragOpacity,_toggleIcon:C.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(M,j){var O=this,I=O._position;isNaN(M)||(j||(O._82O=0>M?-1:M>1?1:0),O._position=M,O.fp(vh,I,M))},getLeftView:function(){return this._leftView},setLeftView:function(Y){var s=this,Z=s._leftView,d=s._view;if(s._leftView!==Y){if(Z&&Z!==s._rightView){var P=ge(Z);P.parentNode===d&&xc(P)}if(s._leftView=Y,Y){var N=ge(Y);N.parentNode!==d&&d.insertBefore(N,s._dividerDiv)}s.fp("leftView",Z,Y)}},getRightView:function(){return this._rightView},setRightView:function(k){var Y=this,S=Y._rightView,w=Y._view;if(Y._rightView!==k){if(S&&S!==Y._leftView){var M=ge(S);M.parentNode===w&&xc(M)}if(Y._rightView=k,k){var s=ge(k);s.parentNode!==w&&w.insertBefore(s,Y._dividerDiv)}Y.fp("rightView",S,k)}},validateImpl:function(){var j=this,D=j._draggable,y=j._position,C=j.getWidth(),s=j.getHeight(),J=j._dividerSize,v=j._dividerBackground,b=K?18:8,I=j._dividerDiv,R=j._82O,i=j._60O,N=j._61O,O=j._toggleIcon,B=j._status,S=I.style,$=null,o=K?20:4,x=O.comps[0];J>=b||0===J?j._coverDiv&&(xc(j._coverDiv),delete j._coverDiv):j._coverDiv||(j._coverDiv=xk(),X&&(j._coverDiv.style.background=Bq),sk(I,j._coverDiv)),j._togglable?i.parentNode||(sk(I,i),sk(I,N)):(xc(i),xc(N));var _=j._coverDiv,z=j._leftView,L=j._rightView;if(fp(j)){if(J>C&&(J=C),B===yi)if(1===R)var k=y,g=W(0,C-J-k);else-1===R?(g=-y,k=W(0,C-J-g)):(k=M((C-J)*y),g=W(0,C-J-k));else"cl"===B?(k=0,g=W(0,C-J)):"cr"===B&&(g=0,k=W(0,C-J));z&&bb(z,0,0,k,s),L&&bb(L,k+J,0,g,s),bb(I,k,0,J,s),j._22o=k,_&&(bb(_,J/2-b/2,0,b,s),_.style.cursor=D?Er:""),I.style.cursor=D?Er:"";var c=I.clientHeight/2,w=I.clientWidth;kr(i,w,w),bb(i,0,c-w-o,w,w),$=os(i),gp($,0,0,1),x.rotation=-Q,np($,O,0,0,w,w),$.restore(),kr(N,w,w),bb(N,0,c+o,w,w),$=os(N),gp($,0,0,1),x.rotation=Q,np($,O,0,0,w,w),$.restore()}else{if(J>s&&(J=s),B===yi)if(1===R)var t=y,A=W(0,s-J-t);else-1===R?(A=-y,t=W(0,s-J-A)):(t=M((s-J)*y),A=W(0,s-J-t));else"cl"===B?(t=0,A=W(0,s-J)):"cr"===B&&(A=0,t=W(0,s-J));z&&bb(z,0,0,C,t),L&&bb(L,0,t+J,C,A),bb(I,0,t,C,J),j._22o=t,_&&(bb(_,0,J/2-b/2,C,b),_.style.cursor=D?Yg:""),S.cursor=D?Yg:"";var d=I.clientWidth/2,w=I.clientHeight;kr(i,w,w),bb(i,d-w-o,0,w,w),$=os(i),gp($,0,0,1),x.rotation=0,np($,O,0,0,w,w),$.restore(),kr(N,w,w),bb(N,d+o,0,w,w),$=os(N),gp($,0,0,1),x.rotation=G,np($,O,0,0,w,w),$.restore()}S.background=v}});var oc=function(r){this.sv=r,this.addListeners()};ld(oc,O,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(l){var $=this,M=$.sv,g=M._dividerDiv,V=M._60O,_=M._61O,z=M._status,p=l.target;if(p===V)z===yi?M.setStatus("cl"):"cr"===z&&M.setStatus(yi);else if(p===_)z===yi?M.setStatus("cr"):"cl"===z&&M.setStatus(yi);else if(Jj(l)&&(p===g||p===M._coverDiv)&&(cj(l),M.isDraggable())){$.resizeDiv=xk();var L=$.resizeDiv.style,B=g.style,T=M.getLeftView(),C=M.getRightView();$._maskViews=[],[T,C].forEach(function(p){p=p.getView?p.getView():p;var N=xk(),l=N.style;l.left=p.style.left,l.top=p.style.top,l.width=p.offsetWidth+"px",l.height=p.offsetHeight+"px",M.getView().appendChild(N),$._maskViews.push(N)}),L.left=B.left,L.top=B.top,L.width=B.width,L.height=B.height,L.opacity=M.getDragOpacity(),L.background=M.getDividerBackground(),$._85o=$._86o=fp(M)?yf(l).x:yf(l).y,sk($.getView(),$.resizeDiv),$._clientPoint=yf(l),ds($,l)}},handleWindowTouchMove:function(z){if(Jj(z)){var F=this,T=F.sv,E=T._dividerSize,V=F.resizeDiv.style,v=T.getWidth(),R=T.getHeight(),H=T._22o-F._86o;fp(T)?(F._85o=yf(z).x,H+=F._85o,H>v-E&&(H=v-E),0>H&&(H=0),V.left=H+kp):(F._85o=yf(z).y,H+=F._85o,H>R-E&&(H=R-E),0>H&&(H=0),V.top=H+kp)}},handleWindowTouchEnd:function(G){var b=this,w=b.sv,i=w._22o-b._86o+b._85o,f=w._dividerSize,z=fp(w)?w.getWidth():w.getHeight(),M=w._82O,e=Qh(b._clientPoint,yf(G));e>1&&(w.setStatus(yi),0>i&&(i=0),i>z-f&&(i=z-f),z!==f&&(1===M?w.setPosition(i,1):-1===M?w.setPosition(i-z+f,1):w.setPosition(i/(z-f),1))),b._maskViews&&b._maskViews.forEach(function(L){xc(L)}),xc(b.resizeDiv),b.resizeDiv=b._85o=b._clientPoint=U},handle_mousedown:function(h){cf(h)&&this.handle_touchstart(h)},handleWindowMouseMove:function(Z){this.handleWindowTouchMove(Z)},handleWindowMouseUp:function(N){this.handleWindowTouchEnd(N)}}),Oq.TabView=function(){var B=this,D=B._view=Jp(1,B),Z=B._91O=xk(1),h=B._tabModel=new Br,p=h.sm(),P=B.invalidate;B._7o=new rn,B._canvas=Kh(Z),sk(D,Z),sk(D,B._92O=xk(1)),p.setSelectionMode(m),p.ms(P,B),h.mm(P,B),h.md(P,B),h.mh(P,B),new Qb(B),B.iv()},Bh("TabView",O,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Kj,wm,"tabBackground","selectWidth",Bk,"moveBackground","insertColor"],_tabPosition:ei,_tabHeight:Jd,_tabGap:C.tabViewTabGap,_labelColor:C.tabViewLabelColor,_labelFont:C.tabViewLabelFont,_tabBackground:C.tabViewTabBackground,_selectWidth:C.tabViewSelectWidth,_selectBackground:C.tabViewSelectBackground,_moveBackground:C.tabViewMoveBackground,_insertColor:C.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(u,Q,j){var N=new Nc,$=this._tabModel;return N.setName(u),N.setView(Q),$.add(N),j&&$.sm().ss(N),N},getLabel:function($){return $.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(G){this._23o=G,this.iv()},get:function(L){var V=this,C=V._tabModel;if(jr(L))return C._roots.get(L);if(re(L)){var g;return C.each(function($){L===V.getLabel($)&&(g=$)}),g}return L instanceof Nc?L:U},select:function(Z){this._tabModel.sm().ss(this.get(Z))},remove:function(X){var L=this;if(X=L.get(X)){var A=L._tabModel,W=A._roots.indexOf(X);L._tabModel.remove(X),L._12Q(--W)}},getCurrentTab:function(){return this._8o},hideTabView:function(P,k){k.parentNode===this._92O&&(an(k)?(k.style.display=Zi,k._tab_=P):xc(k),jp())},showTabView:function(j,g){an(g)&&(g.style.display="block",g._tab_=j),g.parentNode!==this._92O&&(sk(this._92O,g),jp())},_24o:function(){var u,p=this,Q=p._8o,U=p._9o,J=p._tabModel.sm().ld();J&&(u=ge(J.getView())),u!==U&&(U&&(Q.getView().endEditing&&Q.getView().endEditing(),p.hideTabView(Q,U)),u&&p.showTabView(J,u)),p._8o=J,p._9o=u,Q!==J&&p.onTabChanged(Q,J)},onTabChanged:function(){},onTabClosed:function(M,O){this._12Q(--O)},_12Q:function(Z){var v=this,z=v._tabModel,E=z.size();if(E&&!z.sm().ld()){Z==U&&(Z=0),Z>=E&&(Z=E-1),0>Z&&(Z=0);for(var x=Z;x>=0;x--){var c=v.get(x);if(!c.isDisabled())return v.select(c),c}for(x=Z+1;E>x;x++)if(c=v.get(x),!c.isDisabled())return v.select(c),c}},_9Q:function(j){var K=4,S=Kf(j.getIcon());S&&(K+=Sb(S,j)+4);var D=this.getLabel(j);return D&&(K+=sm(this.getLabelFont(j),D).width+4),j.isClosable()&&(K+=10),K},_10Q:function(V,O,g,X,A,J,c){var S,m=this,o=m._tabPosition,L=g+4,K=m._selectWidth,W=Kf(O.getIcon()),I=O.isDisabled(),p=m.getLabelColor(O),b=m.getLabelFont(O),Z=m.getLabel(O),q=m._selectBackground,U=o===nd+"-vertical",$=o===ib+"-vertical";(U||$)&&(L=X+4),I&&(V.globalAlpha=Ke),rf(V,g,X,A,J,c),O===m._8o&&K&&(o===ei?rf(V,g,X+J-K,A,K,q):o===nd?rf(V,g+A-K,X,K,J,q):o===ib?rf(V,g,X,K,J,q):U?rf(V,g+A-K,X,K,J,q):$?rf(V,g,X,K,J,q):rf(V,g,X,A,K,q));var C=A/2;if(U&&(kk(V,C,X+J/2),_f(V,G),kk(V,-C,-X-J/2)),W){var D=sd(W,O),Y=Sb(W,O);if(U||$){var w=g+A/2,N=L+D/2;kk(V,w,N),_f(V,Q),kk(V,-w,-N),mm(V,W,g+A/2,L+D/2,O,m),kk(V,w,N),_f(V,-Q),kk(V,-w,-N),L+=D+4}else mm(V,W,L+Y/2,X+J/2,O,m),L+=Y+4}return U||$?(kk(V,A/2,L+A/2),_f(V,Q),kk(V,-A/2,-L-A/2),vs(V,Z,b,p,g,L,J,A),kk(V,A/2,L+A/2),_f(V,-Q),kk(V,-A/2,-L-A/2)):vs(V,Z,b,p,L,X,A,J),U&&(kk(V,C,X+J/2),_f(V,-G),kk(V,-C,-X-J/2)),O.isClosable()&&(V.strokeStyle=p,V.lineWidth=1,V.beginPath(),$?(V.moveTo(g+A-10,X+J-4),V.lineTo(g+A-4,X+J-10),V.moveTo(g+A-4,X+J-4),V.lineTo(g+A-10,X+J-10),V.stroke(),S={x:g+A-12,y:X+J-12,width:12,height:12}):(V.moveTo(g+A-10,X+4),V.lineTo(g+A-4,X+10),V.moveTo(g+A-4,X+4),V.lineTo(g+A-10,X+10),V.stroke(),S={x:g+A-12,y:X,width:12,height:12})),I&&(V.globalAlpha=1),S},validateImpl:function(){var D=this;D._24o();var L,x=D._canvas,K=D._tabPosition,z=D._91O,r=D._92O,n=D._tabModel,P=D.getWidth(),V=D.getHeight(),b=D._tabHeight,i=D._7o,A=D._tabGap,O=K===ei,F=K===nd,a=K===pd,C=K===ib,T=K===nd+"-vertical",k=K===ib+"-vertical",l=D._23o,j=0;if((F||C)&&n._roots.each(function(L){j=W(D._9Q(L),j)}),O?(bb(z,0,0,P,b),L={x:0,y:b,width:P,height:W(0,V-b)}):F?(bb(z,0,0,j,V),L={x:j,y:0,width:W(0,P-j),height:V}):C?(bb(z,P-j,0,j,V),L={x:0,y:0,width:W(0,P-j),height:V}):T?(bb(z,0,0,b,V),L={x:b,y:0,width:W(0,P-b),height:V}):k?(bb(z,P-b,0,b,V),L={x:0,y:0,width:W(0,P-b),height:V}):(bb(z,0,V-b,P,b),L={x:0,y:0,width:P,height:W(0,V-b)}),bb(r,L),T||k){D._9o&&(L.x=0,bb(D._8o.getView(),L)),kr(x,b,V);var h=os(x),s=0;if(gp(h,0,D.ty(),1),h.clearRect(0,0,b,V),i.clear(),n._roots.each(function(Y){var u,V=D._9Q(Y);l&&l.tab===Y||(u=D._10Q(h,Y,0,s,b,V,D._tabBackground),u&&k&&(u.x=P-12)),i.add({_75o:u,tab:Y,startY:s,endY:s+V,height:V}),s+=V+A}),D._23Q=W(0,s-A),l){var u=l.position;D._10Q(h,l.tab,0,l.startY,b,l.height,D._moveBackground),rf(h,0,u,b,1,D._insertColor)
}h.restore(),D.ty(D.ty())}else if(F||C){D._9o&&(L.x=0,bb(D._8o.getView(),L)),kr(x,j,V);var h=os(x),s=0;if(gp(h,0,D.ty(),1),h.clearRect(0,0,j,V),i.clear(),n._roots.each(function(Y){var n;l&&l.tab===Y||(n=D._10Q(h,Y,0,s,j,b,D._tabBackground),n&&C&&(n.x=P-12)),i.add({_75o:n,tab:Y,startY:s,endY:s+b,height:b}),s+=b+A}),D._23Q=W(0,s-A),l){var u=l.position;D._10Q(h,l.tab,0,l.startY,j,l.height,D._moveBackground),rf(h,0,u,j,1,D._insertColor)}h.restore(),D.ty(D.ty())}else{D._9o&&(L.y=0,bb(D._8o.getView(),L)),kr(x,P,b);var h=os(x),m=0;if(gp(h,D.tx(),0,1),h.clearRect(0,0,P,b),i.clear(),n._roots.each(function(k){var p,j=D._9Q(k);l&&l.tab===k||(p=D._10Q(h,k,m,0,j,b,D._tabBackground),p&&a&&(p.y=V-b)),i.add({_75o:p,tab:k,startX:m,endX:m+j,width:j}),m+=j+A}),D._64I=W(0,m-A),l){var u=l.position;D._10Q(h,l.tab,l.startX,0,l.width,b,D._moveBackground),Nh(h,D._insertColor,u,0,b)}h.restore(),D.tx(D.tx())}for(var y=[],_=r.children,Q=0;Q<_.length;Q++){var Z=_[Q],v=Z._tab_;v&&!n.contains(v)&&y.push(Z)}y.forEach(function(n){r.removeChild(n)})}});var Qb=function(t){this.tv=t,this.addListeners()};ld(Qb,O,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(R){this.handleScroll(R,10*(R.wheelDelta/40))},handle_DOMMouseScroll:function(u){this.handleScroll(u,10*-u.detail)},handleScroll:function(K,F){cj(K);var C=this.tv,E=C._tabPosition;!C._40o()||E!==ei&&E!==pd||C.tx(this.tv.tx()+F),!C._41o()||E!==nd&&E!==ib&&E!==nd+"-vertical"&&E!==ib+"-vertical"||C.ty(this.tv.ty()+F)},_8Q:function(o){var u,c,W=this.tv,Q=W._tabPosition,r=W._7o;if(Q===ei||Q===pd){var y=W.lp(o).x;for(u=0;u<r.size();u++)if(c=r.get(u),c.startX<=y&&y<=c.endX)return c}else if(Q===nd||Q===ib||Q===nd+"-vertical"||Q===ib+"-vertical"){var C=W.lp(o).y;for(u=0;u<r.size();u++)if(c=r.get(u),c.startY<=C&&C<=c.endY)return c}return U},isClickable:function(t){var o=this.tv,V=o._tabPosition,l=this._73o=this._8Q(t);return!o._40o()||V!==ei&&V!==pd?!o._41o()||V!==nd&&V!==ib&&V!==nd+"-vertical"&&V!==ib+"-vertical"?l&&(!l.tab.isDisabled()||o.isMovable()):!0:!0},handle_mousemove:function(R){var m=this;bs?m._74o=m._8Q(R):m.getView().style.cursor=m.isClickable(R)?Ie:""},handle_mousedown:function(i){this.handle_mousemove(i),this.handle_touchstart(i)},handle_touchstart:function(u){var W=this,L=W.tv,A=L._tabPosition;cj(u),W.isClickable(u)&&(A===ei||A===pd?(W.x=yf(u).x,W.lp=L.lp(u),W.tx=L.tx()):(W.y=yf(u).y,W.lp=L.lp(u),W.ty=L.ty()),ds(W,u))},handleWindowMouseMove:function(S){this.handleWindowTouchMove(S)},handleWindowTouchMove:function(q){var X,p=this,M=p.tv,Q=M._tabPosition,O=p._73o;if(Q===ei||Q===pd){if(X=yf(q).x-p.x,!p._25o&&!p.moving&&g(X)>2&&(M._40o()&&!Op(q)?p._25o=1:O&&M.isMovable()&&(p.moving=1)),p._25o)M.tx(p.tx+X);else if(p.moving){var J=p.lp.x+X,w=M._tabGap/2;M._7o.each(function(r){var I=r.endX,y=J-r.startX<I-J;J>=r.startX&&I>=J&&M._7Q({tab:O.tab,startX:O.startX+X,width:O.width,front:y,insertTab:r.tab,position:y?W(0,r.startX-w):Y(M._64I,I+w)})})}}else if(X=yf(q).y-p.y,!p._25o&&!p.moving&&g(X)>2&&(M._41o()&&!Op(q)?p._25o=1:O&&M.isMovable()&&(p.moving=1)),p._25o)M.ty(p.ty+X);else if(p.moving){var t=p.lp.y+X,w=M._tabGap/2;M._7o.each(function(i){var V=i.endY,o=t-i.startY<V-t;t>=i.startY&&V>=t&&M._7Q({tab:O.tab,startY:O.startY+X,height:O.height,front:o,insertTab:i.tab,position:o?W(0,i.startY-w):Y(M._23Q,V+w)})})}},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},handleWindowTouchEnd:function(){var F=this,l=F.tv,I=l._tabPosition,S=l.getTabModel(),d=S._roots,O=F._73o;if(F.moving){var H=l._23o;if(H&&H.insertTab!==H.tab){var w=H.tab,L=d.remove(w),Y=d.indexOf(H.insertTab);Y>=0&&(H.front||Y++,Y<=d.size()&&(d.add(w,Y),S._38I(w,L,Y)))}l._7Q(U),delete F.moving}else if(!F._25o&&O){w=O.tab;var e=F._74o;if(!e||e.tab===w)if(!w.isDisabled()&&Xp(O._75o,F.lp)){var q=d.indexOf(w);S.remove(w),l.onTabClosed(w,q)}else w.isDisabled()||l._8o===w||S.sm().ss(w)}F._25o=F._73o=F._74o=I===ei||I===pd?F.x=F.lp=F.tx=U:F.y=F.lp=F.ty=U}}),Oq.PropertyView=function(Q){var l=this;l._view=Jp(1,l),l._canvas=Kh(l._view),sk(l._view,l._79O=xk()),l._rows=new rn,l._28o=new rn,l._26o={},l._26Q={};var X=l._propertyModel=new Br,J=l.ivm;X.mm(J,l),X.md(J,l),X.mh(J,l),l.dm(Q?Q:new Br),new Sk(l)},Bh("PropertyView",O,{ms_ac:[Kj,qb,wm,Fo,Wl,"categorizable",xn,us,mg,Qg,bm,Nl,Sn,Nf,"selectRowIndex",Bk,"background",Zk,hi,gc,lj,Jo],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:fl,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Go,_background:C.propertyViewBackground,_expandIcon:C.propertyViewExpandIcon,_collapseIcon:C.propertyViewCollapseIcon,_scrollBarColor:Ai,_scrollBarSize:Tj,_autoHideScrollBar:ts,_selectBackground:C.propertyViewSelectBackground,_rowHeight:Lf,_rowLineVisible:C.propertyViewRowLineVisible,_rowLineColor:C.propertyViewRowLineColor,_10I:.5,_columnLineVisible:C.propertyViewColumnLineVisible,_columnLineColor:C.propertyViewColumnLineColor,_labelColor:C.propertyViewLabelColor,_labelSelectColor:C.propertyViewLabelSelectColor,_labelFont:C.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(x){0>x&&(x=0),x>1&&(x=1);var l=this,Z=l._10I;l._10I=x,l.fp("columnPosition",Z,x)},getPropertyName:function(u){return u.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(D,f,k){return k===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(i,M){return M===this._selectRowIndex?this._labelSelectColor:i.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(Y){var Z=this.getHeight()-this._59I;return Z>Y&&(Y=Z),Y>0?0:M(Y)},isExpanded:function(O){if(!O)return!0;var q=this._26o[O];return q?q.isExpanded:!(this._26Q[O]===!1)},toggle:function(P){var D=this;D.isExpanded(P)?D.collapse(P):D.expand(P)},expandAll:function(){this.validate();for(var G in this._26o)this.expand(G)},expand:function(S){if(S&&S!==Zi){var Q=this,x=Q._26o[S];x&&!x.isExpanded&&(x.isExpanded=!0,Q.onExpanded(S),Q.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var G in this._26o)this.collapse(G)},collapse:function(u){if(u&&u!==Zi){var j=this,k=j._26o[u];k&&k.isExpanded&&(k.isExpanded=!1,j.onCollapsed(u),j.ivm())}},onCollapsed:function(){},getCategoryName:function(i){if(!this.isCategorizable())return Zi;var c=i.getCategoryName();return c?c:Zi},getPropertyModel:function(){return this._propertyModel},setDataModel:function(M){var E=this,y=E._dataModel;y!==M&&(y&&(y.umd(E.handlePropertyChange,E),E._3o||y.sm().ums(E.ivm,E)),E._dataModel=M,M.md(E.handlePropertyChange,E),E._3o?E._3o._21I(M):M.sm().ms(E.ivm,E),E.fp(Pn,y,M))},isVisible:function(P){return this._visibleFunc?this._visibleFunc(P):!0},onPropertyChanged:function(H){var v=this,x=H.property;zh[x]?v.ivm():v.iv(),x===Yc&&v._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:po},handlePropertyChange:function(L){this._27o===L.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var u=this;u._96I||(u.setSelectRowIndex(-1),u._96I=1,u.iv())},redraw:function(){this.iv()},validateModel:function(){var I=this,g=I._rows,d=I._28o,r={},C=new rn,S=I._27o;I.updateCurrentData(),S!==I._27o&&I.endEditing(),g.clear(),d.clear(),I.getRawProperties().each(function(c){if(I.isVisible(c)){C.add(c);var s=I.getCategoryName(c);r[s]||(d.add(s,s===Zi?0:H),r[s]={isExpanded:I.isExpanded(s),properties:new rn})}}),I._sortFunc&&C.sort(I._sortFunc);for(var $ in I._26o)I._26Q[$]=I.isExpanded($);I._26o=r,d.each(function(A){A!==Zi&&g.add(A);var G=r[A];G.isExpanded&&C.each(function(K){I.getCategoryName(K)===A&&(G.properties.add(K),g.add({property:K,data:I._27o}))},I)})},validateImpl:function(){var Q=this;Q._76o(),Q._96I&&(Q.validateModel(),delete Q._96I);var N=Q._canvas,g=Q.getWidth(),I=Q.getHeight(),m=-Q.ty(),p=Q._rowHeight,$=Q._indent,A=g-$,d=Q._rows,r=d.size(),i=Q._9I=$+A*Q._10I,b=Q._59I=r*p;kr(N,g,I),Q._29I={x:0,y:m,width:g,height:I},Q._31I=Z(m/p),Q._14I=S((m+I)/p),Q._31I<0&&(Q._31I=0),Q._14I>r&&(Q._14I=r);var O,V=os(N),P=Q._background;gp(V,0,-m,1),V.beginPath(),V.rect(0,m,g,I),V.clip(),V.clearRect(0,m,g,I),Q._93db(V),P&&rf(V,0,0,$,b,P);for(var W=Q._31I;W<Q._14I;W++){var y=d.get(W),m=p*W;if(re(y))P&&rf(V,$,m,A,p,P),O=Kf(Q.isExpanded(y)?Q._expandIcon:Q._collapseIcon),O&&Wc(V,O,ir,0,m,$,p),V.save(),V.beginPath(),V.rect($,m,A,p),V.clip(),Q.drawCategoryName(V,y,W,$,m,A,p),V.restore();else{var o=y.property,h=y.data,O=Kf(o.getIcon()),B=Q._selectRowIndex===W?Q.getSelectBackground():U;if(O&&Wc(V,O,ir,0,m,$,p),B&&rf(V,$,m,A,p,B),V.save(),V.beginPath(),V.rect($,m,i-$,p),V.clip(),Q.drawPropertyName(V,o,W,$,m,i-$,p),V.restore(),!Q.isEditing(h,o)){var q=i+1,l=g-i-1;V.save(),V.beginPath(),V.rect(q,m,l,p),V.clip(),Q._87o(Q.drawPropertyValue(V,o,Q.getValue(h,o),W,q,m,l,p,h),W,q,m,l,p),V.restore()}}Q._rowLineVisible&&rf(V,$,m+p-1,A,1,Q._rowLineColor)}Q._columnLineVisible&&(rf(V,i,0,1,b,Q._columnLineColor),rf(V,g-1,0,1,b)),Q._92db(V),Q._93I(),V.restore(),Q.ty(Q.ty())},drawCategoryName:function(a,W,G,h,D,r,M){vs(a,W,this.getCategoryFont(W),this.getCategoryColor(W),h,D,r,M)},drawPropertyName:function(v,p,E,y,w,P,d){return p.drawPropertyName?(p.drawPropertyName(v,p,E,y,w,P,d,this),void 0):(vs(v,this.getPropertyName(p),this.getPropertyFont(p,E),this.getPropertyColor(p,E),y,w,P,d),void 0)},drawPropertyValue:function(X,A,Z,H,G,t,P,J,K){return A.drawPropertyValue?A.drawPropertyValue(X,A,Z,H,G,t,P,J,K,this):(Uq(X,Z,A,this.getLabelFont(A,Z,H),this.getLabelColor(A,Z,H),G,t,P,J,K,this),void 0)},isPropertyEditable:function(C){return C.isEditable()&&this.isEditable()},setProperties:function(Z){this._propertyModel.clear(),this.addProperties(Z)},addProperties:function(Z){if(Z){var c=this._propertyModel;Z.forEach(function(U){if(!(U instanceof Np)){var G=xl(U.className);U=He(G?G:Np,U)}c.add(U)})}},getRowIndexAt:function(a){var p=this,W=Z(p.lp(a).y/p._rowHeight);return W>=0&&W<p._rows.size()?W:-1},getPropertyAt:function(j){var o=this,D=o.getRowIndexAt(j);return D>=0?o._rows.get(D).property:U},getToolTip:function(x){var g=this,y=g.getPropertyAt(x),S=g._27o;return y&&S?y.getToolTip(S,g._9I<g.lp(x).x,g):U}});var Sk=function(c){this.pv=c,this.addListeners()};ld(Sk,O,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(B){this.getView().style.cursor=B},clear:function(){var u=this;u._62O=u.cp=u.ty=u.p=U,u.setCursor(s)},handle_mousedown:function(l){this.handle_touchstart(l)},handle_touchstart:function(i){var a=this,N=a.pv;cj(i),N.setFocus(i)&&(cf(i)?(a.cp=yf(i),a.ty=N.ty(),a.p=N.getColumnPosition(),a.handle_touchmove(i)):N.setSelectRowIndex(N.getRowIndexAt(i)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(s){this.handle_touchend(s)},handle_touchend:function(M){var m=this;if(m.cp&&!m._62O){var W=m.pv,g=W.lp(M),V=g.x,I=g.y,U=W._indent,B=W.getRowIndexAt(M),H=W._9I;if(B>=0){var Z=W._rowHeight,$=Z*B,x=W._rows.get(B),k=x.property;if(re(x))Kf(W.isExpanded(x)?W._expandIcon:W._collapseIcon)&&V>=0&&U>=V&&I>=$&&$+Z>=I?W.toggle(x):Bm(M)&&W.toggle(x);else if(V>H&&W.isPropertyEditable(k)){var F={x:H+1,y:$,width:W.getWidth()-H-1,height:Z},O={x:F.x+W.tx(),y:F.y+W.ty(),width:F.width,height:F.height},p=0,G=W._29I;F.y<G.y?p=F.y-G.y:F.y+Z>G.y+G.height&&(p=F.y+Z-G.y-G.height),p&&(W.ty(W.ty()-p),O.y-=p),W.beginEditing({data:x.data,property:k,value:W.getValue(x.data,k),event:M,rect:F,editorRect:O,view:W})}}W.setSelectRowIndex(B)}m.clear()},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handleWindowTouchMove:function(y){var u=this,v=u.pv,S=u.ty,N=u.cp,q=yf(y),h=u._62O;if("p"===h)v.setTranslateY(S+q.y-N.y);else if("c"===h){var G=v.getWidth()-v._indent;if(G>16){var $=u.p-(N.x-q.x)/G,c=16/G;c>$&&($=c),$>1-c&&($=1-c),v.setColumnPosition($)}}else"s"===h&&v.setTranslateY(S+(N.y-q.y)*v._59I/v._29I.height)},handle_mousemove:function(H){this.handle_touchmove(H)},handle_touchmove:function(Y){if(!bs&&cf(Y)){var a=this,h=a.pv,W=g(h.lp(Y).x-h._9I)<=(K?8:3);a.cp?a._62O||(W?(a._62O="c",ds(a)):g(yf(Y).y-a.cp.y)>=2&&(a._62O=a.isV(Y)?"s":"p",ds(a))):(W?a.setCursor(Er):a.setCursor(s),a.isV(Y)&&h._43o())}},isV:function(R){var w=this.pv,S=w._29I;return w._41o()&&S.x+S.width-w.lp(R).x<Ib},handle_mousewheel:function(H){this.handleScroll(H,H.wheelDelta/40)},handle_DOMMouseScroll:function(w){2===w.axis&&this.handleScroll(w,-w.detail)},handleScroll:function(B,E){var e=this.pv;cj(B),e.endEditing(),e.translate(0,E*e.getRowHeight())},handle_keydown:function(X){var Q=this.pv,g=Q._rows.size(),h=Q._selectRowIndex+(pb(X)?-1:1);(pb(X)||Sf(X))&&(0>h&&(h=0),h>=g&&(h=g-1),Q.setSelectRowIndex(h))}}),Oq.ListView=function(d){this._5o(d),new Pb(this)},Bh("ListView",O,{ms_ac:[Kj,qb,wm,Zk,xn,hi,gc,us,mg,Nl,Sn,Nf,Kp,Bk],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Go,_rowHeight:Lf,_rowLineVisible:C.listViewRowLineVisible,_rowLineColor:C.listViewRowLineColor,_scrollBarColor:Ai,_scrollBarSize:Tj,_autoMakeVisible:sg,_autoHideScrollBar:ts,_selectBackground:C.listViewSelectBackground,_labelColor:C.listViewLabelColor,_labelSelectColor:C.listViewLabelSelectColor,_labelFont:C.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(n){var u=this,A=u._checkMode;u._checkMode=n,u.fp(vn,A,n)},drawRow:function(l,i,B,n,Q,C,L){var j=this,q=0,G=j._indent,E=j.getIconWidth(i);j.drawRowBackground(l,i,B,n,Q,C,L),j._checkMode&&(mm(l,j.getCheckIcon(i),q+G/2,Q+L/2,i,j),q+=G),j.drawIcon(l,i,q,Q,E,L),j.drawLabel(l,i,q+E,Q,L)}});var Pb=function(C){this.list=C,this.addListeners()};ld(Pb,O,{ms_listener:1,getView:function(){return this.list._view},clear:function(Q){var g=this;Q&&"d"===g._62O&&g.list.handleDragAndDrop(Q,"end"),g._62O=g.cp=g.tx=g.ty=U},handle_mousedown:function(p){this.handle_touchstart(p)},handle_touchstart:function(u){var O=this,I=O.list;if(cj(u),I.setFocus(u))if(O.cp=yf(u),O.tx=I.tx(),O.ty=I.ty(),cf(u))O.isV(u)||O.isH(u)||!I.handleDragAndDrop||I.handleDragAndDrop(u,"prepare");else{var Z=I.getDataAt(u);Z&&O._33o(u,Z),O.clear(u)}},handleWindowMouseUp:function(Q){this.clear(Q)},handleWindowTouchEnd:function(G){this.clear(G)},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(n){var u=this,s=u.list;if(u.cp&&!u._62O){var d=s.getDataAt(n);d&&(s.isCheckMode()?u._34o(n,d):u._33o(n,d),Bm(n)?s.onDataDoubleClicked(d,n):s.onDataClicked(d,n))}u.clear(n)},handleWindowMouseMove:function(d){this.handleWindowTouchMove(d)},handleWindowTouchMove:function(A){var V=this,D=V.list,n=V._62O,c=V.tx,T=V.ty,L=V.cp,r=yf(A),z=D._29I;"p"===n?D.setTranslate(c+r.x-L.x,T+r.y-L.y):"v"===n?D.ty(T+(L.y-r.y)*D._59I/z.height):"h"===n?D.tx(c+(L.x-r.x)*D._91I/z.width):"d"===n&&D.handleDragAndDrop(A,"between")},handle_mousemove:function(E){this.handle_touchmove(E)},handle_touchmove:function(V){if(!bs&&cf(V)){var m=this,I=m.list,o=m.isV(V),T=m.isH(V);if(m.cp){if(!m._62O){if(Qh(yf(V),m.cp)<2)return;o?m._62O="v":T?m._62O="h":I.handleDragAndDrop?(m._62O="d",I.handleDragAndDrop(V,"begin")):m._62O="p",ds(m)}}else o&&I._43o(),T&&I._42o()}},isV:function($){var r=this.list,i=r._29I;return r._41o()&&i.x+i.width-r.lp($).x<Ib},isH:function(j){var n=this.list,$=n._29I;return n._40o()&&$.y+$.height-n.lp(j).y<Ib},handle_mousewheel:function(g){this.handleScroll(g,g.wheelDelta/40,g.wheelDelta!==g.wheelDeltaX)},handle_DOMMouseScroll:function(C){this.handleScroll(C,-C.detail,1)},handleScroll:function(R,s,x){var F=this.list;cj(R),F.endEditing&&F.endEditing(),x&&F._41o()?F.translate(0,s*F.getRowHeight()):F._40o()&&F.translate(10*s,0)},handle_keydown:function(U){var B,T=this.list,V=T.sm(),e=T._rows,R=e.size();if(Wi(U))T.selectAll();else if(Xr(U))T.handleDelete&&T.handleDelete(U);else if(Jq(U))T.isCheckMode()&&(B=T.getFocusData(),B&&T.checkData(B));else if(pb(U)||Sf(U)){var A=T.isCheckMode();if(B=A?T.getFocusData():V.ld()){var s=T.getRowIndex(B);s>=0&&(pb(U)?0!==s&&(B=e.get(s-1),A?T.setFocusData(B):V.ss(B)):s!==R-1&&(B=e.get(s+1),A?T.setFocusData(B):V.ss(B)))}else R>0&&(B=e.get(0),A?T.setFocusData(B):V.ss(B))}},_34o:function(a,K){var Q=this.list,B=Q.lp(a).x;return B>=0&&B<=Q._indent?(Q.checkData(K),void 0):(Q.setFocusData(K),void 0)},_33o:function(H,T){var B=this.list,n=B.sm(),W=n.ld();if(Op(H))B.isSelected(T)?n.rs(T):n.as(T);else if(ng(H))if(W)for(var Z=B.getRowIndex(W),m=B.getRowIndex(T);Z!==m;)Z+=m>Z?1:-1,n.as(B._rows.get(Z));else n.ss(T);else(cf(H)||!n.contains(T))&&n.ss(T)}}),Oq.TreeView=function(E){var o=this;o._35o(),o._5o(E),new pg(o)},Bh("TreeView",O,{ms_ac:[Kj,qb,wm,"rootVisible",vn,"rootData",us,mg,Nl,Sn,Nf,xn,Zk,hi,gc,Qg,bm,Kp,Bk,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:U,_indent:Go,_rowHeight:Lf,_rowLineVisible:C.treeViewRowLineVisible,_rowLineColor:C.treeViewRowLineColor,_scrollBarColor:Ai,_scrollBarSize:Tj,_autoHideScrollBar:ts,_expandIcon:C.treeViewExpandIcon,_collapseIcon:C.treeViewCollapseIcon,_autoMakeVisible:sg,_selectBackground:C.treeViewSelectBackground,_labelColor:C.treeViewLabelColor,_labelSelectColor:C.treeViewLabelSelectColor,_labelFont:C.treeViewLabelFont,drawRow:function(C,l,Z,z,V,y,W){var v=this;v.drawRowBackground(C,l,Z,z,V,y,W),v._97I(C,l,Z,0,V,y,W)}});var pg=function(B){si(pg,this,[B])};ld(pg,Pb,{toggle:function(w,O,s,G){var $=this.list,y=$.lp(w).x;if(Kf($.getToggleIcon(O))){var l=s*G;if(y>=l&&l+s>=y)return $.toggle(O),!0}return Bm(w)?($.toggle(O),!0):!1},_34o:function(N,W){var u=this.list,e=u.lp(N).x,O=u._levelMap[W._id],P=u._indent,m=P*(O+1);return e>=m&&m+P>=e?(u.checkData(W),void 0):(this.toggle(N,W,P,O)||u.setFocusData(W),void 0)},_33o:function(w,B){var E=this,h=E.list;E.toggle(w,B,h._indent,h.getLevel(B))||pg.superClass._33o.call(E,w,B)},handle_keydown:function(g){if(kn(g)||Hf(g)){var i=this.list,U=i._rows,J=i.isCheckMode(),R=i.sm(),Z=J?i.getFocusData():R.ld();Z?Z.hasChildren()&&(kn(g)?i.collapse(Z):i.expand(Z)):U.size()>0&&(Z=U.get(0),J?i.setFocusData(Z):R.ss(Z))}else pg.superClass.handle_keydown.call(this,g)}});var Od=Oq.TableView=function(t){this._98I(),this._5o(t),new Ye(this)};Bh("TableView",O,{ms_ac:[Kj,qb,wm,"sortMode",Fo,Wl,Zk,hi,gc,lj,Jo,"sortColumn",us,mg,Nl,Sn,Nf,Kp,Bk],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Yo,_editable:!0,_batchEditable:!1,_rowHeight:Lf,_rowLineVisible:C.tableViewRowLineVisible,_rowLineColor:C.tableViewRowLineColor,_columnLineVisible:C.tableViewColumnLineVisible,_columnLineColor:C.tableViewColumnLineColor,_scrollBarColor:Ai,_scrollBarSize:Tj,_autoHideScrollBar:ts,_autoMakeVisible:sg,_selectBackground:C.tableViewSelectBackground,_labelColor:C.tableViewLabelColor,_labelSelectColor:C.tableViewLabelSelectColor,_labelFont:C.tableViewLabelFont,getCheckColumn:function(){var C=this;if(!C._31o){var j=C._31o=new xp;j.setEditable(!0),j.setWidth(40),j.getValue=C.getCheckColumValue,j.drawCell=C.drawCheckColumnCell}return C._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(B){var C=this,p=C._39o,i=C.getCheckColumn();B!==C.isCheckMode()&&(B?p.add(i,0):p.remove(i),C.fp(vn,!B,B))},getCheckColumValue:function(Z,K,x){return x.isSelected(Z)},drawCheckColumnCell:function(v,K,V,H,L,U,I,N,Z){mm(v,Z.getCheckIcon(K),L+I/2,U+N/2,K,Z)}});var Ye=function(b){si(Ye,this,[b])};ld(Ye,Pb,{_34o:function(B,r){var u=this.list,R=u._31o;if(u.isCellEditable(r,R)){var F=u._3Q(R),J=u.lp(B).x;if(F&&J>=F.startX&&J<F.startX+R.getWidth())return u.checkData(r),void 0}u.setFocusData(r),u._37O(r,B)},_33o:function(T,$){Ye.superClass._33o.apply(this,arguments),this.list._37O($,T)}});var ok=Oq.TreeTableView=function(R){var v=this,p=v._4o=new xp;v._35o(),v._98I(),v._5o(R),p.setDisplayName("Name"),p.setEditable(!0),p.setWidth(180),p.drawCell=Gi,p.getValue=ql,v._39o.add(p),new Mb(v)},Gi=function(C,X,k,Z,P,G,T,Q,o){o._97I(C,X,k,P,G,T,Q)},ql=function(Y,m,x){return x.getLabel(Y)};Bh("TreeTableView",O,{ms_ac:[Kj,qb,wm,"sortMode",Fo,Wl,xn,vn,"rootData","rootVisible",us,mg,"sortColumn",Qg,bm,Nl,Sn,Nf,Kp,gc,Zk,hi,lj,Jo,Bk,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Yo,_checkMode:U,_editable:!0,_batchEditable:!1,_indent:Go,_rowHeight:Lf,_rowLineVisible:C.treeTableViewRowLineVisible,_rowLineColor:C.treeTableViewRowLineColor,_columnLineVisible:C.treeTableViewColumnLineVisible,_columnLineColor:C.treeTableViewColumnLineColor,_expandIcon:C.treeTableViewExpandIcon,_collapseIcon:C.treeTableViewCollapseIcon,_scrollBarColor:Ai,_scrollBarSize:Tj,_autoHideScrollBar:ts,_autoMakeVisible:sg,_selectBackground:C.treeTableViewSelectBackground,_labelColor:C.treeTableViewLabelColor,_labelSelectColor:C.treeTableViewLabelSelectColor,_labelFont:C.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Mb=function(t){si(Mb,this,[t])};ld(Mb,Pb,{_34o:function(U,i){var S=this.list,F=S._4o,X=S._3Q(F),v=S.lp(U).x;if(X){var E=S._indent,q=X.startX+E*S.getLevel(i);if(Kf(S.getToggleIcon(i))&&v>=q&&q+E>=v)return S.toggle(i),void 0;if(S.isCellEditable(i,F)&&(q+=E,v>=q&&q+E>=v))return S.checkData(i),void 0}S.setFocusData(i),S._37O(i,U)},_33o:function(V,T){var X=this.list,R=X.lp(V).x;if(Kf(X.getToggleIcon(T))){var w=X._3Q(X._4o);if(w){var e=X._indent,b=w.startX+e*X.getLevel(T);if(R>=b&&b+e>=R)return X.toggle(T),void 0}}Mb.superClass._33o.apply(this,arguments),X._37O(T,V)}});var Xo=Oq.TableHeader=function(I){var U=this,j=U._view=Jp(1,U),L=U._39o=I.getColumnModel(),M=U.iv;U.tv=U._tableView=I,U._60I=new rn,U._canvas=Kh(j),j.style.background=C.tableHeaderBackground||"",j.style.height=Xi+kp,L.mm(M,U),L.md(M,U),L.mh(M,U),I.mp(function(D){Uh[D.property]&&U.iv()},U),new Bc(U),U.iv()};Bh("TableHeader",O,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Kj,wm,xn,"moveBackground","insertColor",lj,Jo,"resizable","movable"],_checkIcon:Ph,_movable:!0,_resizable:!0,_labelColor:C.tableHeaderLabelColor,_labelFont:C.tableHeaderLabelFont,_columnLineColor:C.tableHeaderColumnLineColor,_columnLineVisible:C.tableHeaderColumnLineVisible,_sortDescIcon:C.tableHeaderSortDescIcon,_sortAscIcon:C.tableHeaderSortAscIcon,_moveBackground:C.tableHeaderMoveBackground,_insertColor:C.tableHeaderInsertColor,_indent:Go,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(m){return m.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(Z){return Z.getColor()||this._labelColor},getLabelAlign:function(E){return E._align},onPropertyChanged:function(){this.iv()},_5Q:function(Y){this._61I=Y,this.iv()},getLogicalPoint:function(i){return Ah(i,this._canvas,this.tv.tx())},validateImpl:function(){var H=this,v=H._canvas,K=H.getWidth(),W=H.getHeight(),D=H.tv,O=H._60I,g=H._61I,l=-D.tx(),G=0;(K!==v.clientWidth||W!==v.clientHeight)&&kr(v,K,W),O.clear(),H._39o._roots.each(function(a){if(a.isVisible()){var r=G+a.getWidth();l+K>=G&&r>=l&&O.add({column:a,startX:G}),G=r}});var Q=os(v);if(gp(Q,-l,0,1),Q.beginPath(),Q.rect(l,0,K,W),Q.clip(),Q.clearRect(l,0,K,W),O.each(function(i){var K=i.column,F=i.startX,o=K.getWidth();o>0&&(Q.save(),Q.beginPath(),Q.rect(F,0,o,W),Q.clip(),g&&g.column===K||H.drawColumn(Q,K,F,0,o,W),H._columnLineVisible&&rf(Q,F+o-1,0,1,W,H._columnLineColor),Q.restore())}),g){var b=g.column,G=g.startX,i=g.position,y=b.getWidth();Q.save(),Q.beginPath(),Q.rect(G,0,y,W),Q.clip(),Q.fillStyle=H._moveBackground,Q.fill(),H.drawColumn(Q,b,G,0,y,W),Q.restore(),Nh(Q,H._insertColor,i,0,W)}Q.restore()},_6Q:function(_){var e=this.tv;return e._31o===_&&e.sm().getSelectionMode()===B},drawColumn:function(k,O,J,j,I,A){var u=this,x=u.tv,B=Kf(O.getIcon()),s=u.getLabelAlign(O);if(u._6Q(O)){var f=Kf(u._checkIcon);mm(k,f,J+I/2,j+A/2,O,u)}else{var G=u.getLabel(O),D=u.getLabelFont(O),m=u.getLabelColor(O),$=sm(D,G).width,q=B?u._indent:0;s===nd?(B&&Wc(k,B,ir,J,j,q,A),vs(k,G,D,m,J+q,j,I,A,nd)):s===ib?(B&&Wc(k,B,ir,J+I-$-q,j,q,A),vs(k,G,D,m,J,j,I,A,ib)):(B&&Wc(k,B,ir,J+(I-$-q)/2,j,q,A),vs(k,G,D,m,J+(I-$+q)/2,j,0,A,nd))}if(O.isSortable()&&x.getSortColumn()===O&&(B=Kf(O.getSortOrder()===ln?u._sortAscIcon:u._sortDescIcon))){var z=Sb(B,O)/2+2;mm(k,B,s===ib?J+z:J+I-z,j+A/2,O,x)}}});var Bc=function(b){var c=this;c.th=b,c.tv=b._tableView,c.addListeners()};ld(Bc,O,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(y){this.getView().style.cursor=y},handle_mousemove:function(p){if(!bs){var N=this;delete N._29o,N.setCursor(s);for(var b=N.th,o=b._60I,n=b.lp(p).x,H=o.size()-1;H>=0;H--){var A=o.get(H),M=A.column,i=A.startX+M.getWidth();if(b.isResizable()&&g(i-n)<=(K?10:3))return N._29o=A,N.setCursor(Er),void 0;(M.isSortable()||b.isMovable()||M===N.tv.getCheckColumn())&&n>=A.startX&&i>=n&&M.getWidth()>0&&(N._29o=A,N.setCursor(Ie))}}},handle_mousedown:function(v){this.handle_touchstart(v)},handle_touchstart:function(I){var b=this;cj(I),b.tv.endEditing(),b.handle_mousemove(I),b._29o&&(b.x=yf(I).x,b.lx=b.th.lp(I).x,b.w=b._29o.column.getWidth(),ds(b,I))},handleWindowMouseMove:function(G){this.handleWindowTouchMove(G)},handleWindowTouchMove:function(n){var u=this,s=u.th,p=u.getView().style.cursor,S=u._29o,h=yf(n).x-u.x;if(u.resizing||u.moving||(p===Er?u.resizing=1:s.isMovable()&&p===Ie&&g(h)>2&&(u.moving=1)),u.resizing)S.column.setWidth(u.w+h);else if(u.moving){var B=u.lx+h;s._60I.each(function(r){var V=r.startX,v=V+r.column.getWidth();if(B>=V&&v>=B){var e={column:S.column,startX:S.startX+h,front:v-B>B-V,insertColumn:r.column};e.position=e.front?V:v,s._5Q(e)}})}},_16Q:function(z,S){var w=this,s=w.tv,Q=w.th,h=Q._checkIcon;if(Q._6Q(z)){var i=Kf(h),R=w.lx,x=z.getWidth(),E=Sb(i,z);if(R>=S+x/2-E&&S+x/2+E>=R){Q.setCheckIcon(h===wr?Ph:wr);var K=s.sm(),Z=s._rows;return h===wr?K.rs(Z):K.ss(Z),s.onCheckColumnClicked(z),!0}}return!1},handleWindowMouseUp:function(X){this.handleWindowTouchEnd(X)},handleWindowTouchEnd:function(s){var d=this,p=d.tv,I=d.th,Y=d._29o;if(d.moving){var a=I._61I;if(a&&a.insertColumn!==a.column){var b=a.column,n=p.getColumnModel()._roots,L=n.remove(b),F=n.indexOf(a.insertColumn);F>=0&&(a.front||F++,F<=n.size()&&(n.add(b,F),p.getColumnModel()._38I(b,L,F)))}I._5Q(U),delete d.moving}else if(!d.resizing&&Y){b=Y.column;var H=I.lp(s).x,N=Y.startX,M=!0;if(I.onColumnClicked){var r=I.onColumnClicked(b,s);r===!1&&(M=!1)}if(M&&H>=N&&H<=N+b.getWidth()&&!d._16Q(b,N)){if(b.isSortable()){var X=p.getSortMode(),G=b.getSortOrder();X===Yo?p.getSortColumn()===b?(G===lg&&p.setSortColumn(U),b.setSortOrder(G===ln?lg:ln)):p.setSortColumn(b):"bistate"===X&&(p.getSortColumn()===b?b.setSortOrder(G===ln?lg:ln):p.setSortColumn(b))}p.onColumnClicked(b,s)}}d._29o=d.resizing=d.x=d.lx=d.w=U}}),Oq.TablePane=function(G){this.init(new Od(G))},Bh("TablePane",O,{ms_v:1,_44o:1}),Oq.TreeTablePane=function(T){this.init(new ok(T))},Bh("TreeTablePane",O,{ms_v:1,_44o:1}),Oq.Toolbar=function(F){var p=this,e=p._view=Jp(1,p),P=e.style;P.background=C.toolbarBackground||"",P.height=Jd+kp,p._canvas=Kh(e),p._30o=new rn,p._90I=new rn,p.setItems(F||[]),e.handleGroupSelectedChanged=function(E){if(E.isSelected()){var B=E.getGroupId();null!=B&&p._items.forEach(function(t){var i=t.element;i&&i!==E&&i.setSelected&&i.getGroupId&&i.getGroupId()===B&&i.setSelected(!1)})}},new jo(p)},Bh("Toolbar",O,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[kc,Kj,wm,qb,Bk,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:C.toolbarLabelColor,_labelSelectColor:C.toolbarLabelSelectColor,_labelFont:C.toolbarLabelFont,_selectBackground:C.toolbarSelectBackground,_itemGap:C.toolbarItemGap,_separatorColor:C.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(J){var y=this.getItemInfoAt(J);return y?y.item.toolTip:U},getLabelColor:function(k){return k.selected&&k.type!==wr&&k.type!==nq?this._labelSelectColor:this._labelColor},onPropertyChanged:function($){this.iv(),$.property===kc&&this._items.forEach(function(V){Zg(V)})},redraw:function(){this.iv()},addItem:function(o,$){var w=this._items;$==U?w.push(o):w.splice($,0,o),this.fp(kc,U,w)},removeItem:function(g){if(g)for(var m=this._items,e=0;e<m.length;e++)g===m[e]&&(m.splice(e,1),this.fp(kc,U,m))},removeItemById:function(f){if(f!=U)for(var r=this._items,T=0;T<r.length;T++)f===r[T].id&&(r.splice(T,1),this.fp(kc,U,r))},getItemById:function(E){if(E!=U)for(var S=this._items,e=0;e<S.length;e++){var Y=S[e];if(E===Y.id)return Y}},getItemInfos:function(){return this._30o},getItemInfoAt:function(T){var H=this,X=0,n=H._30o,d=H.lp(T),z=d.x,Y=d.y;if(Y>=0&&Y<=H.getHeight())for(;X<n.size();X++){var Q=n.get(X);if(Q.startX<=z&&z<=Q.endX)return Q}return U},drawItem:function(Y,L,D,U,C){if(L.visible===!1)return 0;var j=this,I=L.disabled;I&&(Y.globalAlpha=Ke);var c=j.drawItemImpl(Y,L,D,U,C),V=j._itemGap;return I&&(Y.globalAlpha=1),this._currentItem!==L||"separator"===L||L.unfocusable||zn(Y,j._separatorColor,D-V/2,0,c+V,U),c},drawItemImpl:function(Q,t,J,v,E){var r,_=this,y=_._view,a=_._itemGap,z=v/2,G=t.type,u=t.label,B=_.getLabelFont(t),A=_.getLabelColor(t),x=t.selected,N=Kf(t.icon),j=Sb(N,t),R=0,V=t.element,Y=j+(u?sm(B,u).width:0);if("separator"===t)return Nh(Q,_._separatorColor,J,v/4,z),1;if(V){N&&mm(Q,N,J+j/2,z),vs(Q,u,B,A,J+j,0,0,v);var M=ge(V);E||_._90I.add(M),M.parentNode!==y&&sk(y,M),V.iv&&V.iv(),V.validate&&V.validate();var O=M.getBoundingClientRect(),P=O.width,c=M.style;return En(M),c.left=_.tx()+J+Y+kp,c.top=(v-O.height)/2+kp,Y+P}return G===nq?r=Kf(x?yn:mc):G===wr&&(r=Kf(x?wr:Ph)),r?(R=Sb(r,t),mm(Q,r,J+R/2,z),J+=R,Y+=R):x&&rf(Q,J-a/2,0,Y+a,v,_.getSelectBackground(t)),N&&mm(Q,N,J+j/2,z),vs(Q,u,B,A,J+j,0,0,v),Y},validateImpl:function(){var o=this,D=o._canvas,a=o.getWidth(),v=o.getHeight(),A=o._30o,J=o._items;kr(D,a,v);var t=os(D),F=o._itemGap,B=F/2;gp(t,o.tx(),0,1),t.clearRect(0,0,a,v);var q=o._90I;o._90I=new rn,A.clear(),J.forEach(function(c){var b=o.drawItem(t,c,B,v);A.add({item:c,startX:B,endX:B+b,width:b}),b&&(B+=b+F)}),q.each(function(X){o._90I.contains(X)||xc(X)}),o._64I=W(0,B),t.restore(),o._stickToRight?(o._65O=0,t=os(D),B=a-o._64I+F,gp(t,0,0,1),t.clearRect(0,0,a,v),A.clear(),J.forEach(function(n){var V=o.drawItem(t,n,B,v,!0);A.add({item:n,startX:B,endX:B+V,width:V}),V&&(B+=V+F)}),t.restore()):o.tx(o.tx())},handleClick:function(R){var P=this,a=R.type,o=R.action,m=R.groupId,u=R.selected;R.disabled||(m!=U?u||(R.selected=!0,this._items.forEach(function(D){D.groupId===m&&R!==D&&(D.selected=!1)}),o&&R.action(R,P)):a===wr||"toggle"===a?(R.selected=!u,o&&R.action(R,P)):o&&R.action(R,P)),jp(),P.iv()}});var jo=function(h){this.tb=h,this.addListeners()};ld(jo,O,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(K){this.handleScroll(K,10*(K.wheelDelta/40))},handle_DOMMouseScroll:function(W){this.handleScroll(W,10*-W.detail)},handleScroll:function(E,w){cj(E);var J=this.tb;J.isScrollable()&&!J._stickToRight&&(J.tx(J.tx()+w),De())},handle_mousemove:function(c){var V=this;bs?V.info2=V.tb.getItemInfoAt(c):V.setItem(c)},handle_mouseout:function(z){var J=this;z.target===J.getView()?J.tb.setCurrentItem(U):J.handle_mousemove(z)},handle_mousedown:function(D){this.handle_mousemove(D),this.handle_touchstart(D)},handle_touchstart:function(q){var E=this,s=E.tb,r=q.target;(r===E.getView()||r===s._canvas)&&(cj(q),s.setFocus(q)&&(this.setItem(q),(s.isScrollable()||E.info&&!E.info.item.disabled)&&(E.x=yf(q).x,E.tx=s.tx(),ds(E,q))))},handleWindowMouseMove:function(N){this.handleWindowTouchMove(N)},handleWindowTouchMove:function(O){var z=this,Q=z.tb;if(!Q._stickToRight){var c=yf(O).x-z.x;!z._25o&&g(c)>2&&Q.isScrollable()&&(z._25o=1),z._25o&&Q.tx(z.tx+c)}},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)},handleWindowTouchEnd:function(){var p=this,L=p.tb,w=p.info,s=p.info2;
if(!p._25o&&w){var M=w.item;s&&s.item!==M||L.handleClick(M)}p._25o=p.x=p.tx=p.info2=U,p.setItem()},setItem:function(R){var L=this,h=L.tb,c=L.info=R?h.getItemInfoAt(R):U;h.setCurrentItem(c?c.item:U)}}),Oq.BorderPane=function(){this._view=Jp(1,this),this.iv()},Bh("BorderPane",O,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(B,C){this._12o("leftView",B),C!=U&&this.setLeftWidth(C)},getRightView:function(){return this._rightView},setRightView:function(V,u){this._12o("rightView",V),u!=U&&this.setRightWidth(u)},getTopView:function(){return this._topView},setTopView:function(n,m){this._12o("topView",n),m!=U&&this.setTopHeight(m)},getBottomView:function(){return this._bottomView},setBottomView:function(a,f){this._12o("bottomView",a),f!=U&&this.setBottomHeight(f)},getCenterView:function(){return this._centerView},setCenterView:function(S){this._12o("centerView",S)},_12o:function(N,j){var J=this,F="_"+N,f=J._view,h=J[F];h!==j&&(h&&(h.getView?xc(h.getView()):xc(h)),J[F]=j,j&&(j.getView?sk(f,j.getView(),1):sk(f,j,1)),J.fp(N,h,j))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var K=this,l=K._topView,B=K._bottomView,S=K._leftView,T=K._rightView,L=K._centerView,I=K.getWidth(),E=K.getHeight(),$=0,Y=0,o=I,F=E,y=0,G=0,Q=0,e=0;l&&(y=K._topHeight==U?md(l):K._topHeight,Y=y),B&&(G=K._bottomHeight==U?md(B):K._bottomHeight,F=E-G),S&&(Q=K._leftWidth==U?$n(S):K._leftWidth,$=Q),T&&(e=K._rightWidth==U?$n(T):K._rightWidth,o=I-e);var f=W(0,o-$),O=W(0,F-Y);l&&bb(l,0,0,I,y),B&&bb(B,0,F,I,G),S&&bb(S,0,Y,Q,O),T&&bb(T,o,Y,e,O),L&&bb(L,$,Y,f,O)}})}}(this,Object);