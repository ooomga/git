!function(P){"use strict";var Y="ht",M=P[Y],R=M.Default,n=Math,k=(n.PI,n.sin,n.cos,n.atan2,n.sqrt,n.max),b=n.floor,B=(n.round,n.ceil),r=M.Shape,q=(M.Edge,M.List),e=M.Style,N=M.graph,x=R.getInternal(),G=x.ui(),H=null,m="prototype",o=P.clearInterval,U=P.setInterval,D=function(p){var K=p.data,s=this.dm();if(K&&"add"===p.kind){var O=s.$1c,M=K instanceof r?"shape.":"edge.";O&&K.s(M+"dash.flow")&&O.indexOf(K)<0&&O.push(K)}"clear"===p.kind&&(s.$1c=[])},g=function(n){var J=n.property,q=n.data,k=n.newValue,M=this.dm().$1c,C=q instanceof r?"s:shape.dash.flow":"s:edge.dash.flow";if(M&&J===C)if(k)M.indexOf(q)<0&&M.push(q);else for(var Y=M.length,K=0;Y>K;K++)if(M[K]===q){M.splice(K,1);break}},l=N.GraphView[m],Z=G.EdgeUI[m],Q=G.ShapeUI[m],X=Q._80o,f=Z._80o,F=M.DataModel[m],$=F.prepareRemove,K=l.setDataModel;e["edge.dash.flow.step"]==H&&(e["edge.dash.flow.step"]=3),e["shape.dash.flow.step"]==H&&(e["shape.dash.flow.step"]=3),F.prepareRemove=function(s){$.call(this,s);var g=s._dataModel,P=g.$1c;if(P)for(var W=P.length,F=0;W>F;F++)if(P[F]===s){P.splice(F,1);break}},l.setDataModel=function(R){var V=this,s=V._dataModel;if(s!==R){s&&(s.umm(D,V),s.umd(g,V),s.$1c=[]),R.mm(D,V),R.md(g,V);var z=R.$1c=[];R.each(function(g){var w=g instanceof r?"shape.":"edge.";g.s(w+"dash.flow")&&z.indexOf(g)<0&&z.push(g)}),K.call(V,R)}},l.setDashFlowInterval=function(D){var x=this,z=x.$2c;x.$2c=D,x.fp("dashFlowInterval",z,D),x.$3c!=H&&(o(x.$3c),delete x.$3c,x.enableDashFlow(D))},l.getDashFlowInterval=function(){return this.$2c},l.$4c=function(){var g,V,X,f=this,n=f.tx(),G=f.ty(),y=f._zoom,K=f.getWidth(),E=f.getHeight(),T={x:-n/y,y:-G/y,width:K/y,height:E/y},F=f.dm().$1c,Q=f._56I,r=new q;if(F.forEach(function(w){Q[w.getId()]&&(g=f.getDataUI(w),g&&(X=g._79o(),X&&r.add(X)))}),0!==r.size()&&(r.each(function(A){R.intersectsRect(T,A)&&(V=R.unionRect(V,A))}),V&&(V&&(R.grow(V,k(1,1/y)),V.x=b(V.x*y)/y,V.y=b(V.y*y)/y,V.width=B(V.width*y)/y,V.height=B(V.height*y)/y,V=R.intersection(T,V)),V))){var S=f._canvas.getContext("2d");S.save(),S.lineCap=R.lineCap,S.lineJoin=R.lineJoin,x.translateAndScale(S,n,G,y),S.beginPath(),S.rect(V.x,V.y,V.width,V.height),S.clip(),S.clearRect(V.x,V.y,V.width,V.height),f.$5c(S,V),S.restore()}},l.$5c=function(d,O){var N,b,m=this;m._93db(d),m.each(function(p){m._56I[p._id]&&(N=m.getDataUI(p),N&&(b=N._79o(),(!O||R.intersectsRect(O,b))&&(N.$7c=!0,N._42(d),delete N.$7c)))}),m._92db(d)},l.enableDashFlow=function(z){var r=this;r.$3c==H&&(r.$3c=U(function(){r.$4c()},z||r.$2c||50))},l.disableDashFlow=function(){var f=this;o(f.$3c),delete f.$3c};var _=function(){var l=this,m=l._data,S=m instanceof r?"shape.":"edge.",u=m.s(S+"dash.pattern"),w=m.s(S+"dash.flow.reverse");if(u&&m.s(S+"dash")&&m.s(S+"dash.flow")&&l.$7c){var z=l.s(S+"dash.offset")||0,V=m.s(S+"dash.flow.step"),e=m.getStyleMap(),h=0;u.forEach(function(f){h+=f}),w&&(V=-V),z-=V,z%=h,e||(m._styleMap=e={}),e[S+"dash.offset"]=z}};Z._80o=function(O){f.call(this,O),_.call(this)},Q._80o=function(N){X.call(this,N),_.call(this)}}(this,Object);