!function(q,w){"use strict";var u="ht",S=u+".graph.",B=q[u],t=B.graph,C=B.Default,l=B.Color,P=null,Y="px",a=C.getInternal(),A=a.getPinchDist,L=C.preventDefault,H=C.getTouchCount,I=C.startDragging;a.addMethod(C,{overviewBackground:l.widgetBackground,overviewMaskBackground:l.transparent,overviewContentBorderColor:l.widgetBorder,overviewContentBackground:l.background},!0),t.Overview=function(F){var p=this,r=p._view=a.createDiv(1);p._canvas=a.createCanvas(r),r.style.background=C.overviewBackground,r.appendChild(p._mask=a.createDiv()),p.gv=F,p.redraw(),p.addListeners(),F.addViewListener(p.handleView,p)},C.def(S+"Overview",w,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:C.overviewMaskBackground,_contentBorderColor:C.overviewContentBorderColor,_contentBackground:C.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var k=this;k.gv.removeViewListener(k.handleView,k)},onPropertyChanged:function(){this.redraw()},handleView:function(h){this._autoUpdate&&"validate"===h.kind&&this.redraw()},redraw:function(){var O=this;O._redraw||(O._redraw=1,O.iv(50))},validateImpl:function(){var A=this,e=A.gv,I=A._canvas,c=A._mask,N=c.style,O=A.getWidth(),H=A.getHeight(),j=e.getViewRect(),o=e.getScrollRect(),h=o.x,X=o.y,K=o.width,U=o.height,E=A._rate=Math.max(K/O,U/H),p=A._x=(O-K/E)/2,F=A._y=(H-U/E)/2,Z=A._redraw;if(0!==j.width&&0!==j.height||A.hasRetry||(C.callLater(A.iv,A,P),A.hasRetry=!0),(O!==I.clientWidth||H!==I.clientHeight)&&(a.setCanvas(I,O,H,1),Z=1),a.isSameRect(o,A._scrollRect)||(A._scrollRect=o,Z=1),Z){var w=a.initContext(I),r=A._contentBackground,Q=A._contentBorderColor;w.clearRect(0,0,O,H),r&&a.fillRect(w,p,F,K/E,U/E,r),Q&&a.drawBorder(w,Q,p,F,K/E,U/E),w.translate(-h/E+p,-X/E+F),w.scale(1/E,1/E),e._42(w),w.restore()}N.background=A._maskBackground,N.left=p+(j.x-h)/E+Y,N.top=F+(j.y-X)/E+Y,N.width=j.width/E+Y,N.height=j.height/E+Y,delete A._redraw},center:function(K){var L=this,G=L.gv,r=G._zoom,H=G._29I,V=L._rate,Y=L._scrollRect,u=C.getLogicalPoint(K,L._canvas),g=Y.x+(u.x-L._x)*V,M=Y.y+(u.y-L._y)*V;G.setTranslate((H.width/2-g)*r,(H.height/2-M)*r)},handle_mousedown:function(z){this.handle_touchstart(z)},handleWindowMouseUp:function(b){this.handleWindowTouchEnd(b)},handleWindowMouseMove:function(A){this.handleWindowTouchMove(A)},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta)},handle_DOMMouseScroll:function(o){2===o.axis&&this.handleScroll(o,-o.detail)},handleScroll:function(z,G){L(z);var P=this.gv;G>0?P.scrollZoomIn():0>G&&P.scrollZoomOut()},handle_touchstart:function(T){if(L(T),C.isLeftButton(T)){var o=this,n=o.gv,$=H(T);1===$?C.isDoubleClick(T)&&n.isResettable()?n.reset():(o.center(T),I(o,T)):2===$&&(o._dist=A(T),I(o,T))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(J){var i=this,E=i._dist,v=H(J);1===v?i.center(J):2===v&&E!=P&&i.gv.handlePinch(P,A(J),E)}})}(this,Object);