!function(w,C){"use strict";var K="ht",N=w[K],h="innerHTML",z="className",Z=null,F="px",y=N.Default,j=y.getInternal(),S="0",n=function(){return document},X=function(Y){return n().createElement(Y)},$=function(){return X("div")},r=function(){return X("canvas")},B=function(C,k,r){C.style.setProperty(k,r,Z)},T=function(r,W,i){y.def(N.widget[r],W,i)},l=function(S,h){S.appendChild(h)},b=function($,A){$.removeChild(A)},o=function(H,F,U,k){H.addEventListener(F,U,!!k)},c=function(Y,N,l,W){Y.removeEventListener(N,l,!!W)},k=y.isTouchable;j.addMethod(y,{menuLabelFont:(k?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),N.widget.Menu=function(W){var o=this,U=o._view=$(),a=o.$1g=new N.widget.ContextMenu,j=X("ul");a._r=!0,a._view[z]+=" ht-widget-dropdownmenu",U[z]="ht-widget-menu",j[z]="header",B(U,"margin",S),B(U,"padding",S),B(U,"background",y.menuBackground),B(U,"-webkit-user-select","none"),B(U,"-moz-user-select","none"),B(U,"user-select","none"),B(U,"text-align","left"),B(U,"border-bottom",y.menuSeparatorWidth+"px solid "+y.menuSeparatorColor),B(U,"cursor","default"),B(U,"overflow","auto"),B(U,"white-space","nowrap"),B(U,"font",y.menuLabelFont),B(U,"color",y.menuLabelColor),B(U,"box-sizing","border-box"),B(U,"-moz-box-sizing","border-box"),B(j,"list-style","none"),B(j,"margin",S),B(j,"padding",S),B(j,"display","inline-block"),l(U,j),o.setItems(W),o.$2g=function(s){o.$3g(s)},o.$4g=function(d){o.$5g(d)},o.$6g=function(L){o.$7g(L)},o.$8g=function(D){o.$9g(D)},o.$9b=function(U){o.$10g(U)},o._autoShow=!0,o.setAutoShow(!1),a.afterHide=function(){o.$11g()},a.afterShow=function(){o.$12g()},c(n(),"keydown",a.$3b),o.$3b=function(i){o.$13g(i)},o.invalidate()},T("Menu",C,{_items:Z,$14g:y.menuHoverBackground,$15g:y.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(c){var n=this;if(n.$21g=c,n.setItems(n._items),"largeicons"===c){for(var v=n._view.querySelectorAll(".header-item"),i=0,j=0;j<v.length;j++){var O=v[j];i=Math.max(i,O.clientWidth)}for(var j=0;j<v.length;j++){var O=v[j];B(O,"min-width",i+F)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(_){this.$22g=_;for(var P=this._view.querySelectorAll(".header-item"),A=0;A<P.length;A++){var G=P[A];B(G,"margin-left",_+F),B(G,"margin-right",_+F)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(r){this.$23g=r;for(var u=this._view.querySelectorAll(".header-item"),j=0;j<u.length;j++){var V=u[j];B(V,"margin-top",r+F),B(V,"margin-bottom",r+F)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(d){this.$24g=d,B(this._view,"text-align",d)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var l=this,z=l._enableGlobalKey;z===!1&&(o(n(),"keydown",l.$3b),l._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,c(n(),"keydown",this.$3b)},setHoverBackground:function(v){this.$14g=v},setHoverColor:function(J){this.$15g=J},setItems:function(x){var N=this,t=N._view,E=N.$21g;if(N._items=x,t.children[0][h]="",N.$16g={},x&&x.length){for(var b=t.children[0],j=0,p=n().createDocumentFragment();j<x.length;j++){var P=x[j],_=X("li"),K=X("span");if(P.icon){var m=r();m[z]="menu-item-icon","smallicons"===E?(B(m,"height","1.2em"),B(m,"width","1.2em"),B(m,"vertical-align","middle")):(B(m,"height","32px"),B(m,"width","32px"),B(m,"display","block"),B(m,"margin","0 auto")),m.$20g=P.icon,l(_,m)}_[z]="header-item",B(_,"display","inline-block"),B(_,"vertical-align","top"),B(_,"padding","0 1.2em"),B(_,"line-height","1.8em"),"largeicons"===E&&B(_,"text-align","center"),B(_,"background-color","rgba(0,0,0,0)"),_.setAttribute("data-index",j),N.$16g[j]=P.items,K[h]=P.label,"iconsonly"!==E&&l(_,K),l(p,_)}l(b,p)}},showDropdownMenu:function(U){var m=this,p=m.$16g[U],G=m.$1g,H=m._view.children[0].children[U],s=m.$17g;if(H&&H!==s){s&&m.hideDropdownMenu();var k=H.getBoundingClientRect(),h=y.getWindowInfo();m.$17g=H,G.setItems(p),G.show(k.left+h.left,k.top+k.height+h.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(e,n){var W=this,N=W._items;return N&&0!==N.length?W.$1g.getItemByProperty(e,n,N):Z},$12g:function(){var r=this,I=r.$17g;I.style.background=r.$14g,I.style.color=r.$15g,r._autoShow||o(n(),k?"touchstart":"mousedown",r.$9b)},$11g:function(){var x=this,l=x.$17g;l&&(l.style.background="",l.style.color="",x.$17g=Z),c(n(),k?"touchstart":"mousedown",x.$9b)},$10g:function(E){var z=this,Q=z._view,A=z.$1g,c=Q.children[0];!n().body.contains(Q)||c.contains(E.target)||A._view.contains(E.target)||z.hideDropdownMenu()},$13g:function(p){var u=this,P=u.$1g;n().body.contains(u._view)&&P.$13b.$4b.call(P.$13b,p,u._items)},setAutoShow:function(W){var R=this,L=R.$1g,E=R._view;R._autoShow!==W&&(R._autoShow?(c(E,"mouseover",R.$2g),c(E,"mouseout",R.$4g),c(L._view,"mouseout",R.$4g),k||(o(E,"mouseover",R.$8g),o(E,"mouseout",R.$8g)),o(E,k?"touchstart":"mousedown",R.$6g)):(c(E,"mouseover",R.$8g),c(E,"mouseout",R.$8g),c(E,k?"touchstart":"mousedown",R.$6g),c(n(),k?"touchstart":"mousedown",R.$9b),k||(o(E,"mouseover",R.$2g),o(E,"mouseout",R.$4g),o(L._view,"mouseout",R.$4g))),R._autoShow=W)},$3g:function(K){var g=this,X=g._view.children[0],t=K.target;if(X!==t&&X.contains(t)){for(;"header-item"!==t[z];)t=t.parentNode;g.showDropdownMenu(t.getAttribute("data-index"))}},$5g:function(S){var k=this,R=k._view.children[0],O=k.$1g,b=S.target,N=S.relatedTarget;!R.contains(b)&&!O._view.contains(b)||R.contains(N)||O._view.contains(N)||k.hideDropdownMenu()},$7g:function(Z){var u=this,O=u._view.children[0],d=u.$1g,Y=Z.target;if(y.isLeftButton(Z)&&O!==Y&&O.contains(Y))if(k){for(;"header-item"!==Y[z];)Y=Y.parentNode;var b=Y.getAttribute("data-index"),d=u.$1g,h=u._view.children[0].children[b],g=u.$17g;d.isShowing()&&u.hideDropdownMenu(),h!==g&&u.showDropdownMenu(b)}else if(d.isShowing())u.hideDropdownMenu();else{for(;"header-item"!==Y[z];)Y=Y.parentNode;u.showDropdownMenu(Y.getAttribute("data-index"))}},$9g:function(s){var S=this,e=S._view,x=S.$1g,U=s.target;if(e.contains(U)){for(var P=e.querySelectorAll(".header-item"),t=Z,v=0;v<P.length;v++){var R=P[v];R.style.background="",R.style.color="","mouseover"===s.type?R.contains(U)&&(t=R):"mouseout"===s.type&&x.isShowing()&&S.$17g===R&&(t=R)}x.isShowing()&&(t||(t=S.$17g),S.showDropdownMenu(t.getAttribute("data-index"))),t&&(t.style.background=S.$14g,t.style.color=S.$15g)}},getShowingMenuIndex:function(){var B=this.$17g;return B?B.getAttribute("data-index"):-1},addTo:function(Q){var P=this,q=P._view;l(Q,q),P.invalidate()},dispose:function(){var Y=this,q=Y._view,A=Y.$1g;q&&(Y._autoShow?(c(q,"mouseover",Y.$2g),c(q,"mouseout",Y.$4g),c(A._view,"mouseout",Y.$4g)):(c(q,"mouseover",Y.$8g),c(q,"mouseout",Y.$8g),c(q,k?"touchstart":"mousedown",Y.$6g),c(n(),k?"touchstart":"mousedown",Y.$9b)),c(n(),"keydown",Y.$3b),A.dispose(),q.parentNode&&b(q.parentNode,q),Y._view=Y.$1g=Y.$16g=Y._items=Y.$17g=Y.$2g=Y.$4g=Y.$6g=Y.$8g=Y.$9b=Y.$3b=Z)},$19g:function(i,V,k,T){var $=j.initContext(i);j.translateAndScale($,0,0,1),$.clearRect(0,0,k,T),y.drawStretchImage($,y.getImage(V),"fill",0,0,k,T),$.restore()},validateImpl:function(){var W,C,N,s=this,T=s._view,Y=T.querySelectorAll(".menu-item-icon");for(N=0;N<Y.length;N++){var m=Y[N];W=m.clientWidth,C=m.clientHeight,W&&C&&(j.setCanvas(m,W,C),s.$19g(m,y.getImage(m.$20g),W,C))}}})}(this,Object);